{"version":3,"sources":["webpack:///_dist/bundle.js","webpack:///webpack/bootstrap c43738d7d57f8a7c3575","webpack:///./source/battle/defs.js","webpack:///./source/battle/camera.js","webpack:///./source/utils/ui.js","webpack:///./source/utils/approxDistance.js","webpack:///./source/store/store.js","webpack:///../~/babel-runtime/core-js/object/assign.js","webpack:///../~/core-js/library/modules/_core.js","webpack:///./source/battle/entityBase.js","webpack:///./source/localize.js","webpack:///./source/battle/entityMeleeFighter.js","webpack:///../~/babel-runtime/core-js/json/stringify.js","webpack:///../~/core-js/library/modules/_global.js","webpack:///./source/common/baseScene.js","webpack:///./source/config/production.js","webpack:///../~/babel-runtime/helpers/classCallCheck.js","webpack:///../~/babel-runtime/helpers/createClass.js","webpack:///../~/babel-runtime/helpers/defineProperty.js","webpack:///../~/core-js/library/modules/_descriptors.js","webpack:///../~/core-js/library/modules/_export.js","webpack:///../~/core-js/library/modules/_fails.js","webpack:///./source/reducer/authenticate.js","webpack:///./source/battle/entityEffectBullet.js","webpack:///./source/common/alertLayer.js","webpack:///../~/core-js/library/modules/_is-object.js","webpack:///./source/reducer/room.js","webpack:///./source/battle/entityEffectHit1.js","webpack:///./source/battle/entityTower.js","webpack:///./source/common/objectPool.js","webpack:///../~/babel-runtime/core-js/object/define-property.js","webpack:///../~/babel-runtime/core-js/set-immediate.js","webpack:///../~/core-js/library/modules/_cof.js","webpack:///../~/core-js/library/modules/_ctx.js","webpack:///../~/core-js/library/modules/_defined.js","webpack:///../~/core-js/library/modules/_dom-create.js","webpack:///../~/core-js/library/modules/_iobject.js","webpack:///../~/core-js/library/modules/_object-dp.js","webpack:///../~/core-js/library/modules/_object-keys.js","webpack:///../~/core-js/library/modules/_to-integer.js","webpack:///../~/core-js/library/modules/_to-iobject.js","webpack:///../~/core-js/library/modules/_to-object.js","webpack:///./source/reducer/appState.js","webpack:///./source/scenes/InGameScene.js","webpack:///./source/scenes/LoadingScene.js","webpack:///./source/scenes/MenuScene.js","webpack:///./source/scenes/SplashScene.js","webpack:///./source/sound/sound.js","webpack:///./source/app.js","webpack:///./source/battle/actionBar.js","webpack:///./source/battle/battle.js","webpack:///./source/battle/cardButton.js","webpack:///./source/battle/entityDual.js","webpack:///./source/battle/entityEffectHeal.js","webpack:///./source/battle/entityEffectRocket.js","webpack:///./source/battle/entityGunner.js","webpack:///./source/battle/entityHQ.js","webpack:///./source/battle/entityHealer.js","webpack:///./source/battle/entitySiege.js","webpack:///./source/battle/formation.js","webpack:///./source/battle/index.js","webpack:///./source/battle/presentation.js","webpack:///./source/battle/topBar.js","webpack:///./source/common/notifyLayer.js","webpack:///./source/common/socketClient.js","webpack:///./source/common/waitingLayer.js","webpack:///./source/config/pokemons.js","webpack:///./source/store/api.js","webpack:///./source/store/next.js","webpack:///./source/store/storage.js","webpack:///./source/utils/httpRequest.js","webpack:///./source/utils/shuffle.js","webpack:///../~/babel-runtime/core-js/object/keys.js","webpack:///../~/core-js/library/fn/json/stringify.js","webpack:///../~/core-js/library/fn/object/assign.js","webpack:///../~/core-js/library/fn/object/define-property.js","webpack:///../~/core-js/library/fn/object/keys.js","webpack:///../~/core-js/library/fn/set-immediate.js","webpack:///../~/core-js/library/modules/_a-function.js","webpack:///../~/core-js/library/modules/_an-object.js","webpack:///../~/core-js/library/modules/_array-includes.js","webpack:///../~/core-js/library/modules/_enum-bug-keys.js","webpack:///../~/core-js/library/modules/_has.js","webpack:///../~/core-js/library/modules/_hide.js","webpack:///../~/core-js/library/modules/_html.js","webpack:///../~/core-js/library/modules/_ie8-dom-define.js","webpack:///../~/core-js/library/modules/_invoke.js","webpack:///../~/core-js/library/modules/_object-assign.js","webpack:///../~/core-js/library/modules/_object-gops.js","webpack:///../~/core-js/library/modules/_object-keys-internal.js","webpack:///../~/core-js/library/modules/_object-pie.js","webpack:///../~/core-js/library/modules/_object-sap.js","webpack:///../~/core-js/library/modules/_property-desc.js","webpack:///../~/core-js/library/modules/_shared-key.js","webpack:///../~/core-js/library/modules/_shared.js","webpack:///../~/core-js/library/modules/_task.js","webpack:///../~/core-js/library/modules/_to-absolute-index.js","webpack:///../~/core-js/library/modules/_to-length.js","webpack:///../~/core-js/library/modules/_to-primitive.js","webpack:///../~/core-js/library/modules/_uid.js","webpack:///../~/core-js/library/modules/es6.object.assign.js","webpack:///../~/core-js/library/modules/es6.object.define-property.js","webpack:///../~/core-js/library/modules/es6.object.keys.js","webpack:///../~/core-js/library/modules/web.immediate.js","webpack:///../~/webpack/buildin/global.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_pokemons","_pokemons2","obj","default","SCREEN_SIZE","cc","winSize","SCREEN_CENTER","width","height","ACTION_BAR_WIDTH","TOP_BAR_WIDTH","BATTLE_SCALE","BATTLE_POSITION","UNIT_DATA","hq","hp","attack","defense","Size","Range","Sight","Cool","Speed","Cost","Klass","animation","idle","count","loop","die","armor","tower","BATTLE_HEIGHT","TOP_BAR_HEIGHT","ACTION_FIELD_WIDTH","ACTION_FIELD_HEIGHT","ACTION_BUTTON_SIZE","ACTION_BAR_HEIGHT","ACTION_BUTTON_WIDTH","ACTION_BUTTON_HEIGHT","ACTION_BUTTON_GAP","ARENA_WIDTH","ARENA_HEIGHT","ARENA_CELL_WIDTH","ARENA_CELL_HEIGHT","BIG_DISTANCE","MAX_CARDS_PER_ROUND","TURN_PADDING","POKEMONS","ANIMATION_FPS","UNIT_STATE_IDLE","UNIT_STATE_WALK","UNIT_STATE_ATTACK","UNIT_STATE_DYING","Camera","this","translate","rotate","setRotate","setTranslate","_assign","_assign2","LEFT_TOP","LEFT_MIDDLE","LEFT_BOTTOM","CENTER_TOP","CENTER","CENTER_BOTTOM","RIGHT_TOP","RIGHT_MIDDLE","RIGHT_BOTTOM","RESIZE_STRETCH","RESIZE_COVER","RESIZE_CONTAIN","makeNode","root","opts","node","Node","setPosition","position","setAnchorPoint","anchorPoint","setContentSize","contentSize","size","addChild","zOrder","makeImageView","rootSize","getContentSize","center","img","ccui","ImageView","sprite","Widget","PLIST_TEXTURE","baseSize","scale9Size","ignoreContentAdaptWithSize","setScale9Enabled","scale","setScale","scaleX","setScaleX","scaleY","setScaleY","imgSize","resizeMode","Math","max","min","makeSprite","Sprite","makeText","txt","Text","text","font","fontSize","setTextHorizontalAlignment","horzAlign","TEXT_ALIGNMENT_CENTER","setTextVerticalAlignment","vertAlign","VERTICAL_TEXT_ALIGNMENT_CENTER","setTextColor","color","setSize","shadow","enableShadow","shadowColor","shadowOffset","outline","enableOutline","outlineColor","outlineSize","glow","glowColor","makeButton","btn","Button","loadTextures","normal","pressed","disabled","listener","addTouchEventListener","listenerTarget","makeSlider","barTexture","buttonTexture","buttonTextureClicked","progressBarTexture","touchEnable","onChange","onEvent","slider","Slider","setTouchEnabled","loadBarTexture","getResourceAlias","loadSlidBallTextures","loadProgressBarTexture","addEventListener","sender","type","EVENT_PERCENT_CHANGED","getPercent","toFixed","makeMaskedSprite","spr","maskNode","create","mask","clipping","ClippingNode","setAlphaThreshold","makeListView","listView","ListView","setDirection","direction","ScrollView","DIR_VERTICAL","setBounceEnabled","setClippingType","clippingType","Layout","CLIPPING_SCISSOR","setClippingEnabled","makeProgressBar","bar","LoadingBar","loadTexture","setPercent","percent","relativeTo","relative","x","y","relativeHorz","relativeVert","rootContentSize","dx","dy","approx","_interopRequireDefault","getStoreState","disconnectStore","connectStore","storeDispatch","createStore","undefined","_setImmediate2","_setImmediate3","_defineProperty2","_defineProperty3","_keys","_keys2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_api","_api2","_storage","_storage2","_next","_next2","middlewares","Store","reducers","state","_reducers","_connectedScenes","clear","key","_this","reduce","prev","curr","storedStates","loadState","k","action","_this2","runDispatch","getState","slice","chain","_this3","that","length","connectedScenes","callback","forEach","scene","onStoreChange","splice","_store","dispatch","push","idx","findIndex","scn","core","version","__e","_defs","_defs2","_camera","_camera2","_approxDistance","_approxDistance2","ANIMATION_CACHE","EntityBase","extend","ctor","team","presentation","_super","logic","HP","z","cool","zShift","attr","facing","stateData","target","time","_departurePosition","_futurePosition","setFacing","isAlive","isWounded","isActive","damage","amount","getDefense","heal","setUnitData","data","animAction","toLowerCase","walk","createAnimAction","camRot","setLocation","syncPosition","convertPosition","convertZ","update","dt","step","canAttack","canSee","getDistanceTo","getSight","getDistanceToPos","animatePosition","t","timeFrameCounter","stepTime","pos","lerp","setLocalZOrder","stepLiveliness","currentAction","intentAction","stopAllActions","runAction","isSingleFrame","animationName","framesCount","frame","animFrames","spriteFrameCache","getSpriteFrame","Animation","RepeatForever","Animate","getSize","getAttack","getAttackFor","targetAttr","baseAttack","attackHeavy","attackLight","getRange","getAttackCool","getMoveSpeed","isOfflane","_texts","currentLanguage","getCaps","toUpperCase","getCapFirst","charAt","getCapsColon","shortenText","maxLength","substring","ok","en","vn","cancel","yes","no","instantPlay","option","help","about","logout","battle","train","collect","level","jackpot","bet","pleaseWait","noMoreBet","blackjack_insurance","pot","total_bet","total_win","buy_in","notEnoughMoney","maxBetAlready","inviteFriendMessage","game_guide","option_setting","option_notification","music","sound","vibration","general_notification","friends","friends_notification","option_account","spin","ranking","_entityBase","_entityBase2","_entityEffectHit","_entityEffectHit2","EntityMeleeFighter","updateIdle","lookForEnemy","mag","v","dist","createEffect","hit","addEffect","enemy","findEnemy","goal","findGoal","global","window","self","Function","__g","_alertLayer","_alertLayer2","_waitingLayer","_waitingLayer2","BaseScene","Scene","opt","sprites","persitSprites","sounds","_loadingCount","_sprites","_persitSprites","_sounds","onEnter","loadResource","loadSound","checkReady","isDone","onLoading","onReady","Sound","preload","_","concat","loadResources","map","addSpriteFramesFromResource","unloadResource","removeSpriteFramesFromResource","onExit","showWaiting","setState","cb","newState","onNextState","onStateChange","visible","setVisible","showError","error","onClick","setError","apiUrl","location","origin","socketUrl","host","localStorageName","instance","Constructor","TypeError","_defineProperty","defineProperties","props","descriptor","writable","protoProps","staticProps","a","ctx","hide","$export","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","C","b","arguments","apply","virtual","R","U","exec","e","authenticate","login","LOGIN","actionHandler","payload","next","persist","id","initialState","accessToken","handler","EntityEffectBullet","owner","spriteName","life","startX","startY","startDistance","idleAction","hitAction","isHit","setRotation","atan2","PI","_stringify","_stringify2","_localize","_localize2","_ui","_ui2","AlertLayer","addSpriteFrames","_error","_onClick","setBackGroundColor","setBackGroundColorOpacity","setBackGroundColorType","BG_COLOR_SOLID","setSwallowTouches","panel","_text","getNormalFontName","button","touchEvent","getBigFontName","setString","TOUCH_ENDED","it","room","startBattle","START_BATTLE","api","endpoint","result","response","EntityEffectHit1","_entityEffectBullet","_entityEffectBullet2","EntityTower","ObjectPool","onCreate","onShow","onHide","onDestroy","list","pop","toString","aFunction","fn","isObject","document","is","createElement","cof","propertyIsEnumerable","split","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","$keys","enumBugKeys","keys","ceil","floor","isNaN","IObject","defined","appState","setAppState","UNLOAD_SOUND","UNLOAD_SPRITE","LOAD_SOUND","LOAD_SPRITE","SET_APP_STATE","_baseScene","_baseScene2","_config","_objectPool","_battle","_battle2","InGameScene","log","init","connect","scheduleUpdate","unscheduleUpdate","close","onAction","touch","event","isReady","_room","LoadingSceneLayer","Layer","LoadingScene","console","director","runScene","SplashScene","_authenticate","MenuSceneLayer","TOP_CENTER","initUI","addButton","onInstantPlay","handle","playSfx","stopMusic","userId","random","substr","onEnterOption","MenuScene","playMusic","SplashSceneLayer","setTimeout","_sound_pool","_sfx","soundExtension","getSoundExtension","sources","path","canPlayType","replace","audioEngine","setMusicVolume","setEffectsVolume","getEffectsVolume","getUrl","playEffect","stopEffect","stopAllEffects","_appState","_appState2","_authenticate2","_room2","initApp","restoreState","_cardButton","_cardButton2","ActionBar","socket","_opts","cardButtons","hand","selectingCard","referenceCount","formationLayout","formation","_touchListener","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","bind","onTouchMoved","onTouchEnded","onTouchCancelled","eventManager","addListener","setHand","pokemon","find","pokedex","addCard","index","actionBar","setPokemon","select","card","unselect","setFormation","units","unit","deployed","ref","containsTouchLocation","getPosition","pt","getLocation","unitData","cost","total","gold","isCancelled","send","sz","bb","rect","rectContainsPoint","convertToNodeSpace","_socketClient","_socketClient2","_presentation","_presentation2","_actionBar","_actionBar2","_shuffle","_notifyLayer","_notifyLayer2","_topBar","_topBar2","config","State","LOADING","WAITING","RUNNING","GAMEOVER","Battle","currentTurn","receivedTurnCount","replay","isLagged","onOpenActionBar","isVisible","ground","openButton","playerId","topBar","groundSize","lagNotify","setText","battleResult","roomId","message","popMessage","handleReady","handleTimeOver","handleTurn","showLaggedWarning","hideLaggedWarning","initGameOver","winnerId","turn","deployList","deploy","deployment","setInfo","CardButton","costText","isSelected","setSpriteFrame","_entityMeleeFighter","_entityMeleeFighter2","EntityDual","bulletName","secondTarget","lookForSecondTarget","enemies","findEnemies","EntityEffectHeal","EntityEffectRocket","findEnemyInArea","SplashRange","EntityGunner","_entityTower","_entityTower2","EntityHQ","_entityEffectHeal","_entityEffectHeal2","EntityHealer","lookForAlly","findWoundedAlly","_entityEffectRocket","_entityEffectRocket2","EntitySiege","Formation","h","_formation","_formation2","_entityHQ","_entityHQ2","_entityGunner","_entityGunner2","_entityHealer","_entityHealer2","_entitySiege","_entitySiege2","_entityDual","_entityDual2","ENTITY_KLASS_MAP","entityHQ","entityTower","Presentation","entities","leftGoals","rightGoals","effects","formations","angle","build","spawnUnit","add","effect","deployAllFormations","u","removeFromParent","leftHQ","rightHQ","entity","res","goals","g","r","deployFormation","klass","getOffsetX","getOffsetY","TopBar","goldText","TEXT_ALIGNMENT_LEFT","timeText","NotifyLayer","SocketClient","_socket","_messagesQueue","_pendingQueue","_pendingBuffer","_query","_address","_isActive","flush","address","query","tryConnect","url","q","WebSocket","buildQuery","onopen","evt","sendBuffer","onmessage","onclose","reason","reasons","onerror","msg","shift","JSON","parse","buffer","WaitingLayer","_loadingProgress","_loadingDot","image","apiMiddleware","_httpRequest","_httpRequest2","store","apiHeader","Content-Type","X-Access-Token","method","header","timeout","status","responseText","ignoreError","code","what","say","discard","nextMiddleware","nextAction","storageMiddleware","PREFIX","sys","localStorage","setItem","val","getItem","httpRequest","xhr","loader","getXMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","ontimeout","j","$JSON","stringify","assign","$Object","desc","setImmediate","toIObject","toLength","toAbsoluteIndex","IS_INCLUDES","$this","el","fromIndex","createDesc","documentElement","args","un","getKeys","gOPS","pIE","toObject","$assign","A","Symbol","K","join","T","aLen","getSymbols","isEnum","getOwnPropertySymbols","has","arrayIndexOf","IE_PROTO","names","fails","KEY","exp","bitmap","shared","uid","defer","channel","port","invoke","html","cel","process","setTask","clearTask","clearImmediate","MessageChannel","Dispatch","counter","queue","run","nextTick","now","port2","port1","postMessage","importScripts","appendChild","removeChild","set","toInteger","valueOf","px","$task","eval"],"mappings":"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ACJC,GAAI,MAERC,QACIF,GAAI,SACJC,GAAI,OAERE,KACIH,GAAI,MACJC,GAAI,MAERG,IACIJ,GAAI,KACJC,GAAI,SAERI,aACIL,GAAI,eACJC,GAAI,aAERK,QACIN,GAAI,SACJC,GAAI,YAERM,MACIP,GAAI,OACJC,GAAI,aAERO,OACIR,GAAI,QACJC,GAAI,cAERQ,QACIT,GAAI,SACJC,GAAI,aAERS,QACIV,GAAI,SACJC,GAAI,SAERU,OACIX,GAAI,QACJC,GAAI,SAERW,SACIZ,GAAI,UACJC,GAAI,eAERY,OACIb,GAAI,QACJC,GAAI,UAERa,SACId,GAAI,UACJC,GAAI,WAERc,KACIf,GAAI,MACJC,GAAI,QAERe,YACIhB,GAAI,cACJC,GAAI,gBAERgB,WACIjB,GAAI,cACJC,GAAI,mBAERiB,qBACIlB,GAAI,aACJC,GAAI,cAERkB,KACInB,GAAI,MACJC,GAAI,OAERmB,WACIpB,GAAI,YACJC,GAAI,QAERoB,WACIrB,GAAI,YACJC,GAAI,SAERqB,QACItB,GAAI,SACJC,GAAI,YAERsB,gBACIvB,GAAI,kBACJC,GAAI,iBAERuB,eACIxB,GAAI,kBACJC,GAAI,uBAERwB,qBACIzB,GAAI,iBACJC,GAAI,kBAERyB,YACI1B,GAAI,aACJC,GAAI,kBAER0B,gBACI3B,GAAI,UACJC,GAAI,aAER2B,qBACI5B,GAAI,eACJC,GAAI,aAER4B,OACI7B,GAAI,QACJC,GAAI,QAER6B,OACI9B,GAAI,QACJC,GAAI,YAER8B,WACI/B,GAAI,WACJC,GAAI,QAER+B,sBACIhC,GAAI,UACJC,GAAI,aAERgC,SACIjC,GAAI,UACJC,GAAI,UAERiC,sBACIlC,GAAI,UACJC,GAAI,UAERkC,gBACInC,GAAI,UACJC,GAAI,aAERmC,MACIpC,GAAI,OACJC,GAAI,QAERoC,SACIrC,GAAI,UACJC,GAAI,YA0BZxY,GAAOD,SACHgB,MACA+W,UACAE,cACAG,cACAD,iBV8+BE,SAAUlY,EAAQD,EAASH,GAEjC,YAuBA,SAAS6O,GAAuB/M,GAAO,MAAOA,IAAOA,EAAIT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","file":"_dist/bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 46);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _pokemons = __webpack_require__(64);\n\nvar _pokemons2 = _interopRequireDefault(_pokemons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SCREEN_SIZE = cc.winSize;\nvar SCREEN_CENTER = cc.p(SCREEN_SIZE.width / 2, SCREEN_SIZE.height / 2);\n\nvar BATTLE_HEIGHT = 1408;\nvar ACTION_BAR_HEIGHT = 100;\nvar ACTION_BAR_WIDTH = SCREEN_SIZE.width * 0.5;\nvar ACTION_BUTTON_SIZE = 64;\n\nvar ACTION_FIELD_WIDTH = 640;\nvar ACTION_FIELD_HEIGHT = 320;\n\nvar TOP_BAR_WIDTH = SCREEN_SIZE.width;\nvar TOP_BAR_HEIGHT = 80;\n\nvar BATTLE_SCALE = SCREEN_SIZE.height / BATTLE_HEIGHT;\nvar BATTLE_POSITION = cc.p(0, 0);\n\nvar ARENA_WIDTH = 576;\nvar ARENA_HEIGHT = 1024;\nvar ARENA_CELL_WIDTH = 32;\nvar ARENA_CELL_HEIGHT = 32;\nvar BIG_DISTANCE = 2 * ARENA_WIDTH * ARENA_HEIGHT;\n\nvar MAX_CARDS_PER_ROUND = 4;\nvar TURN_PADDING = 4;\n\nvar UNIT_STATE_IDLE = 0;\nvar UNIT_STATE_WALK = 1;\nvar UNIT_STATE_ATTACK = 2;\nvar UNIT_STATE_DYING = 3;\n\nvar ANIMATION_FPS = 30;\n\nvar ACTION_BUTTON_WIDTH = 120;\nvar ACTION_BUTTON_HEIGHT = 160;\nvar ACTION_BUTTON_GAP = 30;\n\nvar UNIT_DATA = {\n    hq: {\n        hp: 6000,\n        attack: 80,\n        defense: 0,\n        Size: 100,\n        Range: 700,\n        Sight: 700,\n        Cool: 880,\n        Speed: 0,\n        Cost: 0,\n        Klass: \"entityHQ\",\n        animation: {\n            idle: { name: \"hq_idle\", count: 1, loop: true },\n            attack: { name: \"hq_attack\", count: 1, loop: false },\n            die: { name: \"hq_die\", count: 1, loop: false }\n        },\n        armor: 'heavy'\n    },\n    tower: {\n        hp: 4000,\n        attack: 20,\n        defense: 0,\n        Size: 100,\n        Range: 700,\n        Sight: 700,\n        Cool: 220,\n        Speed: 0,\n        Cost: 0,\n        Klass: \"entityTower\",\n        animation: {\n            idle: { name: \"tower_idle\", count: 1, loop: true },\n            attack: { name: \"tower_attack\", count: 1, loop: false },\n            die: { name: \"tower_die\", count: 15, loop: false }\n        },\n        armor: 'heavy'\n    }\n};\n\nmodule.exports = {\n    SCREEN_SIZE: SCREEN_SIZE,\n\n    BATTLE_HEIGHT: BATTLE_HEIGHT,\n\n    TOP_BAR_WIDTH: TOP_BAR_WIDTH,\n    TOP_BAR_HEIGHT: TOP_BAR_HEIGHT,\n\n    ACTION_FIELD_WIDTH: ACTION_FIELD_WIDTH,\n    ACTION_FIELD_HEIGHT: ACTION_FIELD_HEIGHT,\n\n    ACTION_BAR_WIDTH: ACTION_BAR_WIDTH,\n    ACTION_BUTTON_SIZE: ACTION_BUTTON_SIZE,\n    ACTION_BAR_HEIGHT: ACTION_BAR_HEIGHT,\n\n    ACTION_BUTTON_WIDTH: ACTION_BUTTON_WIDTH,\n    ACTION_BUTTON_HEIGHT: ACTION_BUTTON_HEIGHT,\n    ACTION_BUTTON_GAP: ACTION_BUTTON_GAP,\n\n    SCREEN_CENTER: SCREEN_CENTER,\n    BATTLE_SCALE: BATTLE_SCALE,\n    BATTLE_POSITION: BATTLE_POSITION,\n\n    ARENA_WIDTH: ARENA_WIDTH,\n    ARENA_HEIGHT: ARENA_HEIGHT,\n    ARENA_CELL_WIDTH: ARENA_CELL_WIDTH,\n    ARENA_CELL_HEIGHT: ARENA_CELL_HEIGHT,\n    BIG_DISTANCE: BIG_DISTANCE,\n\n    MAX_CARDS_PER_ROUND: MAX_CARDS_PER_ROUND,\n    TURN_PADDING: TURN_PADDING,\n\n    POKEMONS: _pokemons2.default,\n    UNIT_DATA: UNIT_DATA,\n    ANIMATION_FPS: ANIMATION_FPS,\n\n    UNIT_STATE_IDLE: UNIT_STATE_IDLE,\n    UNIT_STATE_WALK: UNIT_STATE_WALK,\n    UNIT_STATE_ATTACK: UNIT_STATE_ATTACK,\n    UNIT_STATE_DYING: UNIT_STATE_DYING\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Camera = function Camera() {\n    this.translate = cc.p(0, 0);\n    this.rotate = 0;\n};\n\nCamera.prototype.setRotate = function (value) {\n    this.rotate = value;\n};\n\nCamera.prototype.setTranslate = function (value) {\n    this.translate = value;\n};\n\nmodule.exports = new Camera();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = {\n    LEFT_TOP: 0,\n    LEFT_MIDDLE: 1,\n    LEFT_BOTTOM: 2,\n    CENTER_TOP: 4,\n    CENTER: 5,\n    CENTER_BOTTOM: 6,\n    RIGHT_TOP: 8,\n    RIGHT_MIDDLE: 9,\n    RIGHT_BOTTOM: 10,\n\n    RESIZE_STRETCH: 0,\n    RESIZE_COVER: 1,\n    RESIZE_CONTAIN: 2,\n\n    makeNode: function makeNode(root, opts) {\n        var node = new cc.Node();\n        node.setPosition(opts.position || cc.p(0, 0));\n        node.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        node.setContentSize(opts.contentSize || cc.size(0, 0));\n        root.addChild(node, opts.zOrder || 0);\n        return node;\n    },\n\n    makeImageView: function makeImageView(root, opts) {\n        var rootSize = root.getContentSize();\n        var center = cc.p(rootSize.width / 2, rootSize.height / 2);\n\n        var img = new ccui.ImageView(opts.sprite, ccui.Widget.PLIST_TEXTURE);\n\n        var baseSize = rootSize;\n        if (opts.scale9Size) {\n            img.ignoreContentAdaptWithSize(false);\n            img.setScale9Enabled(true);\n            img.setContentSize(opts.scale9Size);\n            baseSize = opts.scale9Size;\n        } else if (opts.contentSize) {\n            img.setContentSize(opts.contentSize);\n            baseSize = opts.contentSize;\n        } else if (opts.scale) {\n            img.setScale(opts.scale);\n        }\n\n        if (opts.scaleX) {\n            img.setScaleX(opts.scaleX);\n        }\n\n        if (opts.scaleY) {\n            img.setScaleY(opts.scaleY);\n        }\n\n        img.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n\n        var imgSize = img.getContentSize();\n\n        switch (opts.resizeMode) {\n            case this.RESIZE_STRETCH:\n                img.setScale(baseSize.width / imgSize.width, baseSize.height / imgSize.height);\n                break;\n\n            case this.RESIZE_COVER:\n                img.setScale(Math.max(baseSize.width / imgSize.width, baseSize.height / imgSize.height));\n                break;\n\n            case this.RESIZE_CONTAIN:\n                img.setScale(Math.min(baseSize.width / imgSize.width, baseSize.height / imgSize.height));\n                break;\n        }\n\n        img.setPosition(opts.position || center);\n\n        root.addChild(img, opts.zOrder || 0);\n        return img;\n    },\n\n    makeSprite: function makeSprite(root, opts) {\n        var img = new cc.Sprite(\"#\" + opts.sprite);\n\n        if (opts.size) {\n            var contentSize = img.getContentSize();\n            img.setScale(opts.size.width / contentSize.width, opts.size.height / contentSize.height);\n        } else {\n            img.setScale(opts.scale || 1);\n        }\n\n        img.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        img.setPosition(opts.position || cc.p(0, 0));\n        root.addChild(img, opts.zOrder || 0);\n        return img;\n    },\n\n    makeText: function makeText(root, opts) {\n        var txt = new ccui.Text(opts.text, opts.font, opts.fontSize);\n        txt.setScale(opts.scale || 1);\n        txt.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        txt.setPosition(opts.position || cc.p(0, 0));\n        txt.setTextHorizontalAlignment(opts.horzAlign || cc.TEXT_ALIGNMENT_CENTER);\n        txt.setTextVerticalAlignment(opts.vertAlign || cc.VERTICAL_TEXT_ALIGNMENT_CENTER);\n        txt.setTextColor(opts.color || cc.color(255, 255, 255, 255));\n\n        if (opts.ignoreContentAdaptWithSize != null) {\n            txt.ignoreContentAdaptWithSize(opts.ignoreContentAdaptWithSize);\n        }\n\n        if (opts.size) {\n            txt.setSize(opts.size);\n        }\n\n        if (opts.shadow) {\n            txt.enableShadow(opts.shadowColor || cc.color(0, 0, 0, 255), opts.shadowOffset || cc.size(2, -2), 0);\n        }\n\n        if (opts.outline) {\n            txt.enableOutline(opts.outlineColor || cc.color(0, 0, 0, 255), opts.outlineSize || 1);\n        }\n\n        if (opts.glow) {\n            txt.enableOutline(opts.glowColor || cc.color(255, 255, 255, 255));\n        }\n\n        root.addChild(txt, opts.zOrder || 0);\n        return txt;\n    },\n\n    makeButton: function makeButton(root, opts) {\n        var btn = new ccui.Button();\n        btn.loadTextures(opts.normal || \"\", opts.pressed || \"\", opts.disabled || \"\", ccui.Widget.PLIST_TEXTURE);\n        btn.setScale(opts.scale || 1);\n        btn.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        btn.setPosition(opts.position || cc.p(0, 0));\n\n        if (opts.listener) {\n            btn.addTouchEventListener(opts.listener, opts.listenerTarget);\n        }\n\n        root.addChild(btn, opts.zOrder || 0);\n        return btn;\n    },\n\n    makeSlider: function makeSlider(root, opts) {\n        opts = (0, _assign2.default)({\n            barTexture: \"\",\n            buttonTexture: \"\",\n            buttonTextureClicked: \"\",\n            progressBarTexture: \"\",\n            touchEnable: true,\n            anchorPoint: cc.p(0.5, 0.5),\n            position: cc.p(0, 0),\n            scale: 1.0,\n            onChange: function onChange() {},\n            onEvent: function onEvent() {}\n        }, opts);\n        var slider = new ccui.Slider();\n        slider.setTouchEnabled(true);\n        slider.setScale(opts.scale);\n        slider.setAnchorPoint(opts.anchorPoint);\n        slider.setPosition(opts.position);\n        slider.loadBarTexture(getResourceAlias(opts.barTexture));\n        slider.loadSlidBallTextures(getResourceAlias(opts.buttonTexture), getResourceAlias(opts.buttonTextureClicked), \"\");\n        slider.loadProgressBarTexture(getResourceAlias(opts.progressBarTexture));\n        slider.addEventListener(function (sender, type) {\n            switch (type) {\n                case ccui.Slider.EVENT_PERCENT_CHANGED:\n                    opts.onChange(sender.getPercent().toFixed(0));\n                    break;\n            }\n            opts.onEvent(sender, type);\n        });\n        root.addChild(slider);\n        return slider;\n    },\n\n    makeMaskedSprite: function makeMaskedSprite(root, opts) {\n        var spr = new cc.Sprite(\"#\" + opts.sprite);\n        spr.setScale(opts.scale || 1);\n        var maskNode = cc.Sprite.create(\"#\" + opts.mask);\n        maskNode.setScale(opts.scale || 1);\n        var clipping = cc.ClippingNode.create(maskNode);\n        clipping.setAlphaThreshold(0.5);\n        clipping.addChild(spr, 0);\n\n        clipping.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        clipping.setPosition(opts.position || cc.p(0, 0));\n        root.addChild(clipping, opts.zOrder || 0);\n        return spr;\n    },\n\n    makeListView: function makeListView(root, opts) {\n        var listView = ccui.ListView.create();\n        listView.setDirection(opts.direction || ccui.ScrollView.DIR_VERTICAL);\n        listView.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        listView.setPosition(opts.position || cc.p(0, 0));\n        listView.setBounceEnabled(true);\n        listView.setContentSize(opts.contentSize || cc.size(0, 0));\n        listView.setClippingType(opts.clippingType || ccui.Layout.CLIPPING_SCISSOR);\n        listView.setClippingEnabled(true);\n        root.addChild(listView, opts.zOrder || 0);\n        return listView;\n    },\n\n    makeProgressBar: function makeProgressBar(root, opts) {\n        var bar = ccui.LoadingBar.create();\n        bar.loadTexture(opts.sprite, ccui.Widget.PLIST_TEXTURE);\n\n        if (opts.scale) {\n            bar.setScale(opts.scale);\n        }\n\n        if (opts.scaleX) {\n            bar.setScaleX(opts.scaleX);\n        }\n\n        if (opts.scaleY) {\n            bar.setScaleY(opts.scaleY);\n        }\n\n        bar.setPosition(opts.position || cc.p(0, 0));\n        bar.setPercent(opts.percent || 0);\n        root.addChild(bar, opts.zOrder || 0);\n        return bar;\n    },\n\n    relativeTo: function relativeTo(root, relative, x, y) {\n        var relativeHorz = relative >> 2 & 3;\n        var relativeVert = relative & 3;\n\n        var rootContentSize = root.getContentSize();\n\n        switch (relativeHorz) {\n            case 1:\n                x = rootContentSize.width / 2 + x;\n                break;\n            case 2:\n                x = rootContentSize.width - x;\n                break;\n        }\n\n        switch (relativeVert) {\n            case 0:\n                y = rootContentSize.height - y;\n                break;\n            case 1:\n                y = rootContentSize.height / 2 + y;\n                break;\n        }\n\n        return cc.p(x, y);\n    }\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function approxDistance(dx, dy) {\n    var min, max, approx;\n\n    if (dx < 0) dx = -dx;\n    if (dy < 0) dy = -dy;\n\n    if (dx < dy) {\n        min = dx;\n        max = dy;\n    } else {\n        min = dy;\n        max = dx;\n    }\n\n    approx = max * 1007 + min * 441;\n    if (max < min << 4) approx -= max * 40;\n\n    // add 512 for proper rounding\n    return (approx + 512) / 1024;\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getStoreState = exports.disconnectStore = exports.connectStore = exports.storeDispatch = exports.createStore = undefined;\n\nvar _setImmediate2 = __webpack_require__(29);\n\nvar _setImmediate3 = _interopRequireDefault(_setImmediate2);\n\nvar _defineProperty2 = __webpack_require__(16);\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _keys = __webpack_require__(70);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = __webpack_require__(14);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(15);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _api = __webpack_require__(65);\n\nvar _api2 = _interopRequireDefault(_api);\n\nvar _storage = __webpack_require__(67);\n\nvar _storage2 = _interopRequireDefault(_storage);\n\nvar _next = __webpack_require__(66);\n\nvar _next2 = _interopRequireDefault(_next);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar middlewares = [_api2.default, _storage2.default, _next2.default];\n\nvar Store = function () {\n    function Store(reducers) {\n        (0, _classCallCheck3.default)(this, Store);\n        this.state = {};\n        this._reducers = {};\n        this._connectedScenes = [];\n\n        this._reducers = reducers;\n        this.clear();\n    }\n\n    (0, _createClass3.default)(Store, [{\n        key: 'getState',\n        value: function getState() {\n            return this.state;\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            var _this = this;\n\n            this.state = (0, _keys2.default)(this._reducers).reduce(function (prev, curr) {\n                return (0, _assign2.default)(prev, (0, _defineProperty3.default)({}, curr, _this._reducers[curr]()));\n            }, {});\n        }\n    }, {\n        key: 'restoreState',\n        value: function restoreState() {\n            var storedStates = (0, _storage.loadState)((0, _keys2.default)(this.state));\n            for (var k in storedStates) {\n                this.state[k] = (0, _assign2.default)({}, this.state[k], storedStates[k]);\n            }\n        }\n    }, {\n        key: 'dispatch',\n        value: function dispatch(action) {\n            var _this2 = this;\n\n            (0, _setImmediate3.default)(function () {\n                if (typeof action === \"function\") {\n                    _this2.runDispatch(action(_this2.getState()), middlewares.slice(0));\n                } else {\n                    _this2.runDispatch(action, middlewares.slice(0));\n                }\n            });\n        }\n    }, {\n        key: 'runDispatch',\n        value: function runDispatch(action, chain) {\n            var _this3 = this;\n\n            var that = this;\n            var reducers = this._reducers;\n\n            if (chain.length == 0) {\n                (0, _setImmediate3.default)(function () {\n                    var state = _this3.state = (0, _keys2.default)(reducers).reduce(function (prev, curr) {\n                        return (0, _assign2.default)(prev, (0, _defineProperty3.default)({}, curr, reducers[curr](_this3.state[curr], action)));\n                    }, {});\n                    var connectedScenes = _this3._connectedScenes;\n\n                    action.callback && action.callback(action, state);\n                    (0, _setImmediate3.default)(function () {\n                        connectedScenes.forEach(function (scene) {\n                            return scene.onStoreChange(state);\n                        });\n                    });\n                });\n            } else {\n                chain[0](this, action,\n                // next \n                function (action) {\n                    chain.splice(0, 1);\n                    that.runDispatch(action, chain);\n                });\n            }\n        }\n    }, {\n        key: 'discard',\n        value: function discard(action) {\n            action.callback && action.callback(action, this.state);\n        }\n    }]);\n    return Store;\n}();\n\n;\n\nvar _store = void 0;\n\nvar createStore = exports.createStore = function createStore(reducers) {\n    _store = new Store(reducers);\n    return _store;\n};\n\nvar storeDispatch = exports.storeDispatch = function storeDispatch(action) {\n    return _store && _store.dispatch(action);\n};\n\nvar connectStore = exports.connectStore = function connectStore(scene) {\n    if (scene && scene.onStoreChange) {\n        _store._connectedScenes.push(scene);\n    }\n};\n\nvar disconnectStore = exports.disconnectStore = function disconnectStore(scene) {\n    var idx = _store._connectedScenes.findIndex(function (scn) {\n        return scn == scene;\n    });\n    if (idx >= 0) {\n        _store._connectedScenes.splice(idx, 1);\n    }\n};\n\nvar getStoreState = exports.getStoreState = function getStoreState() {\n    return _store && _store.getState();\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(72), __esModule: true };\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.5.1' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ANIMATION_CACHE = {};\n\nvar EntityBase = cc.Node.extend({\n    ctor: function ctor(team, presentation) {\n        this._super();\n\n        this.logic = {\n            HP: 0,\n            x: 0,\n            y: 0,\n            z: 0,\n            cool: 0\n        };\n\n        this.zShift = 0;\n        this.attr = {};\n        this.facing = 0;\n\n        this.team = team;\n        this.presentation = presentation;\n\n        this.state = _defs2.default.UNIT_STATE_IDLE;\n        this.stateData = {\n            target: null,\n            time: 0\n        };\n\n        this._departurePosition = cc.p(0, 0);\n        this._futurePosition = cc.p(0, 0);\n\n        this.sprite = new cc.Sprite();\n        this.addChild(this.sprite);\n\n        this.setFacing(this.team === 0 ? 1 : -1);\n    },\n\n    isAlive: function isAlive() {\n        return this.logic.HP > 0;\n    },\n\n    isWounded: function isWounded() {\n        return this.logic.HP < this.attr.hp;\n    },\n\n    isActive: function isActive() {\n        return this.logic.HP > 0 || this.stateData.time < 2000;\n    },\n\n    damage: function damage(attack) {\n        var amount = Math.max(attack - this.getDefense(), 1);\n        this.logic.HP -= amount;\n    },\n\n    heal: function heal(attack) {\n        this.logic.HP += attack;\n        if (this.logic.HP > this.attr.hp) {\n            this.logic.HP = this.attr.hp;\n        }\n    },\n\n    setUnitData: function setUnitData(data) {\n        this.logic.HP = data.hp;\n        this.attr = data;\n\n        this.animAction = {};\n\n        var name = (data.name || \"\").toLowerCase();\n        var animation = data.animation || {\n            idle: { name: name, count: 1, loop: true },\n            attack: { name: name, count: 1, loop: false },\n            die: { name: name, count: 1, loop: false },\n            walk: { name: name, count: 1, loop: false }\n        };\n\n        for (var k in animation) {\n            this.animAction[k] = this.createAnimAction(animation[k], data.animation == null);\n        }\n    },\n\n    setFacing: function setFacing(value) {\n        this.facing = value;\n\n        var camRot = _camera2.default.rotate;\n        if (value < 0) {\n            if (camRot === 0) {\n                this.setScaleX(1);\n            } else {\n                this.setScaleX(1);\n                this.setScaleY(-1);\n            }\n        } else {\n            if (camRot === 0) {\n                this.setScaleX(-1);\n            } else {\n                this.setScaleX(-1);\n                this.setScaleY(-1);\n            }\n        }\n    },\n\n    setLocation: function setLocation(x, y) {\n        this.logic.x = x;\n        this.logic.y = y;\n\n        this.syncPosition();\n    },\n\n    convertPosition: function convertPosition(x, y) {\n        return cc.p(x * _defs2.default.ARENA_CELL_WIDTH / 100, y * _defs2.default.ARENA_CELL_HEIGHT / 100);\n    },\n\n    convertZ: function convertZ(z) {\n        return z * _defs2.default.ARENA_CELL_HEIGHT / 100;\n    },\n\n    update: function update(dt) {},\n\n    step: function step(dt) {\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        return true;\n    },\n\n    canAttack: function canAttack(target) {\n        // TODO: air-borne ?\n        return true;\n    },\n\n    canSee: function canSee(target) {\n        return this.getDistanceTo(target) < this.getSight();\n    },\n\n    getDistanceToPos: function getDistanceToPos(x, y) {\n        var dx = x - this.logic.x;\n        var dy = y - this.logic.y;\n        return (0, _approxDistance2.default)(dx, dy);\n    },\n\n    getDistanceTo: function getDistanceTo(target) {\n        var dx = target.logic.x - this.logic.x;\n        var dy = target.logic.y - this.logic.y;\n        return (0, _approxDistance2.default)(dx, dy);\n    },\n\n    animatePosition: function animatePosition() {\n        var t = this.presentation.timeFrameCounter / this.presentation.stepTime;\n        var pos = cc.p(cc.lerp(this._departurePosition.x, this._futurePosition.x, t), cc.lerp(this._departurePosition.y, this._futurePosition.y, t));\n        this.setLocalZOrder(_camera2.default.rotate === 0 ? _defs2.default.ARENA_HEIGHT - pos.y + this.zShift : pos.y + this.zShift);\n\n        pos.y += (_camera2.default.rotate === 0 ? 1 : -1) * this.convertZ(this.logic.z);\n        this.setPosition(pos);\n    },\n\n    syncPosition: function syncPosition() {\n        var pos = this.convertPosition(this.logic.x, this.logic.y);\n        this.setLocalZOrder(_camera2.default.rotate === 0 ? _defs2.default.ARENA_HEIGHT - pos.y + this.zShift : pos.y + this.zShift);\n\n        pos.y += (_camera2.default.rotate === 0 ? 1 : -1) * this.convertZ(this.logic.z);\n        this.setPosition(pos);\n    },\n\n    stepLiveliness: function stepLiveliness(dt) {\n        if (this.state === _defs2.default.UNIT_STATE_DYING) {\n            this.stateData.time += dt;\n            if (this.stateData.time >= 2000) {\n                return false;\n            }\n        } else if (!this.isAlive()) {\n            this.state = _defs2.default.UNIT_STATE_DYING;\n            this.stateData.time = 0;\n\n            this._departurePosition = this._futurePosition;\n\n            this.currentAction = this.intentAction = this.animAction.die;\n\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n\n        return true;\n    },\n\n    createAnimAction: function createAnimAction(data, isSingleFrame) {\n        var animationName = data.name;\n        var framesCount = data.count;\n        var animation = ANIMATION_CACHE[animationName];\n\n        if (!animation) {\n            var animFrames = [];\n            var i = 0;\n            var frame;\n            for (i = 0; i < framesCount; ++i) {\n                if (isSingleFrame) {\n                    frame = cc.spriteFrameCache.getSpriteFrame(animationName + \".png\");\n                } else {\n                    frame = cc.spriteFrameCache.getSpriteFrame(animationName + \"_\" + i + \".png\");\n                }\n\n                if (frame) {\n                    animFrames.push(frame);\n                }\n            }\n\n            animation = new cc.Animation(animFrames, 1.0 / _defs2.default.ANIMATION_FPS);\n            ANIMATION_CACHE[animationName] = animation;\n        }\n\n        if (data.loop) {\n            return new cc.RepeatForever(new cc.Animate(animation));\n        }\n\n        return new cc.Animate(animation);\n    },\n\n    getSize: function getSize() {\n        return this.attr.Size || 32;\n    },\n\n    getAttack: function getAttack() {\n        return this.attr.attack;\n    },\n\n    getAttackFor: function getAttackFor(targetAttr) {\n        var armor = targetAttr.armor || 'none';\n        var baseAttack = this.getAttack();\n\n        if (armor === 'heavy') {\n            var heavyAttack = this.attr.attackHeavy || 0;\n            return baseAttack + heavyAttack;\n        }\n\n        if (armor === 'light') {\n            var lightAttack = this.attr.attackLight || 0;\n            return baseAttack + lightAttack;\n        }\n\n        return baseAttack;\n    },\n\n    getDefense: function getDefense() {\n        return this.attr.defense;\n    },\n\n    getRange: function getRange() {\n        return this.attr.Range || 500;\n    },\n\n    getSight: function getSight() {\n        return this.attr.Sight || 1000;\n    },\n\n    getAttackCool: function getAttackCool() {\n        return this.attr.Cool || 1000;\n    },\n\n    getMoveSpeed: function getMoveSpeed() {\n        return this.attr.Speed || 300;\n    },\n\n    isOfflane: function isOfflane() {\n        if (this.team === 0) {\n            return this.logic.y > _defs2.default.BATTLE_HEIGHT * (2 * _defs2.default.ARENA_CELL_HEIGHT) / 100;\n        }\n\n        return this.logic.y < _defs2.default.BATTLE_HEIGHT * (2 * _defs2.default.ARENA_CELL_HEIGHT) / 100;\n    }\n});\n\nmodule.exports = EntityBase;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _texts = {\n    ok: {\n        en: 'ok',\n        vn: 'ok'\n    },\n    cancel: {\n        en: 'cancel',\n        vn: 'hủy'\n    },\n    yes: {\n        en: 'yes',\n        vn: 'có'\n    },\n    no: {\n        en: 'no',\n        vn: 'không'\n    },\n    instantPlay: {\n        en: 'instant play',\n        vn: 'chơi ngay'\n    },\n    option: {\n        en: 'option',\n        vn: 'tùy chọn'\n    },\n    help: {\n        en: 'help',\n        vn: 'hướng dẫn'\n    },\n    about: {\n        en: 'about',\n        vn: 'giới thiệu'\n    },\n    logout: {\n        en: 'logout',\n        vn: 'đăng xuất'\n    },\n    battle: {\n        en: 'battle',\n        vn: 'chiến'\n    },\n    train: {\n        en: 'train',\n        vn: 'luyện'\n    },\n    collect: {\n        en: 'collect',\n        vn: 'nhận thưởng'\n    },\n    level: {\n        en: 'level',\n        vn: 'cấp độ'\n    },\n    jackpot: {\n        en: 'jackpot',\n        vn: 'jackpot'\n    },\n    bet: {\n        en: 'bet',\n        vn: 'cược'\n    },\n    pleaseWait: {\n        en: 'please wait',\n        vn: 'vui lòng chờ'\n    },\n    noMoreBet: {\n        en: 'no more bet',\n        vn: 'không nhận cược'\n    },\n    blackjack_insurance: {\n        en: 'insurance?',\n        vn: 'insurance?'\n    },\n    pot: {\n        en: 'pot',\n        vn: 'pot'\n    },\n    total_bet: {\n        en: 'total bet',\n        vn: 'cược'\n    },\n    total_win: {\n        en: 'total win',\n        vn: 'thắng'\n    },\n    buy_in: {\n        en: 'buy in',\n        vn: 'tiền túi'\n    },\n    notEnoughMoney: {\n        en: 'not enough cash',\n        vn: 'không đủ tiền'\n    },\n    maxBetAlready: {\n        en: 'max bet already',\n        vn: 'không thể cược thêm'\n    },\n    inviteFriendMessage: {\n        en: 'play this game',\n        vn: 'play this game'\n    },\n    game_guide: {\n        en: 'game guide',\n        vn: 'hướng dẫn chơi'\n    },\n    option_setting: {\n        en: 'setting',\n        vn: 'tùy chỉnh'\n    },\n    option_notification: {\n        en: 'notification',\n        vn: 'thông báo'\n    },\n    music: {\n        en: 'music',\n        vn: 'nhạc'\n    },\n    sound: {\n        en: 'sound',\n        vn: 'âm thanh'\n    },\n    vibration: {\n        en: 'viration',\n        vn: 'rung'\n    },\n    general_notification: {\n        en: 'general',\n        vn: 'trung tâm'\n    },\n    friends: {\n        en: 'friends',\n        vn: 'bạn bè'\n    },\n    friends_notification: {\n        en: 'friends',\n        vn: 'bạn bè'\n    },\n    option_account: {\n        en: 'account',\n        vn: 'tài khoản'\n    },\n    spin: {\n        en: 'spin',\n        vn: 'quay'\n    },\n    ranking: {\n        en: 'ranking',\n        vn: 'xếp hạng'\n    }\n};\n\nfunction get(key) {\n    return _texts[key][currentLanguage];\n}\n\nfunction getCaps(key) {\n    return _texts[key][currentLanguage].toUpperCase();\n}\n\nfunction getCapFirst(key) {\n    var txt = _texts[key][currentLanguage];\n    return txt.charAt(0).toUpperCase() + txt.slice(1);\n}\n\nfunction getCapsColon(key) {\n    return _texts[key][currentLanguage].toUpperCase() + ':';\n}\n\nfunction shortenText(text, maxLength) {\n    text = text || '';\n    return text.length <= maxLength ? text : text.substring(0, maxLength) + '...';\n}\n\nmodule.exports = {\n    get: get,\n    getCaps: getCaps,\n    getCapFirst: getCapFirst,\n    shortenText: shortenText,\n    getCapsColon: getCapsColon\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _entityEffectHit = __webpack_require__(25);\n\nvar _entityEffectHit2 = _interopRequireDefault(_entityEffectHit);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityMeleeFighter = _entityBase2.default.extend({\n    setUnitData: function setUnitData(data) {\n        this._super(data);\n        this.currentAction = this.animAction.idle;\n        this.sprite.runAction(this.currentAction);\n    },\n\n\n    update: function update(dt) {\n        this._super(dt);\n\n        this.animatePosition();\n    },\n\n    step: function step(dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === _defs2.default.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForEnemy();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = (0, _approxDistance2.default)(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = _defs2.default.UNIT_STATE_ATTACK;\n                }\n            } else {\n                if (this.isOfflane()) {\n                    this.state = _defs2.default.UNIT_STATE_IDLE;\n                } else {\n                    var v = dt * this.getMoveSpeed() / 1000;\n                    if (this.team === 0) {\n                        this.logic.y += v;\n                    } else {\n                        this.logic.y -= v;\n                    }\n                }\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = _defs2.default.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n                    }\n                }\n            } else {\n                this.state = _defs2.default.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    createEffect: function createEffect(target) {\n        var hit = new _entityEffectHit2.default(this.team, this.presentation, this, target);\n        this.presentation.addEffect(hit);\n    },\n\n    lookForEnemy: function lookForEnemy() {\n        var enemy = this.presentation.findEnemy(this);\n        if (enemy) {\n            this.stateData.target = enemy;\n        }\n    },\n\n    updateIdle: function updateIdle() {\n        var enemy = this.presentation.findEnemy(this);\n        if (enemy) {\n            this.state = _defs2.default.UNIT_STATE_WALK;\n            this.stateData.target = enemy;\n        } else {\n            if (this.isOfflane()) {\n                var goal = this.presentation.findGoal(this);\n                if (goal) {\n                    this.state = _defs2.default.UNIT_STATE_WALK;\n                    this.stateData.target = goal;\n                }\n            } else {\n                this.state = _defs2.default.UNIT_STATE_WALK;\n                this.stateData.target = null;\n            }\n        }\n    }\n});\n\nmodule.exports = EntityMeleeFighter;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(71), __esModule: true };\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _store = __webpack_require__(4);\n\nvar _alertLayer = __webpack_require__(22);\n\nvar _alertLayer2 = _interopRequireDefault(_alertLayer);\n\nvar _waitingLayer = __webpack_require__(63);\n\nvar _waitingLayer2 = _interopRequireDefault(_waitingLayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BaseScene = cc.Scene.extend({\n    ctor: function ctor(opt) {\n        opt = opt || {\n            sprites: [],\n            persitSprites: [],\n            sounds: []\n        };\n        this._super();\n        this.state = {};\n        this._waitingLayer = null;\n        this._alertLayer = null;\n        this._loadingCount = 0;\n        this._sprites = opt.sprites || [];\n        this._persitSprites = opt.persitSprites || [];\n        this._sounds = opt.sounds || [];\n    },\n\n    onEnter: function onEnter() {\n        this._super();\n        (0, _store.connectStore)(this);\n        this.loadResource();\n        this.loadSound();\n    },\n    checkReady: function checkReady(isDone) {\n        if (this._loadingCount == 0) {\n            this.onLoading && this.onLoading();\n        }\n        this._loadingCount += isDone ? -1 : 1;\n        if (this._loadingCount == 0) {\n            this.onReady && this.onReady();\n        }\n    },\n    loadSound: function loadSound() {\n        var _this = this;\n\n        this.checkReady(false);\n        if (this._sounds.length) {\n            Sound.preload(this._sounds, function (_) {\n                _this.checkReady(true);\n            });\n        } else {\n            this.checkReady(true);\n        }\n    },\n    loadResource: function loadResource() {\n        var _this2 = this;\n\n        this.checkReady(false);\n        if (this._sprites.length || this._persitSprites.length) {\n            var sprites = [].concat(this._sprites, this._persitSprites);\n            loadResources(sprites, function () {\n                sprites.map(function (sprite) {\n                    addSpriteFramesFromResource(sprite);\n                });\n                _this2.checkReady(true);\n            });\n        } else {\n            this.checkReady(true);\n        }\n    },\n    unloadResource: function unloadResource() {\n        if (this._sprites.length) {\n            this._sprites.map(function (sprite) {\n                removeSpriteFramesFromResource(sprite);\n            });\n        }\n    },\n    onExit: function onExit() {\n        this._super();\n        (0, _store.disconnectStore)(this);\n        this.unloadResource();\n    },\n\n    onLoading: function onLoading() {\n        this.showWaiting(true);\n    },\n\n    onReady: function onReady() {\n        this.showWaiting(false);\n    },\n\n    setState: function setState(state, cb) {\n        var newState = (0, _assign2.default)({}, this.state, state);\n        this.onNextState && this.onNextState(newState);\n        this.state = newState;\n        this.onStateChange && this.onStateChange(this.state);\n        cb && cb();\n    },\n\n    showWaiting: function showWaiting(visible) {\n        if (visible && !this._waitingLayer) {\n            this._waitingLayer = new _waitingLayer2.default(cc.winSize);\n            this.addChild(this._waitingLayer, 9000);\n        }\n        this._waitingLayer && this._waitingLayer.setVisible(visible);\n    },\n\n    showError: function showError(error, onClick) {\n        if (!this._alertLayer) {\n            this._alertLayer = new _alertLayer2.default(cc.winSize);\n            this.addChild(this._alertLayer, 9900);\n        }\n        this._alertLayer.setError(error, onClick);\n        this._alertLayer.setVisible(true);\n    }\n});\n\nmodule.exports = BaseScene;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n    apiUrl: window.location.origin + \"/api\",\n    socketUrl: \"wss://\" + window.location.host,\n    //apiUrl: 'http://128.199.202.184/api',\n    //socketUrl: 'ws://128.199.202.184/socket',\n    localStorageName: \"gamejam.rts\"\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(28);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(28);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(19)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(11);\nvar core = __webpack_require__(6);\nvar ctx = __webpack_require__(31);\nvar hide = __webpack_require__(81);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.authenticate = exports.login = exports.LOGIN = undefined;\n\nvar _defineProperty2 = __webpack_require__(16);\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LOGIN = exports.LOGIN = \"LOGIN\";\n\nvar login = exports.login = function login(payload, callback) {\n    return {\n        type: LOGIN,\n        payload: payload,\n        callback: callback,\n        next: {\n            persist: [\"authenticate\"]\n        }\n    };\n};\n\nvar actionHandler = (0, _defineProperty3.default)({}, LOGIN, function (state, action) {\n    return (0, _assign2.default)(state, {\n        id: action.payload.id\n    });\n});\n\nvar initialState = {\n    accessToken: null\n};\n\nvar authenticate = exports.authenticate = function authenticate() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    var handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n};\n\nexports.default = authenticate;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityEffectBullet = _entityBase2.default.extend({\n    ctor: function ctor(team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 300;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = (0, _approxDistance2.default)(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.state = _defs2.default.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function update(dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function step(dt) {\n        this._super(dt);\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = (0, _approxDistance2.default)(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = (0, _approxDistance2.default)(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = _defs2.default.UNIT_STATE_ATTACK;\n                this.target.damage(this.owner.getAttackFor(this.target.attr));\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectBullet;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _stringify = __webpack_require__(10);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AlertLayer = ccui.Layout.extend({\n    ctor: function ctor() {\n        this._super();\n\n        cc.spriteFrameCache.addSpriteFrames('mainmenu.plist');\n\n        this._error = {};\n        this._onClick = null;\n\n        var size = cc.winSize;\n        var center = cc.p(size.width / 2, size.height / 2);\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n        this.setTouchEnabled(true);\n        this.setSwallowTouches(true);\n\n        var panel = _ui2.default.makeImageView(this, {\n            sprite: 'popup_frame.png',\n            scale9Size: cc.size(900, 520),\n            position: _ui2.default.relativeTo(this, _ui2.default.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this._text = _ui2.default.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(panel, _ui2.default.CENTER, 0, 40),\n            size: cc.size(800, 250),\n            ignoreContentAdaptWithSize: false\n        });\n\n        var button = _ui2.default.makeButton(panel, {\n            normal: \"button_blue.png\",\n            pressed: \"button_blue_pressed.png\",\n            anchorPoint: cc.p(0.5, 0),\n            position: _ui2.default.relativeTo(panel, _ui2.default.CENTER_BOTTOM, 0, 30),\n            listener: this.touchEvent,\n            listenerTarget: this\n        });\n\n        _ui2.default.makeText(button, {\n            text: _localize2.default.getCaps('ok'),\n            font: getBigFontName(),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(button, _ui2.default.CENTER, 0, 0)\n        });\n\n        return true;\n    },\n\n    setError: function setError(error, onClick) {\n        this._onClick = onClick;\n\n        this._error = error;\n        this._text.setString((0, _stringify2.default)(this._error));\n    },\n\n    touchEvent: function touchEvent(sender, type) {\n        if (type == ccui.Widget.TOUCH_ENDED) {\n            this.setVisible(false);\n            this._onClick && this._onClick();\n        }\n    }\n});\n\nexports.default = AlertLayer;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.room = exports.startBattle = exports.START_BATTLE = undefined;\n\nvar _defineProperty2 = __webpack_require__(16);\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar START_BATTLE = exports.START_BATTLE = \"START_BATTLE\";\n\nvar startBattle = exports.startBattle = function startBattle(payload, callback) {\n    return {\n        type: START_BATTLE,\n        api: {\n            endpoint: '/battle/start',\n            payload: payload\n        },\n        callback: callback\n    };\n};\n\nvar actionHandler = (0, _defineProperty3.default)({}, START_BATTLE, function (state, action) {\n    var result = action.response;\n    return (0, _assign2.default)(state, result);\n});\n\nvar initialState = {};\n\nvar room = exports.room = function room() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    var handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n};\n\nexports.default = room;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityEffectHit1 = _entityBase2.default.extend({\n    ctor: function ctor(team, presentation, owner, target) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 600;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = target.logic.x;\n        this.logic.y = target.logic.y;\n        this.logic.z = target.getSize();\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.animAction = this.createAnimAction({ name: \"hit1_idle\", count: 1, loop: false });\n        this.state = _defs2.default.UNIT_STATE_IDLE;\n    },\n\n    step: function step(dt) {\n        this._super(dt);\n\n        if (this.life <= 400 && this.state === _defs2.default.UNIT_STATE_IDLE) {\n            this.sprite.runAction(this.animAction);\n            this.state = _defs2.default.UNIT_STATE_ATTACK;\n\n            this.target.damage(this.owner.getAttack());\n        }\n\n        this.life -= dt;\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectHit1;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _entityEffectHit = __webpack_require__(25);\n\nvar _entityEffectHit2 = _interopRequireDefault(_entityEffectHit);\n\nvar _entityEffectBullet = __webpack_require__(21);\n\nvar _entityEffectBullet2 = _interopRequireDefault(_entityEffectBullet);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityTower = _entityBase2.default.extend({\n    setUnitData: function setUnitData(data) {\n        this._super(data);\n        this.sprite.runAction(this.animAction.idle);\n    },\n\n\n    step: function step(dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === _defs2.default.UNIT_STATE_DYING) return true;\n\n        this._super(dt);\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            var enemy = this.presentation.findEnemy(this);\n            if (enemy) {\n                this.stateData.target = enemy;\n                this.sprite.runAction(this.animAction.attack);\n                this.state = _defs2.default.UNIT_STATE_ATTACK;\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    this.logic.cool = this.getAttackCool();\n\n                    var hit = new _entityEffectBullet2.default(this.team, this.presentation, this, target, 'effect_bulletc_idle');\n                    this.presentation.addEffect(hit);\n                }\n            } else {\n                this.sprite.runAction(this.animAction.idle);\n                this.state = _defs2.default.UNIT_STATE_IDLE;\n            }\n        }\n        return true;\n    }\n});\n\nmodule.exports = EntityTower;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar ObjectPool = function ObjectPool(opts) {\n    var onCreate = opts.onCreate,\n        onShow = opts.onShow,\n        onHide = opts.onHide,\n        onDestroy = opts.onDestroy;\n\n\n    this.list = [];\n\n    this.onCreate = onCreate;\n    this.onShow = onShow;\n    this.onHide = onHide;\n    this.onDestroy = onDestroy;\n};\n\nObjectPool.prototype.clear = function () {\n    for (var i = this.length - 1; i >= 0; --i) {\n        this.onDestroy.call(this.list[i]);\n    }\n    this.list = [];\n};\n\nObjectPool.prototype.push = function (obj) {\n    this.onHide.call(obj);\n    this.list.push(obj);\n    return obj;\n};\n\nObjectPool.prototype.pop = function () {\n    var obj;\n\n    if (this.list.length > 0) {\n        obj = this.list[this.list.length - 1];\n        --this.list.length;\n    } else {\n        obj = this.onCreate();\n    }\n\n    this.onShow.call(obj);\n    return obj;\n};\n\nmodule.exports = ObjectPool;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(73), __esModule: true };\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(75), __esModule: true };\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(76);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(23);\nvar document = __webpack_require__(11).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(30);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(77);\nvar IE8_DOM_DEFINE = __webpack_require__(83);\nvar toPrimitive = __webpack_require__(96);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(17) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(87);\nvar enumBugKeys = __webpack_require__(79);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(34);\nvar defined = __webpack_require__(32);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(32);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.appState = exports.setAppState = exports.UNLOAD_SOUND = exports.UNLOAD_SPRITE = exports.LOAD_SOUND = exports.LOAD_SPRITE = exports.SET_APP_STATE = undefined;\n\nvar _defineProperty2 = __webpack_require__(16);\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SET_APP_STATE = exports.SET_APP_STATE = 'SET_APP_STATE';\nvar LOAD_SPRITE = exports.LOAD_SPRITE = 'LOAD_SPRITE';\nvar LOAD_SOUND = exports.LOAD_SOUND = 'LOAD_SOUND';\nvar UNLOAD_SPRITE = exports.UNLOAD_SPRITE = 'UNLOAD_SPRITE';\nvar UNLOAD_SOUND = exports.UNLOAD_SOUND = 'UNLOAD_SOUND';\n\nvar setAppState = exports.setAppState = function setAppState(data, callback) {\n    return {\n        type: SET_APP_STATE,\n        data: data,\n        callback: callback,\n        next: {\n            persist: ['appState']\n        }\n    };\n};\n\nvar actionHandler = (0, _defineProperty3.default)({}, SET_APP_STATE, function (state, action) {\n    return (0, _assign2.default)({}, state, action.data);\n});\n\nvar initialState = {};\n\nvar appState = exports.appState = function appState() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    var handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n};\n\nexports.default = appState;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _baseScene = __webpack_require__(12);\n\nvar _baseScene2 = _interopRequireDefault(_baseScene);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _config = __webpack_require__(13);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _store = __webpack_require__(4);\n\nvar _objectPool = __webpack_require__(27);\n\nvar _objectPool2 = _interopRequireDefault(_objectPool);\n\nvar _battle = __webpack_require__(58);\n\nvar _battle2 = _interopRequireDefault(_battle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar InGameScene = _baseScene2.default.extend({\n    ctor: function ctor() {\n        this._super({\n            sprites: [\"battle.plist\", \"buildings.plist\", \"pokemons.plist\", \"effects.plist\"]\n        });\n    },\n    onEnter: function onEnter() {\n        this._super();\n    },\n    onLoading: function onLoading() {\n        this._super();\n        cc.log(\"Loading battle...\");\n    },\n    onReady: function onReady() {\n        this._super();\n        cc.log(\"Resource ready\");\n        this.battle = new _battle2.default();\n\n        this.addChild(this.battle);\n        this.battle.init();\n        this.battle.connect();\n        this.scheduleUpdate();\n    },\n    onExit: function onExit() {\n        this._super();\n        this.unscheduleUpdate();\n        this.battle.close();\n    },\n\n    update: function update(dt) {\n        this.battle.update(dt);\n    },\n\n    onAction: function onAction(touch, event) {\n        if (this.battle.isReady()) {\n            // TODO\n        }\n    }\n});\n\nmodule.exports = InGameScene;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _baseScene = __webpack_require__(12);\n\nvar _baseScene2 = _interopRequireDefault(_baseScene);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _store = __webpack_require__(4);\n\nvar _room = __webpack_require__(24);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LoadingSceneLayer = cc.Layer.extend({\n    ctor: function ctor() {\n        this._super();\n    }\n});\n\nvar LoadingScene = _baseScene2.default.extend({\n    ctor: function ctor() {\n        this._super({\n            sprites: [\"splash.plist\"]\n        });\n    },\n\n    onReady: function onReady() {\n        this._super();\n        this.addChild(new LoadingSceneLayer());\n        var authenticate = (0, _store.getStoreState)().authenticate;\n        (0, _store.storeDispatch)((0, _room.startBattle)(authenticate, function (result) {\n            if (result.error) {\n                console.error(result.error);\n                cc.director.runScene(new window.SplashScene());\n            } else {\n                cc.director.runScene(new window.InGameScene());\n            }\n        }));\n    }\n});\n\nmodule.exports = LoadingScene;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _setImmediate2 = __webpack_require__(29);\n\nvar _setImmediate3 = _interopRequireDefault(_setImmediate2);\n\nvar _assign = __webpack_require__(5);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _baseScene = __webpack_require__(12);\n\nvar _baseScene2 = _interopRequireDefault(_baseScene);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _store = __webpack_require__(4);\n\nvar _authenticate = __webpack_require__(20);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MenuSceneLayer = cc.Layer.extend({\n    ctor: function ctor() {\n        this._super();\n        _ui2.default.makeImageView(this, { sprite: \"logo.png\", position: _ui2.default.relativeTo(this, _ui2.default.TOP_CENTER, 320, 200) });\n        this.initUI();\n    },\n    initUI: function initUI() {\n        var instantPlay = this.addButton(\"instantPlay\", this.onInstantPlay, {\n            position: _ui2.default.relativeTo(this, _ui2.default.CENTER, 0, 0)\n        });\n        // let option = this.addButton(\"option\", this.onEnterOption, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -50)\n        // });\n        // let help = this.addButton(\"help\", this.onInstantPlay, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -200)\n        // });\n        // let about = this.addButton(\"about\", this.onInstantPlay, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -350)\n        // });\n    },\n    addButton: function addButton(text, handle, opt) {\n        opt = (0, _assign2.default)({\n            normal: \"button_green.png\",\n            pressed: \"button_green_pressed.png\",\n            anchorPoint: cc.p(0.5, 0.5),\n            position: _ui2.default.relativeTo(this, _ui2.default.LEFT_MIDDLE, 30, 30),\n            listener: handle,\n            listenerTarget: this,\n            scale: 2\n        }, opt || {});\n\n        var button = _ui2.default.makeButton(this, opt);\n        _ui2.default.makeText(button, {\n            text: _localize2.default.getCaps(text),\n            font: getBigFontName(),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(button, _ui2.default.CENTER, 0, 0),\n            shadow: true\n        });\n        return button;\n    },\n    onInstantPlay: function onInstantPlay(sender, type) {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            (0, _setImmediate3.default)(function () {\n                Sound.playSfx(\"click\");\n                Sound.stopMusic();\n                var authenticate = (0, _store.getStoreState)().authenticate;\n                var userId = authenticate.id || Math.random().toString(36).substr(2, 9);\n                (0, _store.storeDispatch)((0, _authenticate.login)({ id: userId }, function () {\n                    cc.director.runScene(new window.LoadingScene());\n                }));\n            });\n        }\n    },\n    onEnterOption: function onEnterOption(sender, type) {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            Sound.playSfx(\"click\");\n            (0, _setImmediate3.default)(function () {});\n        }\n    }\n});\n\nvar MenuScene = _baseScene2.default.extend({\n    ctor: function ctor() {\n        this._super();\n    },\n    onEnter: function onEnter() {\n        this._super();\n        this.addChild(new MenuSceneLayer());\n    },\n    onReady: function onReady() {\n        this._super();\n        Sound.playMusic(\"bg_music\", true);\n    }\n});\n\nmodule.exports = MenuScene;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _baseScene = __webpack_require__(12);\n\nvar _baseScene2 = _interopRequireDefault(_baseScene);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _store = __webpack_require__(4);\n\nvar _authenticate = __webpack_require__(20);\n\nvar _alertLayer = __webpack_require__(22);\n\nvar _alertLayer2 = _interopRequireDefault(_alertLayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SplashSceneLayer = cc.Layer.extend({\n    ctor: function ctor() {\n        this._super();\n    }\n});\n\nvar SplashScene = _baseScene2.default.extend({\n    ctor: function ctor() {\n        this._super({\n            persitSprites: [\"splash.plist\", \"ui.plist\"],\n            sounds: [\"bg_music\", \"click\"]\n        });\n    },\n    onReady: function onReady() {\n        this._super();\n        this.addChild(new SplashSceneLayer());\n\n        setTimeout(function () {\n            cc.director.runScene(new window.MenuScene());\n        }, 500);\n    }\n});\n\nmodule.exports = SplashScene;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar _classCallCheck2 = __webpack_require__(14);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(15);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Sound = function () {\n    function Sound() {\n        (0, _classCallCheck3.default)(this, Sound);\n        this._sound_pool = {};\n        this._sfx = {};\n    }\n\n    (0, _createClass3.default)(Sound, [{\n        key: 'preload',\n        value: function preload(list, cb) {\n            var soundExtension = this.getSoundExtension();\n            var sources = [];\n            list.map(function (path) {\n                sources.push(path + soundExtension);\n            });\n            loadResources(sources, function (_) {\n                cb && cb();\n            });\n        }\n    }, {\n        key: 'getSoundExtension',\n        value: function getSoundExtension() {\n            var a = document.createElement('audio');\n            if (!!(a.canPlayType && a.canPlayType('audio/mpeg;').replace(/no/, ''))) return \".mp3\";\n            if (!!(a.canPlayType && a.canPlayType('audio/ogg;').replace(/no/, ''))) return \".ogg\";\n            return false;\n        }\n    }, {\n        key: 'getUrl',\n        value: function getUrl(name) {\n            return getResourceAlias(name + this.getSoundExtension());\n        }\n    }, {\n        key: 'setMusicVolume',\n        value: function setMusicVolume(level) {\n            cc.audioEngine.setMusicVolume(level);\n        }\n    }, {\n        key: 'getMusicVolume',\n        value: function getMusicVolume(level) {\n            cc.audioEngine.setMusicVolume(level);\n        }\n    }, {\n        key: 'setSfxVolume',\n        value: function setSfxVolume(level) {\n            cc.audioEngine.setEffectsVolume(level);\n        }\n    }, {\n        key: 'getSfxVolume',\n        value: function getSfxVolume(level) {\n            cc.audioEngine.getEffectsVolume(level);\n        }\n    }, {\n        key: 'playMusic',\n        value: function playMusic(name) {\n            var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            cc.audioEngine.playMusic(this.getUrl(name), loop);\n        }\n    }, {\n        key: 'stopMusic',\n        value: function stopMusic() {\n            cc.audioEngine.stopMusic();\n        }\n    }, {\n        key: 'playSfx',\n        value: function playSfx(name) {\n            var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            this._sfx[name] = cc.audioEngine.playEffect(this.getUrl(name), loop);\n        }\n    }, {\n        key: 'stopSfx',\n        value: function stopSfx(name) {\n            cc.audioEngine.stopEffect(this._sfx[name]);\n        }\n    }, {\n        key: 'stopAllSfx',\n        value: function stopAllSfx(name) {\n            cc.audioEngine.stopAllEffects();\n        }\n    }, {\n        key: 'stopAll',\n        value: function stopAll() {\n            stopMusic();\n            stopAllEffects();\n        }\n    }]);\n    return Sound;\n}();\n\nglobal.sound = global.sound || new Sound();\n\nmodule.exports = sound;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(102)))\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _store = __webpack_require__(4);\n\nvar _appState = __webpack_require__(40);\n\nvar _appState2 = _interopRequireDefault(_appState);\n\nvar _authenticate = __webpack_require__(20);\n\nvar _authenticate2 = _interopRequireDefault(_authenticate);\n\nvar _room = __webpack_require__(24);\n\nvar _room2 = _interopRequireDefault(_room);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nif (!window) {\n    window = {};\n}\nwindow.MenuScene = __webpack_require__(43);\nwindow.SplashScene = __webpack_require__(44);\nwindow.InGameScene = __webpack_require__(41);\nwindow.LoadingScene = __webpack_require__(42);\nwindow.Sound = __webpack_require__(45);\n\nwindow.initApp = function () {\n    console.log(\"init app...\");\n\n    var store = (0, _store.createStore)({\n        appState: _appState2.default,\n        authenticate: _authenticate2.default,\n        room: _room2.default\n    });\n\n    store.restoreState();\n};\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _objectPool = __webpack_require__(27);\n\nvar _objectPool2 = _interopRequireDefault(_objectPool);\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _cardButton = __webpack_require__(49);\n\nvar _cardButton2 = _interopRequireDefault(_cardButton);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ActionBar = cc.Node.extend({\n    ctor: function ctor(opts) {\n        this._super();\n\n        this.frame = _ui2.default.makeImageView(this, {\n            sprite: \"action_bar_panel.png\",\n            scale9Size: cc.size(_defs2.default.ACTION_FIELD_WIDTH, _defs2.default.ACTION_FIELD_HEIGHT),\n            anchorPoint: cc.p(0, 0),\n            position: _ui2.default.relativeTo(this, _ui2.default.LEFT_BOTTOM, (_defs2.default.SCREEN_SIZE.width - _defs2.default.ACTION_FIELD_WIDTH) / 2, _defs2.default.ACTION_BUTTON_HEIGHT + 48),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this.socket = opts.socket;\n        this.team = opts.team;\n        this.presentation = null;\n\n        this._opts = opts;\n        this.cardButtons = [];\n        this.hand = [];\n        this.selectingCard = null;\n        this.referenceCount = 1;\n\n        this.formationLayout = [];\n        this.formation = null;\n\n        var self = this;\n        this._touchListener = cc.EventListener.create({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            onTouchBegan: self.onTouchBegan.bind(self),\n            onTouchMoved: self.onTouchMoved.bind(self),\n            onTouchEnded: self.onTouchEnded.bind(self),\n            onTouchCancelled: self.onTouchCancelled(self)\n        });\n\n        cc.eventManager.addListener(self._touchListener, self);\n    },\n\n    setHand: function setHand(hand) {\n        this.hand = hand;\n        for (var i = 0; i < hand.length; ++i) {\n            var pokemon = _defs2.default.POKEMONS.find(function (it) {\n                return it.pokedex === hand[i];\n            });\n            this.addCard(i, pokemon);\n        }\n\n        this.selectingCard = this.cardButtons[0];\n    },\n\n    addCard: function addCard(index, pokemon) {\n        var button = new _cardButton2.default({\n            actionBar: this\n        });\n        button.setPosition(index * (_defs2.default.ACTION_BUTTON_WIDTH + _defs2.default.ACTION_BUTTON_GAP) + _defs2.default.ACTION_BUTTON_GAP, _defs2.default.ACTION_BUTTON_GAP);\n        button.setPokemon(pokemon, this.team);\n\n        this.cardButtons.push(button);\n        this.addChild(button, 0);\n    },\n\n    select: function select(card) {\n        this.selectingCard = card;\n\n        for (var i = 0; i < this.cardButtons.length; ++i) {\n            this.cardButtons[i].unselect();\n        }\n\n        card.select();\n    },\n\n    setFormation: function setFormation(formation) {\n        var _this = this;\n\n        this.formation = formation;\n\n        var _loop = function _loop(i) {\n            var unit = formation.units[i];\n            var deployed = _this.formationLayout.find(function (it) {\n                return it.ref === unit.ref;\n            });\n            if (!deployed) {\n                var pokemon = _defs2.default.POKEMONS.find(function (it) {\n                    return it.pokedex === unit.name;\n                });\n\n                deployed = _ui2.default.makeSprite(_this.frame, {\n                    sprite: pokemon.name.toLowerCase() + '.png'\n                });\n\n                _this.formationLayout.push(deployed);\n            }\n\n            deployed.setPosition(unit.x * 64 + _defs2.default.ACTION_FIELD_WIDTH / 2 + 32, unit.y * 64 + 32);\n        };\n\n        for (var i = 0; i < formation.units.length; ++i) {\n            _loop(i);\n        }\n    },\n\n    onTouchEnded: function onTouchEnded(touch, event) {},\n\n    onTouchBegan: function onTouchBegan(touch, event) {\n        var _this2 = this;\n\n        if (this.containsTouchLocation(touch)) {\n            var origin = this.frame.getPosition();\n            var pt = touch.getLocation();\n            var x = pt.x - origin.x;\n            var y = pt.y - origin.y;\n\n            x -= _defs2.default.ACTION_FIELD_WIDTH / 2;\n\n            x = Math.floor(x / 64);\n            y = Math.floor(y / 64);\n\n            var unitData = _defs2.default.POKEMONS.find(function (it) {\n                return it.pokedex === _this2.selectingCard.pokedex;\n            });\n            if (!unitData) return;\n\n            var cost = unitData.total || 100;\n            if (this.presentation.gold < cost * 1000) return;\n\n            var isCancelled = false;\n            var formation = this.formation;\n            if (formation) {\n                for (var i = 0; i < formation.units.length; ++i) {\n                    var _unit = formation.units[i];\n                    if (_unit.x === x && _unit.y === y) {\n                        isCancelled = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!isCancelled) {\n                this.presentation.gold -= cost * 1000;\n                this.socket.send({ x: x, y: y, type: \"deploy\", name: this.selectingCard.pokedex, ref: this.referenceCount++ });\n            }\n        }\n    },\n\n    onTouchMoved: function onTouchMoved(touch, event) {},\n\n    onTouchCancelled: function onTouchCancelled(touch, event) {},\n\n    containsTouchLocation: function containsTouchLocation(touch) {\n        var pt = touch.getLocation();\n        var sz = this.frame.getContentSize();\n        var bb = cc.rect(0, 0, sz.width, sz.height);\n        return cc.rectContainsPoint(bb, this.frame.convertToNodeSpace(pt));\n    }\n});\n\nmodule.exports = ActionBar;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _socketClient = __webpack_require__(62);\n\nvar _socketClient2 = _interopRequireDefault(_socketClient);\n\nvar _store = __webpack_require__(4);\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _presentation = __webpack_require__(59);\n\nvar _presentation2 = _interopRequireDefault(_presentation);\n\nvar _actionBar = __webpack_require__(47);\n\nvar _actionBar2 = _interopRequireDefault(_actionBar);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _shuffle = __webpack_require__(69);\n\nvar _shuffle2 = _interopRequireDefault(_shuffle);\n\nvar _alertLayer = __webpack_require__(22);\n\nvar _alertLayer2 = _interopRequireDefault(_alertLayer);\n\nvar _notifyLayer = __webpack_require__(61);\n\nvar _notifyLayer2 = _interopRequireDefault(_notifyLayer);\n\nvar _topBar = __webpack_require__(60);\n\nvar _topBar2 = _interopRequireDefault(_topBar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = __webpack_require__(13);\n\nvar State = {\n    LOADING: 0,\n    WAITING: 1,\n    RUNNING: 2,\n    GAMEOVER: 3\n};\n\nvar Battle = cc.Layer.extend({\n    ctor: function ctor() {\n        this._super();\n        this.socket = new _socketClient2.default();\n        this.state = State.LOADING;\n        this.currentTurn = 0;\n        this.receivedTurnCount = 0;\n        this.replay = {};\n        this.isLagged = false;\n    },\n\n    isReady: function isReady() {\n        return this.state === State.RUNNING;\n    },\n\n    onOpenActionBar: function onOpenActionBar(sender, type) {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            this.actionBar.setVisible(!this.actionBar.isVisible());\n        }\n    },\n\n    init: function init() {\n        var room = (0, _store.getStoreState)().room;\n\n        this.ground = new cc.Sprite(\"#ground.png\");\n        this.ground.setPosition(cc.p(_defs2.default.SCREEN_CENTER.x + _defs2.default.BATTLE_POSITION.x, _defs2.default.SCREEN_CENTER.y + _defs2.default.BATTLE_POSITION.y));\n        this.ground.setScale(_defs2.default.BATTLE_SCALE);\n        this.addChild(this.ground);\n\n        this.openButton = _ui2.default.makeButton(this, {\n            normal: \"blue_button.png\",\n            pressed: \"blue_button.png\",\n            anchorPoint: cc.p(1, 0),\n            listener: this.onOpenActionBar,\n            listenerTarget: this,\n            scale: 1.5,\n            position: _ui2.default.relativeTo(this, _ui2.default.RIGHT_BOTTOM, 5, 5)\n        });\n\n        _ui2.default.makeImageView(this.openButton, {\n            sprite: \"badge_cyber.png\",\n            anchorPoint: cc.p(0.5, 0.5),\n            scale: 0.5,\n            position: _ui2.default.relativeTo(this.openButton, _ui2.default.CENTER, 0, 0)\n        });\n\n        this.actionBar = new _actionBar2.default({\n            socket: this.socket,\n            team: room.playerId\n        });\n        this.actionBar.setAnchorPoint(0, 0);\n        this.actionBar.setPosition(_ui2.default.relativeTo(this, _ui2.default.LEFT_BOTTOM, 0, 0));\n        this.addChild(this.actionBar, 40);\n\n        var topBar = new _topBar2.default({});\n\n        topBar.setAnchorPoint(0, 0);\n        topBar.setPosition(_ui2.default.relativeTo(this, _ui2.default.LEFT_TOP, 0, 0));\n        this.addChild(topBar, 60);\n        this.topBar = topBar;\n\n        this.actionBar.setVisible(false);\n\n        var groundSize = this.ground.getContentSize();\n        this.presentation = new _presentation2.default({ team: room.playerId, actionBar: this.actionBar });\n        this.presentation.setPosition(groundSize.width / 2, groundSize.height / 2);\n        this.ground.addChild(this.presentation, 10);\n\n        _camera2.default.setRotate(room.playerId === 0 ? 0 : 180);\n        this.presentation.rotate(_camera2.default.rotate);\n\n        this.lagNotify = new _notifyLayer2.default();\n        this.lagNotify.setText(\"Reconnecting...\");\n        this.lagNotify.setVisible(false);\n        this.addChild(this.lagNotify);\n\n        this.battleResult = new _alertLayer2.default();\n        this.battleResult.setVisible(false);\n        this.addChild(this.battleResult, 100);\n    },\n\n    connect: function connect() {\n        var room = (0, _store.getStoreState)().room;\n        var authenticate = (0, _store.getStoreState)().authenticate;\n        this.socket.connect(config.socketUrl, {\n            userId: authenticate.id,\n            roomId: room.roomId,\n            accessToken: authenticate.accessToken\n        });\n    },\n\n    close: function close() {\n        this.socket.close();\n    },\n\n    send: function send(message) {\n        this.socket.send(message);\n    },\n\n    update: function update(dt) {\n        if (this.state === State.GAMEOVER) return;\n\n        if (this.state === State.LOADING && this.socket.isReady) {\n            this.send({ type: \"ready\" });\n            this.state = State.WAITING;\n        }\n\n        var message = this.socket.popMessage();\n        if (message) {\n            switch (message.type) {\n                case \"ready\":\n                    this.handleReady(message);\n                    break;\n\n                case \"timeOver\":\n                    this.handleTimeOver(message);\n                    break;\n\n                case \"turn\":\n                    this.handleTurn(message);\n                    break;\n\n                case \"lagged\":\n                    this.showLaggedWarning();\n                    this.isLagged = true;\n                    break;\n            }\n        }\n\n        if (!this.isLagged) {\n            this.presentation.update(dt);\n        }\n    },\n\n    showLaggedWarning: function showLaggedWarning() {\n        this.lagNotify.setVisible(true);\n    },\n\n    hideLaggedWarning: function hideLaggedWarning() {\n        this.lagNotify.setVisible(false);\n    },\n\n    initGameOver: function initGameOver(result) {\n        this.battleResult.setError(result.winnerId == (0, _store.getStoreState)().room.playerId ? \"YOU WIN!\" : result.winnerId < 0 ? \"DRAW!\" : \"YOU LOSE!\", function (_) {\n            cc.director.runScene(new window.SplashScene());\n        });\n        this.battleResult.setVisible(true);\n        this.state = State.GAMEOVER;\n    },\n    handleReady: function handleReady(message) {\n        cc.log(\"Battle ready!\");\n        this.state = State.RUNNING;\n\n        var room = (0, _store.getStoreState)().room;\n\n        var hand = [\"001\", \"002\", \"003\", \"004\", \"005\", \"006\"];\n        this.actionBar.setHand(hand);\n\n        this.actionBar.setVisible(false);\n\n        this.presentation.init();\n    },\n\n    handleTimeOver: function handleTimeOver(message) {\n        this.initGameOver({ winnerId: -1 });\n    },\n\n    handleTurn: function handleTurn(message) {\n        if (this.state !== State.RUNNING) return;\n\n        this.replay[message.index] = message;\n        if (message.index > this.receivedTurnCount) {\n            this.receivedTurnCount = message.index;\n        }\n\n        var turn = this.replay[this.currentTurn];\n        if (turn && this.receivedTurnCount - this.currentTurn >= _defs2.default.TURN_PADDING) {\n            this.hideLaggedWarning();\n            this.isLagged = false;\n\n            var deployList = turn.deploy;\n            for (var i = 0; i < deployList.length; ++i) {\n                var deployment = deployList[i];\n                this.presentation.deploy(deployment);\n            }\n\n            this.presentation.step(turn.dt);\n            this.topBar.setInfo(this.presentation.gold, this.presentation.time);\n            ++this.currentTurn;\n\n            if (this.presentation.result) {\n                this.initGameOver(this.presentation.result);\n            } else {\n                this.send({ type: \"ack\", turn: this.currentTurn });\n            }\n        }\n    }\n});\n\nmodule.exports = Battle;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CardButton = cc.Node.extend({\n    ctor: function ctor(opts) {\n        this._super();\n\n        this.pokedex = \"\";\n        this.name = \"\";\n        this.team = 0;\n        this.index = 0;\n\n        this.actionBar = opts.actionBar;\n\n        this.frame = _ui2.default.makeImageView(this, {\n            sprite: \"blue_button.png\",\n            scale9Size: cc.size(_defs2.default.ACTION_BUTTON_WIDTH, _defs2.default.ACTION_BUTTON_HEIGHT),\n            anchorPoint: cc.p(0, 0),\n            position: _ui2.default.relativeTo(this, _ui2.default.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this.costText = _ui2.default.makeText(this.frame, {\n            text: \"0\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            anchorPoint: cc.p(0.5, 0.5),\n            position: _ui2.default.relativeTo(this.frame, _ui2.default.CENTER_BOTTOM, 0, 40),\n            shadow: true,\n            zOrder: 10\n        });\n\n        var spr = new cc.Sprite();\n        this.sprite = spr;\n        this.frame.addChild(spr);\n\n        var self = this;\n        this._touchListener = cc.EventListener.create({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            onTouchBegan: self.onTouchBegan.bind(self),\n            onTouchMoved: self.onTouchMoved.bind(self),\n            onTouchEnded: self.onTouchEnded.bind(self),\n            onTouchCancelled: self.onTouchCancelled(self)\n        });\n\n        cc.eventManager.addListener(self._touchListener, self);\n\n        this.isSelected = false;\n    },\n\n    setPokemon: function setPokemon(pokemon, team) {\n        var pokedex = pokemon.pokedex;\n        if (this.pokedex !== pokedex || this.team !== team) {\n            this.pokedex = pokemon.pokedex;\n            this.name = pokemon.name;\n            this.team = team;\n            this.sprite.setSpriteFrame(this.name.toLowerCase() + \".png\");\n            this.sprite.setAnchorPoint(cc.p(0.5, 0.5));\n            this.sprite.setPosition(_ui2.default.relativeTo(this.frame, _ui2.default.CENTER, 0, 20));\n\n            this.costText.setString(pokemon.total);\n        }\n    },\n\n    unselect: function unselect() {\n        this.isSelected = false;\n        this.frame.loadTexture('blue_button.png', ccui.Widget.PLIST_TEXTURE);\n    },\n\n    select: function select() {\n        this.isSelected = true;\n        this.frame.loadTexture('yellow_button.png', ccui.Widget.PLIST_TEXTURE);\n    },\n\n    onTouchEnded: function onTouchEnded(touch, event) {},\n\n    onTouchBegan: function onTouchBegan(touch, event) {\n        if (this.containsTouchLocation(touch)) {\n            this.actionBar.select(this);\n        }\n    },\n\n    onTouchMoved: function onTouchMoved(touch, event) {},\n\n    onTouchCancelled: function onTouchCancelled(touch, event) {},\n\n    containsTouchLocation: function containsTouchLocation(touch) {\n        var pt = touch.getLocation();\n        var sz = this.frame.getContentSize();\n        var bb = cc.rect(0, 0, sz.width, sz.height);\n        return cc.rectContainsPoint(bb, this.frame.convertToNodeSpace(pt));\n    }\n});\n\nmodule.exports = CardButton;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityMeleeFighter = __webpack_require__(9);\n\nvar _entityMeleeFighter2 = _interopRequireDefault(_entityMeleeFighter);\n\nvar _entityEffectBullet = __webpack_require__(21);\n\nvar _entityEffectBullet2 = _interopRequireDefault(_entityEffectBullet);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityDual = _entityMeleeFighter2.default.extend({\n    createEffect: function createEffect(target) {\n        var hit = new _entityEffectBullet2.default(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    },\n    step: function step(dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === _defs2.default.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForEnemy();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = (0, _approxDistance2.default)(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = _defs2.default.UNIT_STATE_ATTACK;\n                }\n            } else {\n                if (this.isOfflane()) {\n                    this.state = _defs2.default.UNIT_STATE_IDLE;\n                } else {\n                    var v = dt * this.getMoveSpeed() / 1000;\n                    if (this.team === 0) {\n                        this.logic.y += v;\n                    } else {\n                        this.logic.y -= v;\n                    }\n                }\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = _defs2.default.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n\n                        var secondTarget = this.lookForSecondTarget();\n                        if (secondTarget && secondTarget.isAlive()) {\n                            this.createEffect(secondTarget);\n                        }\n                    }\n                }\n            } else {\n                this.state = _defs2.default.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    lookForSecondTarget: function lookForSecondTarget() {\n        var enemies = this.presentation.findEnemies(this, 2);\n        if (enemies[0] !== this.target) {\n            return enemies[0];\n        }\n\n        return enemies[1];\n    }\n});\n\nmodule.exports = EntityDual;\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityEffectHeal = _entityBase2.default.extend({\n    ctor: function ctor(team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 300;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = (0, _approxDistance2.default)(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: \"effect_heala_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: \"effect_heala_hit\", count: 10, loop: false });\n        this.state = _defs2.default.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function update(dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function step(dt) {\n        this._super(dt);\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = (0, _approxDistance2.default)(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = (0, _approxDistance2.default)(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = _defs2.default.UNIT_STATE_ATTACK;\n                this.target.heal(this.owner.getAttackFor(this.target.attr));\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectHeal;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityBase = __webpack_require__(7);\n\nvar _entityBase2 = _interopRequireDefault(_entityBase);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityEffectRocket = _entityBase2.default.extend({\n    ctor: function ctor(team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 1000;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = (0, _approxDistance2.default)(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: \"effect_bulletf_hit\", count: 6, loop: false });\n        this.state = _defs2.default.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function update(dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function step(dt) {\n        this._super(dt);\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = (0, _approxDistance2.default)(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = (0, _approxDistance2.default)(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = _defs2.default.UNIT_STATE_ATTACK;\n\n                var enemies = this.presentation.findEnemyInArea(this.owner, this.logic.x, this.logic.y, this.owner.attr.SplashRange || 200);\n                for (var i = 0; i < enemies.length; ++i) {\n                    enemies[i].damage(this.owner.getAttackFor(enemies[i].attr));\n                }\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectRocket;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityMeleeFighter = __webpack_require__(9);\n\nvar _entityMeleeFighter2 = _interopRequireDefault(_entityMeleeFighter);\n\nvar _entityEffectBullet = __webpack_require__(21);\n\nvar _entityEffectBullet2 = _interopRequireDefault(_entityEffectBullet);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityGunner = _entityMeleeFighter2.default.extend({\n    createEffect: function createEffect(target) {\n        var hit = new _entityEffectBullet2.default(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    }\n});\n\nmodule.exports = EntityGunner;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityTower = __webpack_require__(26);\n\nvar _entityTower2 = _interopRequireDefault(_entityTower);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityHQ = _entityTower2.default.extend({});\n\nmodule.exports = EntityHQ;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityMeleeFighter = __webpack_require__(9);\n\nvar _entityMeleeFighter2 = _interopRequireDefault(_entityMeleeFighter);\n\nvar _entityEffectHeal = __webpack_require__(51);\n\nvar _entityEffectHeal2 = _interopRequireDefault(_entityEffectHeal);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntityHealer = _entityMeleeFighter2.default.extend({\n    createEffect: function createEffect(target) {\n        var hit = new _entityEffectHeal2.default(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    },\n\n    step: function step(dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === _defs2.default.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForAlly();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = (0, _approxDistance2.default)(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = _defs2.default.UNIT_STATE_ATTACK;\n                }\n            } else {\n                var v = dt * this.getMoveSpeed() / 1000;\n                if (this.team === 0) {\n                    this.logic.y += v;\n                } else {\n                    this.logic.y -= v;\n                }\n            }\n        }\n\n        if (this.state === _defs2.default.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = _defs2.default.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n                    }\n                }\n            } else {\n                this.state = _defs2.default.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    updateIdle: function updateIdle() {\n        var enemy = this.presentation.findWoundedAlly(this);\n        if (enemy) {\n            this.state = _defs2.default.UNIT_STATE_WALK;\n            this.stateData.target = enemy;\n        } else {\n            this.state = _defs2.default.UNIT_STATE_WALK;\n            this.stateData.target = null;\n        }\n    },\n\n    lookForAlly: function lookForAlly() {\n        var enemy = this.presentation.findWoundedAlly(this);\n        if (enemy) {\n            this.stateData.target = enemy;\n        }\n    }\n});\n\nmodule.exports = EntityHealer;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _entityMeleeFighter = __webpack_require__(9);\n\nvar _entityMeleeFighter2 = _interopRequireDefault(_entityMeleeFighter);\n\nvar _entityEffectRocket = __webpack_require__(52);\n\nvar _entityEffectRocket2 = _interopRequireDefault(_entityEffectRocket);\n\nvar _approxDistance = __webpack_require__(3);\n\nvar _approxDistance2 = _interopRequireDefault(_approxDistance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EntitySiege = _entityMeleeFighter2.default.extend({\n    createEffect: function createEffect(target) {\n        var hit = new _entityEffectRocket2.default(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    }\n});\n\nmodule.exports = EntitySiege;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(14);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(15);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Formation = function () {\n    function Formation(team) {\n        (0, _classCallCheck3.default)(this, Formation);\n\n        this.team = team;\n        this.units = [];\n    }\n\n    (0, _createClass3.default)(Formation, [{\n        key: \"add\",\n        value: function add(deployment) {\n            this.units.push(deployment);\n        }\n    }, {\n        key: \"getOffsetX\",\n        value: function getOffsetX() {\n            return _defs2.default.ARENA_WIDTH / 2 * 100 / _defs2.default.ARENA_CELL_WIDTH;\n        }\n    }, {\n        key: \"getOffsetY\",\n        value: function getOffsetY() {\n            var h = _defs2.default.ARENA_HEIGHT / 2 * 100 / _defs2.default.ARENA_CELL_HEIGHT;\n            return this.team === 0 ? -h : _defs2.default.ARENA_HEIGHT * 100 / _defs2.default.ARENA_CELL_HEIGHT + h;\n        }\n    }]);\n    return Formation;\n}();\n\nmodule.exports = Formation;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _battle = __webpack_require__(48);\n\nvar _battle2 = _interopRequireDefault(_battle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _battle2.default;\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nvar _camera = __webpack_require__(1);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _formation = __webpack_require__(57);\n\nvar _formation2 = _interopRequireDefault(_formation);\n\nvar _entityTower = __webpack_require__(26);\n\nvar _entityTower2 = _interopRequireDefault(_entityTower);\n\nvar _entityHQ = __webpack_require__(54);\n\nvar _entityHQ2 = _interopRequireDefault(_entityHQ);\n\nvar _entityMeleeFighter = __webpack_require__(9);\n\nvar _entityMeleeFighter2 = _interopRequireDefault(_entityMeleeFighter);\n\nvar _entityGunner = __webpack_require__(53);\n\nvar _entityGunner2 = _interopRequireDefault(_entityGunner);\n\nvar _entityHealer = __webpack_require__(55);\n\nvar _entityHealer2 = _interopRequireDefault(_entityHealer);\n\nvar _entitySiege = __webpack_require__(56);\n\nvar _entitySiege2 = _interopRequireDefault(_entitySiege);\n\nvar _entityDual = __webpack_require__(50);\n\nvar _entityDual2 = _interopRequireDefault(_entityDual);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ENTITY_KLASS_MAP = {\n    entityHQ: _entityHQ2.default,\n    entityTower: _entityTower2.default\n};\n\nvar TRIPLE_FORMATION = [{ dx: 0, dy: 0 }, { dx: -120, dy: -120 }, { dx: -120, dy: 120 }];\n\nvar Presentation = cc.Node.extend({\n    ctor: function ctor(opts) {\n        this._super();\n\n        this.entities = [];\n        this.team = opts.team;\n        this.actionBar = opts.actionBar;\n        this.actionBar.presentation = this;\n\n        this.root = new cc.Node();\n        this.root.setPosition(cc.p(-_defs2.default.ARENA_WIDTH / 2, -_defs2.default.ARENA_HEIGHT / 2));\n        this.addChild(this.root, 0);\n\n        this.gold = 0;\n        this.time = 0;\n\n        this.leftGoals = [];\n        this.rightGoals = [];\n        this.units = [];\n        this.effects = [];\n\n        this.timeFrameCounter = 0;\n        this.stepTime = 1;\n        this.result = null;\n\n        this.formations = [];\n    },\n\n    rotate: function rotate(angle) {\n        this.setRotation(angle);\n    },\n\n    init: function init() {\n        this.leftGoals.push(this.build({ name: \"tower\", x: 900, y: 650, playerId: 0 }));\n        this.leftGoals.push(this.build({ name: \"hq\", x: 900, y: 50, playerId: 0 }));\n\n        this.rightGoals.push(this.build({ name: \"tower\", x: 900, y: 2550, playerId: 1 }));\n        this.rightGoals.push(this.build({ name: \"hq\", x: 900, y: 3150, playerId: 1 }));\n\n        this.gold = 200000;\n        this.time = 10000;\n\n        this.formations = [];\n    },\n\n    update: function update(dt) {\n        this.timeFrameCounter += dt * 1000;\n\n        for (var i = 0; i < this.units.length; ++i) {\n            this.units[i].update(dt);\n        }\n\n        for (var i = 0; i < this.effects.length; ++i) {\n            this.effects[i].update(dt);\n        }\n    },\n\n    build: function build(deployment) {\n        var unitData = _defs2.default.UNIT_DATA[deployment.name];\n        if (!unitData) return;\n\n        var Klass = ENTITY_KLASS_MAP[unitData.Klass];\n        if (!Klass) return;\n\n        var e = this.spawnUnit(Klass, deployment.playerId, deployment.x, deployment.y, unitData);\n        return e;\n    },\n\n    deploy: function deploy(deployment) {\n        var team = deployment.playerId;\n        var formation = this.formations[team];\n        if (!formation) {\n            formation = new _formation2.default(team);\n            this.formations[team] = formation;\n        }\n\n        var unitData = _defs2.default.POKEMONS.find(function (it) {\n            return it.pokedex === deployment.name;\n        });\n        if (!unitData) return;\n\n        var cost = unitData.total || 100;\n\n        formation.add(deployment);\n\n        if (formation.team === this.team) {\n            this.actionBar.setFormation(formation);\n        }\n    },\n\n    spawnUnit: function spawnUnit(Klass, team, x, y, unitData) {\n        var e = new Klass(team, this);\n        e.setUnitData(unitData);\n        e.setLocation(x, y);\n        this.units.push(e);\n        this.root.addChild(e);\n        return e;\n    },\n\n    addEffect: function addEffect(effect) {\n        this.effects.push(effect);\n        this.root.addChild(effect);\n    },\n\n    step: function step(dt) {\n        this.timeFrameCounter = 0;\n        this.stepTime = dt;\n\n        this.gold += dt * 10;\n        this.time -= dt;\n\n        if (this.time <= 0) {\n            this.time = 10000;\n            this.deployAllFormations();\n        }\n\n        for (var i = this.units.length - 1; i >= 0; --i) {\n            var u = this.units[i];\n            if (!u.step(dt)) {\n                this.units[i] = this.units[this.units.length - 1];\n                this.units.length--;\n                u.removeFromParent();\n            }\n        }\n\n        for (var i = this.effects.length - 1; i >= 0; --i) {\n            var e = this.effects[i];\n            if (!e.step(dt)) {\n                this.effects[i] = this.effects[this.effects.length - 1];\n                this.effects.length--;\n                e.removeFromParent();\n            }\n        }\n\n        var leftHQ = this.leftGoals[this.leftGoals.length - 1];\n        var rightHQ = this.rightGoals[this.rightGoals.length - 1];\n        if (!leftHQ.isActive()) {\n            if (!rightHQ.isActive()) {\n                this.result = { winnerId: -1 };\n            } else {\n                this.result = { winnerId: 1 };\n            }\n        } else if (!rightHQ.isActive()) {\n            if (!leftHQ.isActive()) {\n                this.result = { winnerId: -1 };\n            } else {\n                this.result = { winnerId: 0 };\n            }\n        }\n    },\n\n    findGoal: function findGoal(entity) {\n        var team = entity.team;\n        var goals = team === 0 ? this.rightGoals : this.leftGoals;\n        var res;\n        var dist = _defs2.default.BIG_DISTANCE;\n        for (var i = 0; i < goals.length; ++i) {\n            var g = goals[i];\n            if (g.isAlive()) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemy: function findEnemy(entity) {\n        var res;\n        var dist = _defs2.default.BIG_DISTANCE;\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemies: function findEnemies(entity, count) {\n        var res = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                res.push(g);\n                count--;\n                if (count <= 0) {\n                    break;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemyInArea: function findEnemyInArea(entity, x, y, r) {\n        var res = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g)) {\n                var d = g.getDistanceToPos(x, y);\n                if (d < r) {\n                    res.push(g);\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findWoundedAlly: function findWoundedAlly(entity) {\n        var res;\n        var dist = _defs2.default.BIG_DISTANCE;\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.isWounded() && g.team === entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    deployAllFormations: function deployAllFormations() {\n        for (var i = 0; i < this.formations.length; ++i) {\n            this.deployFormation(this.formations[i]);\n        }\n    },\n\n    deployFormation: function deployFormation(formation) {\n        if (!formation) {\n            return;\n        }\n\n        for (var i = 0; i < formation.units.length; ++i) {\n            var unit = formation.units[i];\n\n            var unitData = _defs2.default.POKEMONS.find(function (it) {\n                return it.pokedex === unit.name;\n            });\n            if (!unitData) return;\n\n            var Klass = null;\n            switch (unitData.klass) {\n                case \"gunner\":\n                    Klass = _entityGunner2.default;\n                    break;\n                case \"healer\":\n                    Klass = _entityHealer2.default;\n                    break;\n                case \"siege\":\n                    Klass = _entitySiege2.default;\n                    break;\n                case \"dual\":\n                    Klass = _entityDual2.default;\n                    break;\n            }\n\n            if (!Klass) return;\n\n            var x = unit.x * 64 * 100 / _defs2.default.ARENA_CELL_WIDTH;\n            var y = unit.y * 64 * 100 / _defs2.default.ARENA_CELL_HEIGHT;\n            if (formation.team === 1) {\n                y = -y;\n            }\n\n            this.spawnUnit(Klass, formation.team, x + formation.getOffsetX(), y + formation.getOffsetY(), unitData);\n        }\n    }\n});\n\nmodule.exports = Presentation;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _defs = __webpack_require__(0);\n\nvar _defs2 = _interopRequireDefault(_defs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TopBar = cc.Node.extend({\n    ctor: function ctor(opts) {\n        this._super();\n\n        var panel = _ui2.default.makeImageView(this, {\n            sprite: \"action_bar_panel.png\",\n            scale9Size: cc.size(_defs2.default.TOP_BAR_WIDTH, _defs2.default.TOP_BAR_HEIGHT),\n            anchorPoint: cc.p(0, 1),\n            position: _ui2.default.relativeTo(this, _ui2.default.LEFT_TOP, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        _ui2.default.makeImageView(this, {\n            sprite: \"icon_coin.png\",\n            anchorPoint: cc.p(0, 0.5),\n            position: _ui2.default.relativeTo(this, _ui2.default.LEFT_MIDDLE, 20, -_defs2.default.TOP_BAR_HEIGHT / 2),\n            contentSize: cc.size(40, 40),\n            resizeMode: _ui2.default.RESIZE_STRETCH\n        });\n\n        this.goldText = _ui2.default.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            anchorPoint: cc.p(0, 0.5),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(panel, _ui2.default.LEFT_MIDDLE, 70, 0),\n            horzAlign: cc.TEXT_ALIGNMENT_LEFT\n        });\n\n        _ui2.default.makeImageView(this, {\n            sprite: \"icon_time.png\",\n            anchorPoint: cc.p(0, 0.5),\n            position: _ui2.default.relativeTo(this, _ui2.default.LEFT_MIDDLE, 240, -_defs2.default.TOP_BAR_HEIGHT / 2),\n            contentSize: cc.size(40, 40),\n            resizeMode: _ui2.default.RESIZE_STRETCH\n        });\n\n        this.timeText = _ui2.default.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            anchorPoint: cc.p(0, 0.5),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(panel, _ui2.default.LEFT_MIDDLE, 300, 0),\n            horzAlign: cc.TEXT_ALIGNMENT_LEFT\n        });\n    },\n\n    setInfo: function setInfo(gold, time) {\n        this.goldText.setString(Math.floor(gold / 1000));\n        this.timeText.setString(Math.floor(time / 1000));\n    }\n});\n\nmodule.exports = TopBar;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _stringify = __webpack_require__(10);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _localize = __webpack_require__(8);\n\nvar _localize2 = _interopRequireDefault(_localize);\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NotifyLayer = ccui.Layout.extend({\n    ctor: function ctor() {\n        this._super();\n\n        cc.spriteFrameCache.addSpriteFrames('mainmenu.plist');\n\n        this._error = {};\n        this._onClick = null;\n\n        var size = cc.winSize;\n        var center = cc.p(size.width / 2, size.height / 2);\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n\n        var panel = _ui2.default.makeImageView(this, {\n            sprite: 'popup_frame.png',\n            scale9Size: cc.size(900, 520),\n            position: _ui2.default.relativeTo(this, _ui2.default.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this._text = _ui2.default.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            position: _ui2.default.relativeTo(panel, _ui2.default.CENTER, 0, 40),\n            size: cc.size(800, 250),\n            ignoreContentAdaptWithSize: false\n        });\n        return true;\n    },\n\n    setText: function setText(text, onClick) {\n        this._onClick = onClick;\n        this._error = text;\n        this._text.setString((0, _stringify2.default)(this._error));\n    }\n});\n\nexports.default = NotifyLayer;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _stringify = __webpack_require__(10);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = __webpack_require__(14);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(15);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SocketClient = function () {\n    function SocketClient() {\n        (0, _classCallCheck3.default)(this, SocketClient);\n\n        this._socket = null;\n        this._messagesQueue = [];\n        this._pendingQueue = [];\n        this._pendingBuffer = [];\n        this._query = null;\n        this._address = null;\n\n        this.isReady = false;\n        this._isActive = true;\n    }\n\n    (0, _createClass3.default)(SocketClient, [{\n        key: \"close\",\n        value: function close() {\n            this.flush();\n            this.isReady = false;\n            this._isActive = false;\n\n            if (this._socket) {\n                this._socket.close();\n                this._socket = null;\n            }\n        }\n    }, {\n        key: \"connect\",\n        value: function connect(address, query) {\n            this._address = address;\n            this._query = query;\n            this.tryConnect();\n        }\n    }, {\n        key: \"buildQuery\",\n        value: function buildQuery(address, query) {\n            var url = address;\n            var i = 0;\n            for (var q in query) {\n                url += (i === 0 ? \"?\" : \"&\") + q + \"=\" + query[q];\n                ++i;\n            }\n            return url;\n        }\n    }, {\n        key: \"tryConnect\",\n        value: function tryConnect() {\n            this._socket = new WebSocket(this.buildQuery(this._address, this._query));\n            //this._socket.binaryType = \"arraybuffer\";\n\n            var self = this;\n            this._socket.onopen = function (evt) {\n                cc.log(\"Socket client connected.\");\n                self.isReady = true;\n\n                for (var i = 0; i < self._pendingQueue.length; ++i) {\n                    self.send(self._pendingQueue[i]);\n                }\n                self._pendingQueue.length = 0;\n\n                for (var i = 0; i < self._pendingBuffer.length; ++i) {\n                    self.sendBuffer(self._pendingBuffer[i]);\n                }\n                self._pendingBuffer.length = 0;\n            };\n\n            this._socket.onmessage = function (evt) {\n                if (evt.data) {\n                    self._messagesQueue.push(evt.data);\n                }\n            };\n\n            this._socket.onclose = function (evt) {\n                cc.log(\"Socket was closed\");\n\n                if (evt.reason) {\n                    self._messagesQueue.push((0, _stringify2.default)({\n                        type: \"close\",\n                        reasons: evt.reason\n                    }));\n                }\n\n                self._socket = null;\n                self.isReady = false;\n\n                if (self._isActive) {\n                    // retry\n                    setTimeout(function () {\n                        cc.log(\"Retry socket connection\");\n                        self.tryConnect();\n                    }, 1000);\n                }\n            };\n\n            this._socket.onerror = function (evt) {\n                self._socket = null;\n                self.isReady = false;\n            };\n        }\n    }, {\n        key: \"popMessage\",\n        value: function popMessage() {\n            if (this._messagesQueue.length > 0) {\n                var msg = this._messagesQueue.shift();\n\n                var data;\n                try {\n                    data = JSON.parse(msg);\n                } catch (e) {\n                    cc.error(e);\n                }\n\n                return data;\n            }\n\n            return null;\n        }\n    }, {\n        key: \"popRawMessage\",\n        value: function popRawMessage() {\n            if (this._messagesQueue.length > 0) {\n                return this._messagesQueue.shift();\n            }\n\n            return null;\n        }\n    }, {\n        key: \"send\",\n        value: function send(data) {\n            if (this.isReady && this._socket) {\n                var msg = (0, _stringify2.default)(data);\n                this._socket.send(msg);\n            } else {\n                this._pendingQueue.push(data);\n            }\n        }\n    }, {\n        key: \"sendBuffer\",\n        value: function sendBuffer(buffer) {\n            if (this.isReady && this._socket) {\n                this._socket.send(buffer);\n            } else {\n                this._pendingBuffer.push(buffer);\n            }\n        }\n    }, {\n        key: \"flush\",\n        value: function flush() {\n            this._messagesQueue.length = 0;\n            this._pendingQueue.length = 0;\n            this._pendingBuffer.length = 0;\n        }\n    }]);\n    return SocketClient;\n}();\n\nmodule.exports = SocketClient;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ui = __webpack_require__(2);\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar WaitingLayer = ccui.Layout.extend({\n    ctor: function ctor(size) {\n        this._super();\n\n        this._loadingProgress = 0;\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n        this.setTouchEnabled(true);\n        this.setSwallowTouches(true);\n\n        _ui2.default.makeImageView(this, { sprite: 'loading_bkg.png', zOrder: 1 });\n        this._loadingDot = _ui2.default.makeImageView(this, { sprite: 'loading_dot.png', zOrder: 2 });\n\n        this.setVisible(false);\n        return true;\n    },\n\n    setVisible: function setVisible(visible) {\n        this._super(visible);\n        if (visible) {\n            this.scheduleUpdate();\n        } else {\n            this.unscheduleUpdate();\n        }\n    },\n\n    update: function update(dt) {\n        this._loadingProgress += 360 * dt;\n        if (this._loadingProgress >= 360) {\n            this._loadingProgress -= 360;\n        }\n        this._loadingDot.setRotation(this._loadingProgress);\n    }\n});\nexports.default = WaitingLayer;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = [{\n    pokedex: \"001\",\n    name: \"Bulbasaur\",\n    type: [\"GRASS\", \"POISON\"],\n    total: 50,\n    hp: 55,\n    attack: 6,\n    attackHeavy: 0,\n    Cool: 610,\n    Range: 500,\n    Sight: 700,\n    defense: 0,\n    Speed: 225,\n    image: \"bulbasaur.png\",\n    klass: \"gunner\",\n    armor: 'light',\n    bulletName: 'effect_bulleta_idle'\n}, {\n    pokedex: \"002\",\n    name: \"Ivysaur\",\n    type: [\"GRASS\", \"POISON\"],\n    total: 125,\n    hp: 125,\n    attack: 10,\n    attackHeavy: 10,\n    Cool: 1070,\n    Range: 600,\n    Sight: 800,\n    defense: 1,\n    Speed: 225,\n    image: \"ivysaur.png\",\n    klass: \"gunner\",\n    armor: 'heavy',\n    bulletName: 'effect_bulletb_idle'\n}, {\n    pokedex: \"003\",\n    name: \"Venusaur\",\n    type: [\"GRASS\", \"POISON\"],\n    total: 125,\n    hp: 60,\n    attack: 2,\n    Cool: 200,\n    Range: 600,\n    Sight: 1200,\n    defense: 1,\n    Speed: 225,\n    image: \"venusaur.png\",\n    klass: \"healer\",\n    armor: 'light'\n}, {\n    pokedex: \"004\",\n    name: \"Blastoise\",\n    type: [\"GRASS\", \"POISON\"],\n    total: 75,\n    hp: 75,\n    attack: 10,\n    attackLight: 15,\n    Cool: 1690,\n    Range: 600,\n    Sight: 800,\n    defense: 1,\n    Speed: 425,\n    image: \"blastoise.png\",\n    klass: \"gunner\",\n    armor: 'light',\n    bulletName: 'effect_bulletd_idle'\n}, {\n    pokedex: \"005\",\n    name: \"Charmander\",\n    type: [\"FIRE\"],\n    total: 200,\n    hp: 175,\n    attack: 15,\n    attackHeavy: 10,\n    Cool: 740,\n    Range: 900,\n    Sight: 1000,\n    defense: 1,\n    Speed: 315,\n    image: \"charmander.png\",\n    klass: \"siege\",\n    armor: 'heavy',\n    bulletName: 'effect_bullete_idle',\n    SplashRange: 300\n}, {\n    pokedex: \"006\",\n    name: \"Charmeleon\",\n    type: [\"FIRE\"],\n    total: 375,\n    hp: 400,\n    attack: 30,\n    Cool: 1280,\n    Range: 700,\n    Sight: 800,\n    defense: 1,\n    Speed: 180,\n    image: \"charmeleon.png\",\n    klass: \"dual\",\n    armor: 'heavy',\n    bulletName: 'effect_bullete_idle'\n}];\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.apiMiddleware = undefined;\n\nvar _stringify = __webpack_require__(10);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _httpRequest = __webpack_require__(68);\n\nvar _httpRequest2 = _interopRequireDefault(_httpRequest);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = __webpack_require__(13);\n\nvar apiMiddleware = exports.apiMiddleware = function apiMiddleware(store, action, next) {\n    if (action.api && !action.response && !action.error) {\n        var accessToken = store.getState().authenticate.accessToken;\n        var apiHeader = {\n            \"Content-Type\": \"application/json\",\n            \"X-Access-Token\": accessToken\n        };\n\n        (0, _httpRequest2.default)({\n            url: config.apiUrl + action.api.endpoint,\n            method: action.api.method || \"POST\",\n            header: apiHeader,\n            data: (0, _stringify2.default)(action.api.payload),\n            timeout: 5000\n        }, function (status, res, responseText) {\n            if (status == 200) {\n                try {\n                    var response = JSON.parse(responseText);\n                    var error = response.error;\n\n                    if (!error) {\n                        action.response = response;\n                        return next(action);\n                    } else {\n                        action.error = error;\n                        if (action.api.ignoreError) {\n                            return next(action);\n                        }\n                    }\n                } catch (e) {\n                    action.error = [{ code: 'invalid_response', what: [responseText], say: e.toString() }];\n                }\n            } else {\n                action.error = [{ code: 'http_error', what: [status] }];\n            }\n\n            store.discard(action);\n        });\n    } else {\n        next(action);\n    }\n};\n\nexports.default = apiMiddleware;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar nextMiddleware = exports.nextMiddleware = function nextMiddleware(store, action, next) {\n    next(action);\n\n    if (action.next) {\n        var nextAction = action.next;\n        delete action.next;\n        store.dispatch(nextAction);\n    }\n};\n\nexports.default = nextMiddleware;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.loadState = exports.storageMiddleware = undefined;\n\nvar _stringify = __webpack_require__(10);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = __webpack_require__(13);\n\nvar PREFIX = config.localStorageName;\n\nvar storageMiddleware = exports.storageMiddleware = function storageMiddleware(store, action, next) {\n    if (action.persist) {\n        action.persist.forEach(function (key) {\n            var state = store.getState();\n            var value = state[key];\n            if (value) {\n                cc.sys.localStorage.setItem((0, _stringify2.default)(PREFIX + key), (0, _stringify2.default)(value));\n            }\n        });\n    }\n\n    next(action);\n};\n\nvar loadState = exports.loadState = function loadState(keys) {\n    var state = {};\n    keys.forEach(function (key) {\n        try {\n            var val = JSON.parse(cc.sys.localStorage.getItem((0, _stringify2.default)(PREFIX + key)));\n            state[key] = val || {};\n        } catch (e) {}\n    });\n\n    return state;\n};\n\nexports.default = storageMiddleware;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar httpRequest = exports.httpRequest = function httpRequest(opts, callback) {\n    var url = opts.url,\n        method = opts.method,\n        header = opts.header,\n        data = opts.data,\n        timeout = opts.timeout;\n\n    var xhr = cc.loader.getXMLHttpRequest();\n    xhr.open(method || \"GET\", url, true);\n\n    xhr.timeout = timeout || 5000;\n\n    // set the header\n    if (header) {\n        for (var k in header) {\n            xhr.setRequestHeader(k, header[k]);\n        }\n    }\n\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4) {\n            callback && callback(xhr.status, xhr.response, xhr.responseText);\n            callback = null;\n        }\n    };\n\n    xhr.onerror = function () {\n        callback && callback(xhr.status, null, 'loaded ' + url + ' error');\n        callback = null;\n    };\n\n    xhr.ontimeout = function () {\n        callback && callback(-1, null, 'loaded ' + url + ' timeout');\n        callback = null;\n    };\n\n    if (data) {\n        xhr.send(data);\n    } else {\n        xhr.send();\n    }\n};\n\nexports.default = httpRequest;\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function shuffle(a) {\n    var j, x, i;\n    for (i = a.length - 1; i > 0; i--) {\n        j = Math.floor(Math.random() * (i + 1));\n        x = a[i];\n        a[i] = a[j];\n        a[j] = x;\n    }\n};\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(74), __esModule: true };\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(6);\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(98);\nmodule.exports = __webpack_require__(6).Object.assign;\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(99);\nvar $Object = __webpack_require__(6).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(100);\nmodule.exports = __webpack_require__(6).Object.keys;\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(101);\nmodule.exports = __webpack_require__(6).setImmediate;\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(23);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(38);\nvar toLength = __webpack_require__(95);\nvar toAbsoluteIndex = __webpack_require__(94);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(35);\nvar createDesc = __webpack_require__(90);\nmodule.exports = __webpack_require__(17) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(11).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(17) && !__webpack_require__(19)(function () {\n  return Object.defineProperty(__webpack_require__(33)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = __webpack_require__(36);\nvar gOPS = __webpack_require__(86);\nvar pIE = __webpack_require__(88);\nvar toObject = __webpack_require__(39);\nvar IObject = __webpack_require__(34);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(19)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(80);\nvar toIObject = __webpack_require__(38);\nvar arrayIndexOf = __webpack_require__(78)(false);\nvar IE_PROTO = __webpack_require__(91)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(18);\nvar core = __webpack_require__(6);\nvar fails = __webpack_require__(19);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(92)('keys');\nvar uid = __webpack_require__(97);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(11);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(31);\nvar invoke = __webpack_require__(84);\nvar html = __webpack_require__(82);\nvar cel = __webpack_require__(33);\nvar global = __webpack_require__(11);\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(30)(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(37);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(37);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(23);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(18);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(85) });\n\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(18);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(17), 'Object', { defineProperty: __webpack_require__(35).f });\n\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(39);\nvar $keys = __webpack_require__(36);\n\n__webpack_require__(89)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(18);\nvar $task = __webpack_require__(93);\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// _dist/bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 46);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c43738d7d57f8a7c3575","import POKEMONS from \"../config/pokemons\";\n\nvar SCREEN_SIZE = cc.winSize;\nvar SCREEN_CENTER = cc.p(SCREEN_SIZE.width / 2, SCREEN_SIZE.height / 2);\n\nvar BATTLE_HEIGHT = 1408;\nvar ACTION_BAR_HEIGHT = 100;\nvar ACTION_BAR_WIDTH = SCREEN_SIZE.width * 0.5;\nvar ACTION_BUTTON_SIZE = 64;\n\nvar ACTION_FIELD_WIDTH = 640;\nvar ACTION_FIELD_HEIGHT = 320;\n\nvar TOP_BAR_WIDTH = SCREEN_SIZE.width;\nvar TOP_BAR_HEIGHT = 80;\n\nvar BATTLE_SCALE = SCREEN_SIZE.height / BATTLE_HEIGHT;\nvar BATTLE_POSITION = cc.p(0, 0);\n\nvar ARENA_WIDTH = 576;\nvar ARENA_HEIGHT = 1024;\nvar ARENA_CELL_WIDTH = 32;\nvar ARENA_CELL_HEIGHT = 32;\nvar BIG_DISTANCE = 2 * ARENA_WIDTH * ARENA_HEIGHT;\n\nvar MAX_CARDS_PER_ROUND = 4;\nvar TURN_PADDING = 4;\n\nvar UNIT_STATE_IDLE = 0;\nvar UNIT_STATE_WALK = 1;\nvar UNIT_STATE_ATTACK = 2;\nvar UNIT_STATE_DYING = 3;\n\nvar ANIMATION_FPS = 30;\n\nvar ACTION_BUTTON_WIDTH = 120;\nvar ACTION_BUTTON_HEIGHT = 160;\nvar ACTION_BUTTON_GAP = 30;\n\nvar UNIT_DATA = {\n    hq: {\n        hp: 6000,\n        attack: 80,\n        defense: 0,\n        Size: 100,\n        Range: 700,\n        Sight: 700,\n        Cool: 880,\n        Speed: 0,\n        Cost: 0,\n        Klass: \"entityHQ\",\n        animation: {\n            idle: { name: \"hq_idle\", count: 1, loop: true },\n            attack: { name: \"hq_attack\", count: 1, loop: false },\n            die: { name: \"hq_die\", count: 1, loop: false }\n        },\n        armor: 'heavy'\n    },\n    tower: {\n        hp: 4000,\n        attack: 20,\n        defense: 0,\n        Size: 100,\n        Range: 700,\n        Sight: 700,\n        Cool: 220,\n        Speed: 0,\n        Cost: 0,\n        Klass: \"entityTower\",\n        animation: {\n            idle: { name: \"tower_idle\", count: 1, loop: true },\n            attack: { name: \"tower_attack\", count: 1, loop: false },\n            die: { name: \"tower_die\", count: 15, loop: false }\n        },\n        armor: 'heavy'\n    }\n}\n\nmodule.exports = {\n    SCREEN_SIZE,\n\n    BATTLE_HEIGHT,\n\n    TOP_BAR_WIDTH,\n    TOP_BAR_HEIGHT,\n\n    ACTION_FIELD_WIDTH,\n    ACTION_FIELD_HEIGHT,\n\n    ACTION_BAR_WIDTH,\n    ACTION_BUTTON_SIZE,\n    ACTION_BAR_HEIGHT,\n\n    ACTION_BUTTON_WIDTH,\n    ACTION_BUTTON_HEIGHT,\n    ACTION_BUTTON_GAP,\n\n    SCREEN_CENTER,\n    BATTLE_SCALE,\n    BATTLE_POSITION,\n\n    ARENA_WIDTH,\n    ARENA_HEIGHT,\n    ARENA_CELL_WIDTH,\n    ARENA_CELL_HEIGHT,\n    BIG_DISTANCE,\n\n    MAX_CARDS_PER_ROUND,\n    TURN_PADDING,\n\n    POKEMONS,\n    UNIT_DATA,\n    ANIMATION_FPS,\n\n    UNIT_STATE_IDLE,\n    UNIT_STATE_WALK,\n    UNIT_STATE_ATTACK,\n    UNIT_STATE_DYING\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/defs.js","var Camera = function () {\n    this.translate = cc.p(0, 0);\n    this.rotate = 0;\n}\n\nCamera.prototype.setRotate = function (value) {\n    this.rotate = value;\n}\n\nCamera.prototype.setTranslate = function (value) {\n    this.translate = value;\n}\n\nmodule.exports = new Camera();\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/camera.js","module.exports = {\n    LEFT_TOP: 0b0000,\n    LEFT_MIDDLE: 0b0001,\n    LEFT_BOTTOM: 0b0010,\n    CENTER_TOP: 0b0100,\n    CENTER: 0b0101,\n    CENTER_BOTTOM: 0b0110,\n    RIGHT_TOP: 0b1000,\n    RIGHT_MIDDLE: 0b1001,\n    RIGHT_BOTTOM: 0b1010,\n\n    RESIZE_STRETCH: 0,\n    RESIZE_COVER: 1,\n    RESIZE_CONTAIN: 2,\n\n    makeNode: function(root, opts) {\n        var node = new cc.Node();\n        node.setPosition(opts.position || cc.p(0, 0));\n        node.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        node.setContentSize(opts.contentSize || cc.size(0, 0));\n        root.addChild(node, opts.zOrder || 0);\n        return node;\n    },\n\n    makeImageView: function(root, opts) {\n        var rootSize = root.getContentSize();\n        var center = cc.p(rootSize.width / 2, rootSize.height / 2);\n\n        var img = new ccui.ImageView(opts.sprite, ccui.Widget.PLIST_TEXTURE);\n\n        var baseSize = rootSize;\n        if (opts.scale9Size) {\n            img.ignoreContentAdaptWithSize(false);\n            img.setScale9Enabled(true);\n            img.setContentSize(opts.scale9Size);\n            baseSize = opts.scale9Size;\n        } else if (opts.contentSize) {\n            img.setContentSize(opts.contentSize);\n            baseSize = opts.contentSize;\n        } else if (opts.scale) {\n            img.setScale(opts.scale);\n        }\n\n        if (opts.scaleX) {\n            img.setScaleX(opts.scaleX);\n        }\n\n        if (opts.scaleY) {\n            img.setScaleY(opts.scaleY);\n        }\n\n        img.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n\n        var imgSize = img.getContentSize();\n\n        switch (opts.resizeMode) {\n            case this.RESIZE_STRETCH:\n                img.setScale(baseSize.width / imgSize.width, baseSize.height / imgSize.height);\n                break;\n\n            case this.RESIZE_COVER:\n                img.setScale(Math.max(baseSize.width / imgSize.width, baseSize.height / imgSize.height));\n                break;\n\n            case this.RESIZE_CONTAIN:\n                img.setScale(Math.min(baseSize.width / imgSize.width, baseSize.height / imgSize.height));\n                break;\n        }\n\n        img.setPosition(opts.position || center);\n\n        root.addChild(img, opts.zOrder || 0);\n        return img;\n    },\n\n    makeSprite: function(root, opts) {\n        var img = new cc.Sprite(\"#\" + opts.sprite);\n\n        if (opts.size) {\n            const contentSize = img.getContentSize();\n            img.setScale(opts.size.width / contentSize.width, opts.size.height / contentSize.height);\n        } else {\n            img.setScale(opts.scale || 1);\n        }\n\n        img.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        img.setPosition(opts.position || cc.p(0, 0));\n        root.addChild(img, opts.zOrder || 0);\n        return img;\n    },\n\n    makeText: function(root, opts) {\n        var txt = new ccui.Text(opts.text, opts.font, opts.fontSize);\n        txt.setScale(opts.scale || 1);\n        txt.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        txt.setPosition(opts.position || cc.p(0, 0));\n        txt.setTextHorizontalAlignment(opts.horzAlign || cc.TEXT_ALIGNMENT_CENTER);\n        txt.setTextVerticalAlignment(opts.vertAlign || cc.VERTICAL_TEXT_ALIGNMENT_CENTER);\n        txt.setTextColor(opts.color || cc.color(255, 255, 255, 255));\n\n        if (opts.ignoreContentAdaptWithSize != null) {\n            txt.ignoreContentAdaptWithSize(opts.ignoreContentAdaptWithSize);\n        }\n\n        if (opts.size) {\n            txt.setSize(opts.size);\n        }\n\n        if (opts.shadow) {\n            txt.enableShadow(opts.shadowColor || cc.color(0, 0, 0, 255), opts.shadowOffset || cc.size(2, -2), 0);\n        }\n\n        if (opts.outline) {\n            txt.enableOutline(opts.outlineColor || cc.color(0, 0, 0, 255), opts.outlineSize || 1);\n        }\n\n        if (opts.glow) {\n            txt.enableOutline(opts.glowColor || cc.color(255, 255, 255, 255));\n        }\n\n        root.addChild(txt, opts.zOrder || 0);\n        return txt;\n    },\n\n    makeButton: function(root, opts) {\n        var btn = new ccui.Button();\n        btn.loadTextures(opts.normal || \"\", opts.pressed || \"\", opts.disabled || \"\", ccui.Widget.PLIST_TEXTURE);\n        btn.setScale(opts.scale || 1);\n        btn.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        btn.setPosition(opts.position || cc.p(0, 0));\n\n        if (opts.listener) {\n            btn.addTouchEventListener(opts.listener, opts.listenerTarget);\n        }\n\n        root.addChild(btn, opts.zOrder || 0);\n        return btn;\n    },\n\n    makeSlider: function (root, opts)\n    {\n        opts = Object.assign({\n            barTexture:\"\",\n            buttonTexture:\"\",\n            buttonTextureClicked:\"\",\n            progressBarTexture:\"\",\n            touchEnable:true,\n            anchorPoint:cc.p(0.5,0.5),\n            position:cc.p(0,0),\n            scale:1.0,\n            onChange:function(){},\n            onEvent:function(){},\n        },opts);\n        var slider = new ccui.Slider();\n        slider.setTouchEnabled(true);\n        slider.setScale(opts.scale);\n        slider.setAnchorPoint(opts.anchorPoint);\n        slider.setPosition(opts.position);\n        slider.loadBarTexture(getResourceAlias(opts.barTexture));\n        slider.loadSlidBallTextures(getResourceAlias(opts.buttonTexture), getResourceAlias(opts.buttonTextureClicked), \"\");\n        slider.loadProgressBarTexture(getResourceAlias(opts.progressBarTexture));\n        slider.addEventListener((sender,type)=>{\n            switch (type) {\n                case ccui.Slider.EVENT_PERCENT_CHANGED:\n                    opts.onChange(sender.getPercent().toFixed(0));\n                    break;\n            }\n            opts.onEvent(sender, type);\n        });\n        root.addChild(slider);\n        return slider;\n    },\n\n    makeMaskedSprite: function(root, opts) {\n        var spr = new cc.Sprite(\"#\" + opts.sprite);\n        spr.setScale(opts.scale || 1);\n        var maskNode = cc.Sprite.create(\"#\" + opts.mask);\n        maskNode.setScale(opts.scale || 1);\n        var clipping = cc.ClippingNode.create(maskNode);\n        clipping.setAlphaThreshold(0.5);\n        clipping.addChild(spr, 0);\n\n        clipping.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        clipping.setPosition(opts.position || cc.p(0, 0));\n        root.addChild(clipping, opts.zOrder || 0);\n        return spr;\n    },\n\n    makeListView: function(root, opts) {\n        var listView = ccui.ListView.create();\n        listView.setDirection(opts.direction || ccui.ScrollView.DIR_VERTICAL);\n        listView.setAnchorPoint(opts.anchorPoint || cc.p(0.5, 0.5));\n        listView.setPosition(opts.position || cc.p(0, 0));\n        listView.setBounceEnabled(true);\n        listView.setContentSize(opts.contentSize || cc.size(0, 0));\n        listView.setClippingType(opts.clippingType || ccui.Layout.CLIPPING_SCISSOR);\n        listView.setClippingEnabled(true);\n        root.addChild(listView, opts.zOrder || 0);\n        return listView;\n    },\n\n    makeProgressBar: function(root, opts) {\n        var bar = ccui.LoadingBar.create();\n        bar.loadTexture(opts.sprite, ccui.Widget.PLIST_TEXTURE);\n\n        if (opts.scale) {\n            bar.setScale(opts.scale);\n        }\n\n        if (opts.scaleX) {\n            bar.setScaleX(opts.scaleX);\n        }\n\n        if (opts.scaleY) {\n            bar.setScaleY(opts.scaleY);\n        }\n\n        bar.setPosition(opts.position || cc.p(0, 0));\n        bar.setPercent(opts.percent || 0);\n        root.addChild(bar, opts.zOrder || 0);\n        return bar;\n    },\n\n    relativeTo: function(root, relative, x, y) {\n        const relativeHorz = (relative >> 2) & 0b11;\n        const relativeVert = relative & 0b11;\n\n        const rootContentSize = root.getContentSize();\n\n        switch (relativeHorz) {\n            case 1:\n                x = rootContentSize.width / 2 + x;\n                break;\n            case 2:\n                x = rootContentSize.width - x;\n                break;\n        }\n\n        switch (relativeVert) {\n            case 0:\n                y = rootContentSize.height - y;\n                break;\n            case 1:\n                y = rootContentSize.height / 2 + y;\n                break;\n        }\n\n        return cc.p(x, y);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/ui.js","module.exports = function approxDistance (dx, dy) {\n    var min, max, approx;\n\n    if (dx < 0) dx = -dx;\n    if (dy < 0) dy = -dy;\n\n    if (dx < dy) {\n        min = dx;\n        max = dy;\n    } else {\n        min = dy;\n        max = dx;\n    }\n\n    approx = max * 1007 + min * 441;\n    if (max < min << 4) approx -= max * 40;\n\n    // add 512 for proper rounding\n    return (approx + 512) / 1024;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/approxDistance.js","// @flow\n\nimport apiMiddleware from './api';\nimport storageMiddleware, { loadState } from './storage';\nimport nextMiddleware from './next';\n\nconst middlewares = [apiMiddleware, storageMiddleware, nextMiddleware];\n\nclass Store {\n    state = {};\n    _reducers = {};\n    _connectedScenes = [];\n\n    constructor(reducers: any) {\n        this._reducers = reducers;\n        this.clear();\n    }\n\n    getState() {\n        return this.state;\n    }\n\n    clear() {\n        this.state = Object.keys(this._reducers).reduce((prev, curr) => Object.assign(prev, { [curr]: this._reducers[curr]() }), {});\n    }\n\n    restoreState() {\n        const storedStates = loadState(Object.keys(this.state));\n        for (var k in storedStates) {\n            this.state[k] = Object.assign({}, this.state[k], storedStates[k]);\n        }\n    }\n\n    dispatch(action: any) {\n        setImmediate(() => {\n            if (typeof (action) === \"function\") {\n                this.runDispatch(action(this.getState()), middlewares.slice(0));\n            } else {\n                this.runDispatch(action, middlewares.slice(0));\n            }\n        });\n    }\n\n    runDispatch(action: any, chain: []) {\n        var that = this;\n        var reducers = this._reducers;\n\n        if (chain.length == 0) {\n            setImmediate(() => {\n                const state = this.state = Object.keys(reducers).reduce((prev, curr) => Object.assign(prev, { [curr]: reducers[curr](this.state[curr], action) }), {});\n                const connectedScenes = this._connectedScenes;\n\n                action.callback && action.callback(action, state);\n                setImmediate(() => {\n                    connectedScenes.forEach(scene => scene.onStoreChange(state));\n                });\n            });\n        } else {\n            chain[0](this, action,\n                // next \n                (action) => {\n                    chain.splice(0, 1);\n                    that.runDispatch(action, chain);\n                }\n            );\n        }\n    }\n\n    discard(action: any) {\n        action.callback && action.callback(action, this.state);\n    }\n};\n\nlet _store: Store;\n\nexport const createStore = (reducers: any) => {\n    _store = new Store(reducers);\n    return _store;\n};\n\nexport const storeDispatch = (action: any) => _store && _store.dispatch(action);\n\nexport const connectStore = (scene: any): any => {\n    if (scene && scene.onStoreChange) {\n        _store._connectedScenes.push(scene);\n    }\n};\n\nexport const disconnectStore = (scene: any) => {\n    const idx = _store._connectedScenes.findIndex(scn => scn == scene);\n    if (idx >= 0) {\n        _store._connectedScenes.splice(idx, 1);\n    }\n};\n\nexport const getStoreState = (): any => _store && _store.getState();\n\n\n// WEBPACK FOOTER //\n// ./source/store/store.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/core-js/object/assign.js\n// module id = 5\n// module chunks = 0","var core = module.exports = { version: '2.5.1' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_core.js\n// module id = 6\n// module chunks = 0","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar ANIMATION_CACHE = {};\n\nvar EntityBase = cc.Node.extend({\n    ctor: function (team, presentation) {\n        this._super();\n\n        this.logic = {\n            HP: 0,\n            x: 0,\n            y: 0,\n            z: 0,\n            cool: 0\n        };\n\n        this.zShift = 0;\n        this.attr = {};\n        this.facing = 0;\n\n        this.team = team;\n        this.presentation = presentation;\n\n        this.state = Defs.UNIT_STATE_IDLE;\n        this.stateData = {\n            target: null,\n            time: 0\n        };\n\n        this._departurePosition = cc.p(0, 0);\n        this._futurePosition = cc.p(0, 0);\n\n        this.sprite = new cc.Sprite();\n        this.addChild(this.sprite);\n\n        this.setFacing(this.team === 0 ? 1 : -1);\n    },\n\n    isAlive: function () {\n        return this.logic.HP > 0;\n    },\n\n    isWounded: function () {\n        return this.logic.HP < this.attr.hp;\n    },\n\n    isActive: function () {\n        return this.logic.HP > 0 || this.stateData.time < 2000;\n    },\n\n    damage: function (attack) {\n        var amount = Math.max(attack - this.getDefense(), 1);\n        this.logic.HP -= amount;\n    },\n\n    heal: function (attack) {\n        this.logic.HP += attack;\n        if (this.logic.HP > this.attr.hp) {\n            this.logic.HP = this.attr.hp;\n        }\n    },\n\n    setUnitData: function (data) {\n        this.logic.HP = data.hp;\n        this.attr = data;\n\n        this.animAction = {};\n\n        var name = (data.name || \"\").toLowerCase();\n        const animation = data.animation || {\n            idle: { name: name, count: 1, loop: true },\n            attack: { name: name, count: 1, loop: false },\n            die: { name: name, count: 1, loop: false },\n            walk: { name: name, count: 1, loop: false }\n        };\n\n        for (var k in animation) {\n            this.animAction[k] = this.createAnimAction(animation[k], data.animation == null);\n        }\n    },\n\n    setFacing: function (value) {\n        this.facing = value;\n\n        var camRot = Camera.rotate;\n        if (value < 0) {\n            if (camRot === 0) {\n                this.setScaleX(1);\n            } else {\n                this.setScaleX(1);\n                this.setScaleY(-1);\n            }\n        } else {\n            if (camRot === 0) {\n                this.setScaleX(-1);\n            } else {\n                this.setScaleX(-1);\n                this.setScaleY(-1);\n            }\n        }\n    },\n\n    setLocation: function (x, y) {\n        this.logic.x = x;\n        this.logic.y = y;\n\n        this.syncPosition();\n    },\n\n    convertPosition: function (x, y) {\n        return cc.p(x * Defs.ARENA_CELL_WIDTH / 100, y * Defs.ARENA_CELL_HEIGHT / 100);\n    },\n\n    convertZ: function (z) {\n        return z * Defs.ARENA_CELL_HEIGHT / 100;\n    },\n\n    update: function (dt) {},\n\n    step: function (dt) {\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        return true;\n    },\n\n    canAttack: function (target) {\n        // TODO: air-borne ?\n        return true;\n    },\n\n    canSee: function (target) {\n        return this.getDistanceTo(target) < this.getSight();\n    },\n\n    getDistanceToPos: function (x, y) {\n        var dx = x - this.logic.x;\n        var dy = y - this.logic.y;\n        return approxDistance(dx, dy);\n    },\n\n    getDistanceTo: function (target) {\n        var dx = target.logic.x - this.logic.x;\n        var dy = target.logic.y - this.logic.y;\n        return approxDistance(dx, dy);\n    },\n\n    animatePosition: function () {\n        var t = this.presentation.timeFrameCounter / this.presentation.stepTime;\n        var pos = cc.p(\n            cc.lerp(this._departurePosition.x, this._futurePosition.x, t),\n            cc.lerp(this._departurePosition.y, this._futurePosition.y, t)\n        );\n        this.setLocalZOrder(Camera.rotate === 0 ? Defs.ARENA_HEIGHT - pos.y + this.zShift : pos.y + this.zShift);\n\n        pos.y += (Camera.rotate === 0 ? 1 : -1) * this.convertZ(this.logic.z);\n        this.setPosition(pos);\n    },\n\n    syncPosition: function () {\n        var pos = this.convertPosition(this.logic.x, this.logic.y);\n        this.setLocalZOrder(Camera.rotate === 0 ? Defs.ARENA_HEIGHT - pos.y + this.zShift : pos.y + this.zShift);\n\n        pos.y += (Camera.rotate === 0 ? 1 : -1) * this.convertZ(this.logic.z);\n        this.setPosition(pos);\n    },\n\n    stepLiveliness: function (dt) {\n        if (this.state === Defs.UNIT_STATE_DYING) {\n            this.stateData.time += dt;\n            if (this.stateData.time >= 2000) {\n                return false;\n            }\n        } else if (!this.isAlive()) {\n            this.state = Defs.UNIT_STATE_DYING;\n            this.stateData.time = 0;\n\n            this._departurePosition = this._futurePosition;\n\n            this.currentAction = this.intentAction = this.animAction.die;\n\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n\n        return true;\n    },\n\n    createAnimAction: function (data, isSingleFrame) {\n        var animationName = data.name;\n        var framesCount = data.count;\n        var animation = ANIMATION_CACHE[animationName];\n\n        if (!animation) {\n            var animFrames = [];\n            var i = 0;\n            var frame;\n            for (i = 0; i < framesCount; ++i) {\n                if (isSingleFrame) {\n                    frame = cc.spriteFrameCache.getSpriteFrame(animationName + \".png\");\n                } else {\n                    frame = cc.spriteFrameCache.getSpriteFrame(animationName + \"_\" + i + \".png\");\n                }\n\n                if (frame) {\n                    animFrames.push(frame);\n                }\n            }\n\n            animation = new cc.Animation(animFrames, 1.0 / Defs.ANIMATION_FPS);\n            ANIMATION_CACHE[animationName] = animation;\n        }\n\n        if (data.loop) {\n            return new cc.RepeatForever(new cc.Animate(animation));\n        }\n\n        return new cc.Animate(animation);\n    },\n\n    getSize: function () {\n        return this.attr.Size || 32;\n    },\n\n    getAttack: function () {\n        return this.attr.attack;\n    },\n\n    getAttackFor: function (targetAttr) {\n        var armor = targetAttr.armor || 'none';\n        var baseAttack = this.getAttack();\n\n        if (armor === 'heavy') {\n            var heavyAttack = this.attr.attackHeavy || 0;\n            return baseAttack + heavyAttack;\n        }\n\n        if (armor === 'light') {\n            var lightAttack = this.attr.attackLight || 0;\n            return baseAttack + lightAttack;\n        }\n\n        return baseAttack;\n    },\n\n    getDefense: function () {\n        return this.attr.defense;\n    },\n\n    getRange: function () {\n        return this.attr.Range || 500;\n    },\n\n    getSight: function () {\n        return this.attr.Sight || 1000;\n    },\n\n    getAttackCool: function () {\n        return this.attr.Cool || 1000;\n    },\n\n    getMoveSpeed: function () {\n        return this.attr.Speed || 300;\n    },\n\n    isOfflane: function () {\n        if (this.team === 0) {\n            return this.logic.y > Defs.BATTLE_HEIGHT * (2 * Defs.ARENA_CELL_HEIGHT) / 100;\n        }\n\n        return this.logic.y < Defs.BATTLE_HEIGHT * (2 * Defs.ARENA_CELL_HEIGHT) / 100;\n    }\n});\n\nmodule.exports = EntityBase;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityBase.js","const _texts = {\n    ok: {\n        en: 'ok',\n        vn: 'ok'\n    },\n    cancel: {\n        en: 'cancel',\n        vn: 'hủy'\n    },\n    yes: {\n        en: 'yes',\n        vn: 'có'\n    },\n    no: {\n        en: 'no',\n        vn: 'không'\n    },\n    instantPlay: {\n        en: 'instant play',\n        vn: 'chơi ngay'\n    },\n    option: {\n        en: 'option',\n        vn: 'tùy chọn'\n    },\n    help: {\n        en: 'help',\n        vn: 'hướng dẫn'\n    },\n    about: {\n        en: 'about',\n        vn: 'giới thiệu'\n    },\n    logout: {\n        en: 'logout',\n        vn: 'đăng xuất'\n    },\n    battle: {\n        en: 'battle',\n        vn: 'chiến'\n    },\n    train: {\n        en: 'train',\n        vn: 'luyện'\n    },\n    collect: {\n        en: 'collect',\n        vn: 'nhận thưởng'\n    },\n    level: {\n        en: 'level',\n        vn: 'cấp độ'\n    },\n    jackpot: {\n        en: 'jackpot',\n        vn: 'jackpot'\n    },\n    bet: {\n        en: 'bet',\n        vn: 'cược'\n    },\n    pleaseWait: {\n        en: 'please wait',\n        vn: 'vui lòng chờ'\n    },\n    noMoreBet: {\n        en: 'no more bet',\n        vn: 'không nhận cược'\n    },\n    blackjack_insurance: {\n        en: 'insurance?',\n        vn: 'insurance?'\n    },\n    pot: {\n        en: 'pot',\n        vn: 'pot'\n    },\n    total_bet: {\n        en: 'total bet',\n        vn: 'cược'\n    },\n    total_win: {\n        en: 'total win',\n        vn: 'thắng'\n    },\n    buy_in: {\n        en: 'buy in',\n        vn: 'tiền túi'\n    },\n    notEnoughMoney: {\n        en: 'not enough cash',\n        vn: 'không đủ tiền'\n    },\n    maxBetAlready: {\n        en: 'max bet already',\n        vn: 'không thể cược thêm'\n    },\n    inviteFriendMessage: {\n        en: 'play this game',\n        vn: 'play this game'\n    },\n    game_guide: {\n        en: 'game guide',\n        vn: 'hướng dẫn chơi'\n    },\n    option_setting: {\n        en: 'setting',\n        vn: 'tùy chỉnh'\n    },\n    option_notification: {\n        en: 'notification',\n        vn: 'thông báo'  \n    },\n    music: {\n        en: 'music',\n        vn: 'nhạc'\n    },\n    sound: {\n        en: 'sound',\n        vn: 'âm thanh'\n    },\n    vibration: {\n        en: 'viration',\n        vn: 'rung'\n    },\n    general_notification: {\n        en: 'general',\n        vn: 'trung tâm'\n    },\n    friends: {\n        en: 'friends',\n        vn: 'bạn bè'\n    },\n    friends_notification: {\n        en: 'friends',\n        vn: 'bạn bè'\n    },\n    option_account: {\n        en: 'account',\n        vn: 'tài khoản'\n    },\n    spin: {\n        en: 'spin',\n        vn: 'quay'\n    },    \n    ranking: {\n        en: 'ranking',\n        vn: 'xếp hạng'\n    }\n}\n\nfunction get(key) {\n    return _texts[key][currentLanguage];\n}\n\nfunction getCaps(key) {\n    return _texts[key][currentLanguage].toUpperCase();\n}\n\nfunction getCapFirst(key) {\n    var txt = _texts[key][currentLanguage];\n    return txt.charAt(0).toUpperCase() + txt.slice(1);\n}\n\nfunction getCapsColon(key) {\n    return _texts[key][currentLanguage].toUpperCase() + ':';\n}\n\nfunction shortenText(text, maxLength) {\n    text = text || '';\n    return text.length <= maxLength ? text : text.substring(0, maxLength) + '...';\n}\n\nmodule.exports = {\n    get,\n    getCaps,\n    getCapFirst,\n    shortenText,\n    getCapsColon\n}\n\n\n// WEBPACK FOOTER //\n// ./source/localize.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport EntityEffectHit1 from \"./entityEffectHit1\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityMeleeFighter = EntityBase.extend({\n    setUnitData (data) {\n        this._super(data);\n        this.currentAction = this.animAction.idle;\n        this.sprite.runAction(this.currentAction);\n    },\n\n    update: function (dt) {\n        this._super(dt);\n\n        this.animatePosition();\n    },\n\n    step: function (dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === Defs.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === Defs.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForEnemy();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = approxDistance(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = Defs.UNIT_STATE_ATTACK;\n                }\n            } else {\n                if (this.isOfflane()) {\n                    this.state = Defs.UNIT_STATE_IDLE;\n                } else {\n                    var v = dt * this.getMoveSpeed() / 1000;\n                    if (this.team === 0) {\n                        this.logic.y += v;\n                    } else {\n                        this.logic.y -= v;\n                    }\n                }\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = Defs.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n                    }\n                }\n            } else {\n                this.state = Defs.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    createEffect: function (target) {\n        var hit = new EntityEffectHit1(this.team, this.presentation, this, target);\n        this.presentation.addEffect(hit);\n    },\n\n    lookForEnemy: function () {\n        var enemy = this.presentation.findEnemy(this);\n        if (enemy) {\n            this.stateData.target = enemy;\n        }\n    },\n\n    updateIdle: function () {\n        var enemy = this.presentation.findEnemy(this);\n        if (enemy) {\n            this.state = Defs.UNIT_STATE_WALK;\n            this.stateData.target = enemy;\n        } else {\n            if (this.isOfflane()) {\n                var goal = this.presentation.findGoal(this);\n                if (goal) {\n                    this.state = Defs.UNIT_STATE_WALK;\n                    this.stateData.target = goal;\n                }\n            } else {\n                this.state = Defs.UNIT_STATE_WALK;\n                this.stateData.target = null;\n            }\n        }\n    }\n});\n\nmodule.exports = EntityMeleeFighter;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityMeleeFighter.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/core-js/json/stringify.js\n// module id = 10\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_global.js\n// module id = 11\n// module chunks = 0","// @flow\n\nimport { connectStore, disconnectStore } from '../store/store';\nimport AlertLayer from './alertLayer';\nimport WaitingLayer from './waitingLayer';\n\nvar BaseScene = cc.Scene.extend({\n    ctor: function(opt) {\n        opt = opt || {\n            sprites: [],\n            persitSprites: [],\n            sounds:[]\n        }\n        this._super();\n        this.state = {};         \n        this._waitingLayer = null;\n        this._alertLayer = null;         \n        this._loadingCount = 0;\n        this._sprites = opt.sprites || [];\n        this._persitSprites = opt.persitSprites || [];\n        this._sounds = opt.sounds || [];\n    },    \n\n    onEnter: function () {\n        this._super();  \n        connectStore(this);\n        this.loadResource();\n        this.loadSound();\n    },\n    checkReady:function(isDone)\n    {\n        if(this._loadingCount==0)\n        {\n            this.onLoading && this.onLoading();\n        }\n        this._loadingCount += isDone ? -1 : 1;\n        if(this._loadingCount==0)\n        {\n            this.onReady && this.onReady();\n        }\n    },\n    loadSound:function()\n    {\n        this.checkReady(false);\n        if(this._sounds.length)\n        {\n            Sound.preload(this._sounds,_=>{\n                this.checkReady(true);\n            });\n        }else{\n            this.checkReady(true);\n        }\n    },\n    loadResource:function(){\n        this.checkReady(false);\n        if (this._sprites.length||this._persitSprites.length) {\n            var sprites = [].concat(this._sprites,this._persitSprites);\n            loadResources(sprites, () => {\n                sprites.map(sprite=>{\n                    addSpriteFramesFromResource(sprite);\n                });\n                this.checkReady(true);\n            });\n        }else{\n            this.checkReady(true);\n        }\n    },\n    unloadResource:function()\n    {\n        if (this._sprites.length) {\n            this._sprites.map(sprite => {\n                removeSpriteFramesFromResource(sprite);\n            });\n        }\n    },\n    onExit: function() {\n        this._super();\n        disconnectStore(this);\n        this.unloadResource();\n    },\n\n    onLoading:function()\n    {\n        this.showWaiting(true);\n    },\n\n    onReady: function()\n    {\n        this.showWaiting(false);\n    },\n\n    setState: function(state, cb) {\n        const newState = Object.assign({}, this.state, state);             \n        this.onNextState && this.onNextState(newState);          \n        this.state = newState;\n        this.onStateChange && this.onStateChange(this.state);            \n        cb && cb();           \n    },\n\n    showWaiting: function(visible) {        \n        if (visible && !this._waitingLayer) {\n            this._waitingLayer = new WaitingLayer(cc.winSize);\n            this.addChild(this._waitingLayer, 9000);\n        }\n        this._waitingLayer && this._waitingLayer.setVisible(visible);\n    },\n\n    showError: function(error, onClick) {\n        if (!this._alertLayer) {\n            this._alertLayer = new AlertLayer(cc.winSize);\n            this.addChild(this._alertLayer, 9900);\n        }\n        this._alertLayer.setError(error, onClick);\n        this._alertLayer.setVisible(true);\n    }    \n});\n\nmodule.exports = BaseScene;\n\n\n\n// WEBPACK FOOTER //\n// ./source/common/baseScene.js","module.exports = {\n    apiUrl: `${window.location.origin}/api`,\n    socketUrl: `wss://${window.location.host}`,\n    //apiUrl: 'http://128.199.202.184/api',\n    //socketUrl: 'ws://128.199.202.184/socket',\n    localStorageName: \"gamejam.rts\"\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/config/production.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/helpers/classCallCheck.js\n// module id = 14\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/helpers/createClass.js\n// module id = 15\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/helpers/defineProperty.js\n// module id = 16\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_descriptors.js\n// module id = 17\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_export.js\n// module id = 18\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_fails.js\n// module id = 19\n// module chunks = 0","// @flow\nexport const LOGIN = \"LOGIN\";\n\nexport const login = (payload: any, callback: Function) => ({\n    type: LOGIN,\n    payload,\n    callback,\n    next: {\n        persist: [\"authenticate\"]\n    }\n});\n\nconst actionHandler = {\n    [LOGIN]: (state, action) => {\n        return Object.assign(state, {\n            id: action.payload.id\n        });\n    }\n}\n\nconst initialState = {\n    accessToken: null\n}\n\nexport const authenticate = (state: any = initialState, action: any) => {\n    const handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n}\n\nexport default authenticate;\n\n\n// WEBPACK FOOTER //\n// ./source/reducer/authenticate.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityEffectBullet = EntityBase.extend({\n    ctor: function (team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 300;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = approxDistance(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.state = Defs.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function (dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function (dt) {\n        this._super(dt);\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = approxDistance(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = approxDistance(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = Defs.UNIT_STATE_ATTACK;\n                this.target.damage(this.owner.getAttackFor(this.target.attr));\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === Defs.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectBullet;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityEffectBullet.js","// @flow\nimport Localize from '../localize';\n\nimport ui from '../utils/ui';\n\nvar AlertLayer = ccui.Layout.extend({\n    ctor: function() {\n        this._super();\n\n        cc.spriteFrameCache.addSpriteFrames('mainmenu.plist');\n\n        this._error = {};\n        this._onClick = null;\n\n        var size: Size = cc.winSize;\n        var center = cc.p(size.width / 2, size.height /2);\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n        this.setTouchEnabled(true);\n        this.setSwallowTouches(true);        \n\n        var panel = ui.makeImageView(this, {\n            sprite: 'popup_frame.png',\n            scale9Size: cc.size(900, 520),\n            position: ui.relativeTo(this, ui.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this._text = ui.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            position: ui.relativeTo(panel, ui.CENTER, 0, 40),\n            size: cc.size(800, 250),\n            ignoreContentAdaptWithSize: false\n        });                        \n\n        var button = ui.makeButton(panel, {\n            normal: \"button_blue.png\", \n            pressed: \"button_blue_pressed.png\", \n            anchorPoint: cc.p(0.5, 0),\n            position: ui.relativeTo(panel, ui.CENTER_BOTTOM, 0, 30),\n            listener: this.touchEvent,\n            listenerTarget: this\n        });\n\n        ui.makeText(button, {\n            text: Localize.getCaps('ok'),\n            font: getBigFontName(),\n            fontSize: 32,\n            position: ui.relativeTo(button, ui.CENTER, 0, 0)\n        });\n\n        return true;\n    },\n\n    setError: function(error, onClick) {\n        this._onClick = onClick;\n\n        this._error = error;        \n        this._text.setString(JSON.stringify(this._error));\n    },\n\n    touchEvent: function(sender, type) {\n        if (type == ccui.Widget.TOUCH_ENDED)\n        {            \n            this.setVisible(false);\n            this._onClick && this._onClick();   \n        }\n    }\n});\n\nexport default AlertLayer;\n\n\n// WEBPACK FOOTER //\n// ./source/common/alertLayer.js","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_is-object.js\n// module id = 23\n// module chunks = 0","// @flow\nexport const START_BATTLE = \"START_BATTLE\";\n\nexport const startBattle = (payload: any, callback: Function) => ({\n    type: START_BATTLE,\n    api: {\n        endpoint: '/battle/start',\n        payload\n    },\n    callback\n});\n\nconst actionHandler = {\n    [START_BATTLE]: (state, action) => {\n        const result = action.response;\n        return Object.assign(state, result);\n    }\n}\n\nconst initialState = {\n}\n\nexport const room = (state: any = initialState, action: any) => {\n    const handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n}\n\nexport default room;\n\n\n\n// WEBPACK FOOTER //\n// ./source/reducer/room.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityEffectHit1 = EntityBase.extend({\n    ctor: function (team, presentation, owner, target) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 600;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = target.logic.x;\n        this.logic.y = target.logic.y;\n        this.logic.z = target.getSize();\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.animAction = this.createAnimAction({ name: \"hit1_idle\", count: 1, loop: false });\n        this.state = Defs.UNIT_STATE_IDLE;\n    },\n\n    step: function (dt) {\n        this._super(dt);\n\n        if (this.life <= 400 && this.state === Defs.UNIT_STATE_IDLE) {\n            this.sprite.runAction(this.animAction);\n            this.state = Defs.UNIT_STATE_ATTACK;\n\n            this.target.damage(this.owner.getAttack());\n        }\n\n        this.life -= dt;\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectHit1;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityEffectHit1.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport EntityEffectHit1 from \"./entityEffectHit1\";\nimport EntityEffectBullet from \"./entityEffectBullet\";\n\nvar EntityTower = EntityBase.extend({\n    setUnitData (data) {\n        this._super(data);\n        this.sprite.runAction(this.animAction.idle);\n    },\n\n    step: function (dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === Defs.UNIT_STATE_DYING) return true;\n\n        this._super(dt);\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            var enemy = this.presentation.findEnemy(this);\n            if (enemy) {\n                this.stateData.target = enemy;\n                this.sprite.runAction(this.animAction.attack);\n                this.state = Defs.UNIT_STATE_ATTACK;\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    this.logic.cool = this.getAttackCool();\n\n                    var hit = new EntityEffectBullet(this.team, this.presentation, this, target, 'effect_bulletc_idle');\n                    this.presentation.addEffect(hit);\n                }\n            } else {\n                this.sprite.runAction(this.animAction.idle);\n                this.state = Defs.UNIT_STATE_IDLE;\n            }\n        }\n        return true;\n    }\n});\n\nmodule.exports = EntityTower;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityTower.js","var ObjectPool = function(opts) {\n    var { onCreate, onShow, onHide, onDestroy } = opts;\n\n    this.list = [];\n\n    this.onCreate = onCreate;\n    this.onShow = onShow;\n    this.onHide = onHide;\n    this.onDestroy = onDestroy;\n};\n\nObjectPool.prototype.clear = function() {\n    for (var i = this.length - 1; i >= 0; --i) {\n        this.onDestroy.call(this.list[i]);\n    }\n    this.list = [];\n};\n\nObjectPool.prototype.push = function(obj) {\n    this.onHide.call(obj);\n    this.list.push(obj);\n    return obj;\n};\n\nObjectPool.prototype.pop = function() {\n    var obj;\n\n    if (this.list.length > 0) {\n        obj = this.list[this.list.length - 1];\n        --this.list.length;\n    } else {\n        obj = this.onCreate();\n    }\n\n    this.onShow.call(obj);\n    return obj;\n};\n\nmodule.exports = ObjectPool;\n\n\n\n// WEBPACK FOOTER //\n// ./source/common/objectPool.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/core-js/object/define-property.js\n// module id = 28\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/set-immediate\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/core-js/set-immediate.js\n// module id = 29\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_cof.js\n// module id = 30\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_ctx.js\n// module id = 31\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_defined.js\n// module id = 32\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_dom-create.js\n// module id = 33\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_iobject.js\n// module id = 34\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-dp.js\n// module id = 35\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-keys.js\n// module id = 36\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-integer.js\n// module id = 37\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-iobject.js\n// module id = 38\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-object.js\n// module id = 39\n// module chunks = 0","// @flow\nexport const SET_APP_STATE = 'SET_APP_STATE';\nexport const LOAD_SPRITE = 'LOAD_SPRITE';\nexport const LOAD_SOUND = 'LOAD_SOUND';\nexport const UNLOAD_SPRITE = 'UNLOAD_SPRITE';\nexport const UNLOAD_SOUND = 'UNLOAD_SOUND';\n\n\nexport const setAppState = (data: any, callback: Function) => ({\n    type: SET_APP_STATE,\n    data,\n    callback,\n    next: {\n        persist: ['appState']\n    }\n});\n\nconst actionHandler = {\n    [SET_APP_STATE]: (state, action) => {\n        return Object.assign({}, state, action.data);\n    }\n}\n\nconst initialState = {\n    \n}\n\nexport const appState = (state: any = initialState, action: any) => {\n    const handler = action && actionHandler[action.type];\n    return handler ? handler(state, action) : state;\n}\n\nexport default appState;\n\n\n// WEBPACK FOOTER //\n// ./source/reducer/appState.js","import BaseScene from \"../common/baseScene\";\nimport ui from \"../utils/ui\";\n\nimport config from \"config\";\nimport Localize from \"../localize\";\nimport { storeDispatch, getStoreState } from \"../store/store\";\n\nimport ObjectPool from \"../common/objectPool\";\nimport Battle from \"../battle\";\n\nvar InGameScene = BaseScene.extend({\n    ctor: function () {\n        this._super({\n            sprites: [\"battle.plist\", \"buildings.plist\", \"pokemons.plist\", \"effects.plist\"]\n        });\n    },\n    onEnter: function () {\n        this._super();\n    },\n    onLoading: function () {\n        this._super();\n        cc.log(\"Loading battle...\");\n    },\n    onReady: function () {\n        this._super();\n        cc.log(\"Resource ready\");\n        this.battle = new Battle();\n\n        this.addChild(this.battle);\n        this.battle.init();\n        this.battle.connect();\n        this.scheduleUpdate();\n    },\n    onExit: function () {\n        this._super();\n        this.unscheduleUpdate();\n        this.battle.close();\n    },\n\n    update: function (dt) {\n        this.battle.update(dt);\n    },\n\n    onAction: function (touch, event) {\n        if (this.battle.isReady()) {\n            // TODO\n        }\n    }\n});\n\nmodule.exports = InGameScene;\n\n\n\n// WEBPACK FOOTER //\n// ./source/scenes/InGameScene.js","import BaseScene from \"../common/baseScene\";\nimport ui from \"../utils/ui\";\n\nimport Localize from \"../localize\";\nimport { storeDispatch, getStoreState } from \"../store/store\";\nimport { startBattle } from \"../reducer/room\";\n\nvar LoadingSceneLayer = cc.Layer.extend({\n    ctor: function () {\n        this._super();\n    }\n});\n\nvar LoadingScene = BaseScene.extend({\n    ctor: function () {\n        this._super({\n            sprites: [ \"splash.plist\" ]\n        });\n    },\n\n    onReady: function () {\n        this._super();\n        this.addChild(new LoadingSceneLayer());\n        var authenticate = getStoreState().authenticate;\n        storeDispatch(\n            startBattle(authenticate, (result) => {\n                if (result.error) {\n                    console.error(result.error);\n                    cc.director.runScene(new window.SplashScene());\n                } else {\n                    cc.director.runScene(new window.InGameScene());\n                }\n            })\n        );\n    }\n});\n\nmodule.exports = LoadingScene;\n\n\n\n// WEBPACK FOOTER //\n// ./source/scenes/LoadingScene.js","import BaseScene from \"../common/baseScene\";\nimport ui from \"../utils/ui\";\n\nimport Localize from \"../localize\";\nimport { storeDispatch, getStoreState } from \"../store/store\";\nimport { login } from \"../reducer/authenticate\";\n\nvar MenuSceneLayer = cc.Layer.extend({\n    ctor: function () {\n        this._super();\n        ui.makeImageView(this, { sprite: \"logo.png\", position: ui.relativeTo(this, ui.TOP_CENTER, 320, 200) });\n        this.initUI();\n    },\n    initUI: function () {\n        let instantPlay = this.addButton(\"instantPlay\", this.onInstantPlay, {\n            position: ui.relativeTo(this, ui.CENTER, 0, 0)\n        });\n        // let option = this.addButton(\"option\", this.onEnterOption, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -50)\n        // });\n        // let help = this.addButton(\"help\", this.onInstantPlay, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -200)\n        // });\n        // let about = this.addButton(\"about\", this.onInstantPlay, {\n        //     position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, -350)\n        // });\n    },\n    addButton: function (text, handle, opt) {\n        opt = Object.assign({\n            normal: \"button_green.png\",\n            pressed: \"button_green_pressed.png\",\n            anchorPoint: cc.p(0.5, 0.5),\n            position: ui.relativeTo(this, ui.LEFT_MIDDLE, 30, 30),\n            listener: handle,\n            listenerTarget: this,\n            scale: 2\n        }, opt || {});\n\n        var button = ui.makeButton(this, opt);\n        ui.makeText(button, {\n            text: Localize.getCaps(text),\n            font: getBigFontName(),\n            fontSize: 32,\n            position: ui.relativeTo(button, ui.CENTER, 0, 0),\n            shadow: true\n        });\n        return button;\n    },\n    onInstantPlay: function (sender, type) {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            setImmediate(() => {\n                Sound.playSfx(\"click\");\n                Sound.stopMusic();\n                var authenticate = getStoreState().authenticate;\n                var userId = authenticate.id || Math.random().toString(36).substr(2, 9);\n                storeDispatch(login({ id: userId }, () => {\n                    cc.director.runScene(new window.LoadingScene())\n                }));\n            });\n        }\n    },\n    onEnterOption: function (sender, type)\n    {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            Sound.playSfx(\"click\");\n            setImmediate(() => {\n\n            });\n        }\n    }\n});\n\nvar MenuScene = BaseScene.extend({\n    ctor: function () {\n        this._super();\n    },\n    onEnter: function () {\n        this._super();\n        this.addChild(new MenuSceneLayer());\n    },\n    onReady:function()\n    {\n        this._super();\n        Sound.playMusic(\"bg_music\",true);\n    }\n});\n\nmodule.exports = MenuScene;\n\n\n\n// WEBPACK FOOTER //\n// ./source/scenes/MenuScene.js","import BaseScene from \"../common/baseScene\";\nimport ui from \"../utils/ui\";\n\nimport Localize from \"../localize\";\nimport { storeDispatch, getStoreState } from \"../store/store\";\nimport { login } from \"../reducer/authenticate\";\nimport alertLayer from \"../common/alertLayer\";\n\nvar SplashSceneLayer = cc.Layer.extend({\n    ctor: function() {\n        this._super();\n    }\n});\n\nvar SplashScene = BaseScene.extend({\n    ctor: function() {\n        this._super({\n            persitSprites:[\n                \"splash.plist\",\n                \"ui.plist\"\n            ],\n            sounds:[\n                \"bg_music\",\n                \"click\"\n            ]\n        });\n    },\n    onReady:function(){\n        this._super();\n        this.addChild(new SplashSceneLayer());\n\n        setTimeout(function(){\n            cc.director.runScene(new window.MenuScene())\n        },500);\n    }\n});\n\nmodule.exports = SplashScene;\n\n\n\n// WEBPACK FOOTER //\n// ./source/scenes/SplashScene.js","class Sound {\n    _sound_pool = {};\n    _sfx = {};\n    preload(list, cb) {\n        var soundExtension = this.getSoundExtension();\n        var sources = [];\n        list.map(path=>{\n            sources.push(path+soundExtension);\n        });\n        loadResources(sources,_=>{\n            cb && cb();\n        });\n    }\n\n    getSoundExtension() {\n        var a = document.createElement('audio');\n        if(!!(a.canPlayType && a.canPlayType('audio/mpeg;').replace(/no/, ''))) return \".mp3\";\n        if (!!(a.canPlayType && a.canPlayType('audio/ogg;').replace(/no/, ''))) return \".ogg\";\n        return false;\n    }\n\n    getUrl(name)\n    {\n        return getResourceAlias(name+this.getSoundExtension());\n    }\n\n    setMusicVolume(level)\n    {\n        cc.audioEngine.setMusicVolume(level);\n    }\n    getMusicVolume(level) {\n        cc.audioEngine.setMusicVolume(level);\n    }\n\n    setSfxVolume(level) {\n        cc.audioEngine.setEffectsVolume(level);\n    }\n    getSfxVolume(level) {\n        cc.audioEngine.getEffectsVolume(level);\n    }\n\n    playMusic(name,loop=true) {\n        cc.audioEngine.playMusic(this.getUrl(name), loop);\n    }\n\n    stopMusic() {\n        cc.audioEngine.stopMusic();\n    }\n\n    playSfx(name, loop = false) {\n        this._sfx[name] = cc.audioEngine.playEffect(this.getUrl(name), loop);\n    }\n\n    stopSfx(name) {\n        cc.audioEngine.stopEffect(this._sfx[name]);\n    }\n\n    stopAllSfx(name) {\n        cc.audioEngine.stopAllEffects();\n    }\n\n    stopAll()\n    {\n        stopMusic();\n        stopAllEffects();\n    }\n}\n\nglobal.sound = global.sound || new Sound();\n\nmodule.exports = sound;\n\n\n\n// WEBPACK FOOTER //\n// ./source/sound/sound.js","import { createStore } from \"./store/store\";\nimport appState from \"./reducer/appState\";\nimport authenticate from \"./reducer/authenticate\";\nimport room from \"./reducer/room\";\n\n// @flow\nif (!window) {\n    window = {};\n}\nwindow.MenuScene = require(\"./scenes/MenuScene\");\nwindow.SplashScene = require(\"./scenes/SplashScene\");\nwindow.InGameScene = require(\"./scenes/InGameScene\");\nwindow.LoadingScene = require(\"./scenes/LoadingScene\");\nwindow.Sound = require(\"./sound/sound\");\n\nwindow.initApp = function() {\n    console.log(\"init app...\");\n\n    const store = createStore({\n        appState,\n        authenticate,\n        room\n    });\n\n    store.restoreState();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/app.js","import ui from \"../utils/ui\";\n\nimport ObjectPool from \"../common/objectPool\";\n\nimport Defs from \"./defs\";\nimport CardButton from \"./cardButton\";\n\nvar ActionBar = cc.Node.extend({\n    ctor: function (opts) {\n        this._super();\n\n        this.frame = ui.makeImageView(this, {\n            sprite: \"action_bar_panel.png\",\n            scale9Size: cc.size(Defs.ACTION_FIELD_WIDTH, Defs.ACTION_FIELD_HEIGHT),\n            anchorPoint: cc.p(0, 0),\n            position: ui.relativeTo(this, ui.LEFT_BOTTOM, (Defs.SCREEN_SIZE.width - Defs.ACTION_FIELD_WIDTH) / 2, Defs.ACTION_BUTTON_HEIGHT + 48),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this.socket = opts.socket;\n        this.team = opts.team;\n        this.presentation = null;\n\n        this._opts = opts;\n        this.cardButtons = [];\n        this.hand = [];\n        this.selectingCard = null;\n        this.referenceCount = 1;\n\n        this.formationLayout = [];\n        this.formation = null;\n\n        var self = this;\n        this._touchListener = cc.EventListener.create({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            onTouchBegan: self.onTouchBegan.bind(self),\n            onTouchMoved: self.onTouchMoved.bind(self),\n            onTouchEnded: self.onTouchEnded.bind(self),\n            onTouchCancelled: self.onTouchCancelled(self)\n        });\n\n        cc.eventManager.addListener(self._touchListener, self);\n    },\n\n    setHand: function (hand) {\n        this.hand = hand;\n        for (var i = 0; i < hand.length; ++i) {\n            var pokemon = Defs.POKEMONS.find((it) => it.pokedex === hand[i]);\n            this.addCard(i, pokemon);\n        }\n\n        this.selectingCard = this.cardButtons[0];\n    },\n\n    addCard: function (index, pokemon) {\n        var button = new CardButton({\n            actionBar: this\n        });\n        button.setPosition(index * (Defs.ACTION_BUTTON_WIDTH + Defs.ACTION_BUTTON_GAP) + Defs.ACTION_BUTTON_GAP, Defs.ACTION_BUTTON_GAP);\n        button.setPokemon(pokemon, this.team);\n\n        this.cardButtons.push(button);\n        this.addChild(button, 0);\n    },\n\n    select: function (card) {\n        this.selectingCard = card;\n\n        for (let i = 0; i < this.cardButtons.length; ++i) {\n            this.cardButtons[i].unselect();\n        }\n\n        card.select();\n    },\n\n    setFormation: function (formation) {\n        this.formation = formation;\n\n        for (let i = 0; i < formation.units.length; ++i) {\n            const unit = formation.units[i];\n            let deployed = this.formationLayout.find((it) => it.ref === unit.ref);\n            if (!deployed) {\n                const pokemon = Defs.POKEMONS.find((it) => it.pokedex === unit.name);\n\n                deployed = ui.makeSprite(this.frame, {\n                    sprite: pokemon.name.toLowerCase() + '.png'\n                });\n\n                this.formationLayout.push(deployed);\n            }\n\n            deployed.setPosition(unit.x * 64 + Defs.ACTION_FIELD_WIDTH / 2 + 32, unit.y * 64 + 32);\n        }\n    },\n\n    onTouchEnded: function (touch, event) {\n    },\n\n    onTouchBegan: function (touch, event) {\n        if (this.containsTouchLocation(touch)) {\n            var origin = this.frame.getPosition();\n            var pt = touch.getLocation();\n            var x = pt.x - origin.x;\n            var y = pt.y - origin.y;\n\n            x -= Defs.ACTION_FIELD_WIDTH / 2;\n\n            x = Math.floor(x / 64);\n            y = Math.floor(y / 64);\n\n            var unitData = Defs.POKEMONS.find((it) => it.pokedex === this.selectingCard.pokedex);\n            if (!unitData) return;\n\n            var cost = unitData.total || 100;\n            if (this.presentation.gold < cost * 1000) return;\n\n            let isCancelled = false;\n            var formation = this.formation;\n            if (formation) {\n                for (let i = 0; i < formation.units.length; ++i) {\n                    const unit = formation.units[i];\n                    if (unit.x === x && unit.y === y) {\n                        isCancelled = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!isCancelled) {\n                this.presentation.gold -= cost * 1000;\n                this.socket.send({ x, y, type: \"deploy\", name: this.selectingCard.pokedex, ref: this.referenceCount++ });\n            }\n        }\n    },\n\n    onTouchMoved: function (touch, event) {\n    },\n\n    onTouchCancelled: function (touch, event) {\n    },\n\n    containsTouchLocation: function(touch) {\n        var pt = touch.getLocation();\n        var sz = this.frame.getContentSize();\n        var bb = cc.rect(0, 0, sz.width, sz.height);\n        return cc.rectContainsPoint(bb, this.frame.convertToNodeSpace(pt));\n    }\n});\n\nmodule.exports = ActionBar;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/actionBar.js","import SocketClient from \"../common/socketClient\";\nimport { getStoreState } from \"../store/store\";\nimport Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport Presentation from \"./presentation\";\nimport ActionBar from \"./actionBar\";\nimport ui from \"../utils/ui\";\nimport shuffle from \"../utils/shuffle\";\nimport alertLayer from \"../common/alertLayer\";\nimport NotifyLayer from \"../common/notifyLayer\";\nimport TopBar from \"./topBar\";\n\nvar config = require(\"config\");\n\nvar State = {\n    LOADING: 0,\n    WAITING: 1,\n    RUNNING: 2,\n    GAMEOVER: 3\n};\n\nvar Battle = cc.Layer.extend({\n    ctor: function () {\n        this._super();\n        this.socket = new SocketClient();\n        this.state = State.LOADING;\n        this.currentTurn = 0;\n        this.receivedTurnCount = 0;\n        this.replay = {};\n        this.isLagged = false;\n    },\n\n    isReady: function () {\n        return this.state === State.RUNNING;\n    },\n\n    onOpenActionBar: function (sender, type) {\n        if (type === ccui.Widget.TOUCH_ENDED) {\n            this.actionBar.setVisible(!this.actionBar.isVisible());\n        }\n    },\n\n    init: function () {\n        var room = getStoreState().room;\n\n        this.ground = new cc.Sprite(\"#ground.png\");\n        this.ground.setPosition(\n            cc.p(Defs.SCREEN_CENTER.x + Defs.BATTLE_POSITION.x, Defs.SCREEN_CENTER.y + Defs.BATTLE_POSITION.y)\n        );\n        this.ground.setScale(Defs.BATTLE_SCALE);\n        this.addChild(this.ground);\n\n        this.openButton = ui.makeButton(this, {\n            normal: \"blue_button.png\",\n            pressed: \"blue_button.png\",\n            anchorPoint: cc.p(1, 0),\n            listener: this.onOpenActionBar,\n            listenerTarget: this,\n            scale: 1.5,\n            position: ui.relativeTo(this, ui.RIGHT_BOTTOM, 5, 5)\n        });\n\n        ui.makeImageView(this.openButton, {\n            sprite: \"badge_cyber.png\",\n            anchorPoint: cc.p(0.5, 0.5),\n            scale: 0.5,\n            position: ui.relativeTo(this.openButton, ui.CENTER, 0, 0)\n        });\n\n        this.actionBar = new ActionBar({\n            socket: this.socket,\n            team: room.playerId\n        });\n        this.actionBar.setAnchorPoint(0, 0);\n        this.actionBar.setPosition(ui.relativeTo(this, ui.LEFT_BOTTOM, 0, 0));\n        this.addChild(this.actionBar, 40);\n\n        var topBar = new TopBar({});\n\n        topBar.setAnchorPoint(0, 0);\n        topBar.setPosition(ui.relativeTo(this, ui.LEFT_TOP, 0, 0));\n        this.addChild(topBar, 60);\n        this.topBar = topBar;\n\n        this.actionBar.setVisible(false);\n\n        var groundSize = this.ground.getContentSize();\n        this.presentation = new Presentation({ team: room.playerId, actionBar: this.actionBar });\n        this.presentation.setPosition(groundSize.width / 2, groundSize.height / 2);\n        this.ground.addChild(this.presentation, 10);\n\n        Camera.setRotate(room.playerId === 0 ? 0 : 180);\n        this.presentation.rotate(Camera.rotate);\n\n        this.lagNotify = new NotifyLayer();\n        this.lagNotify.setText(\"Reconnecting...\");\n        this.lagNotify.setVisible(false);\n        this.addChild(this.lagNotify);\n\n        this.battleResult = new alertLayer();\n        this.battleResult.setVisible(false);\n        this.addChild(this.battleResult, 100);\n    },\n\n    connect: function () {\n        var room = getStoreState().room;\n        var authenticate = getStoreState().authenticate;\n        this.socket.connect(config.socketUrl, {\n            userId: authenticate.id,\n            roomId: room.roomId,\n            accessToken: authenticate.accessToken\n        });\n    },\n\n    close: function () {\n        this.socket.close();\n    },\n\n    send: function (message) {\n        this.socket.send(message);\n    },\n\n    update: function (dt) {\n        if (this.state === State.GAMEOVER) return;\n\n        if (this.state === State.LOADING && this.socket.isReady) {\n            this.send({ type: \"ready\" });\n            this.state = State.WAITING;\n        }\n\n        var message = this.socket.popMessage();\n        if (message) {\n            switch (message.type) {\n                case \"ready\":\n                    this.handleReady(message);\n                    break;\n\n                case \"timeOver\":\n                    this.handleTimeOver(message);\n                    break;\n\n                case \"turn\":\n                    this.handleTurn(message);\n                    break;\n\n                case \"lagged\":\n                    this.showLaggedWarning();\n                    this.isLagged = true;\n                    break;\n            }\n        }\n\n        if (!this.isLagged) {\n            this.presentation.update(dt);\n        }\n    },\n\n    showLaggedWarning: function () {\n        this.lagNotify.setVisible(true);\n    },\n\n    hideLaggedWarning: function () {\n        this.lagNotify.setVisible(false);\n    },\n\n    initGameOver: function (result) {\n        this.battleResult.setError(\n            result.winnerId == getStoreState().room.playerId ? \"YOU WIN!\" : result.winnerId < 0 ? \"DRAW!\" : \"YOU LOSE!\",\n            (_) => {\n                cc.director.runScene(new window.SplashScene());\n            }\n        );\n        this.battleResult.setVisible(true);\n        this.state = State.GAMEOVER;\n    },\n    handleReady: function (message) {\n        cc.log(\"Battle ready!\");\n        this.state = State.RUNNING;\n\n        var room = getStoreState().room;\n\n        var hand = [ \"001\", \"002\", \"003\", \"004\", \"005\", \"006\" ];\n        this.actionBar.setHand(hand);\n\n        this.actionBar.setVisible(false);\n\n        this.presentation.init();\n    },\n\n    handleTimeOver: function (message) {\n        this.initGameOver({ winnerId: -1 });\n    },\n\n    handleTurn: function (message) {\n        if (this.state !== State.RUNNING) return;\n\n        this.replay[message.index] = message;\n        if (message.index > this.receivedTurnCount) {\n            this.receivedTurnCount = message.index;\n        }\n\n        var turn = this.replay[this.currentTurn];\n        if (turn && this.receivedTurnCount - this.currentTurn >= Defs.TURN_PADDING) {\n            this.hideLaggedWarning();\n            this.isLagged = false;\n\n            var deployList = turn.deploy;\n            for (var i = 0; i < deployList.length; ++i) {\n                var deployment = deployList[i];\n                this.presentation.deploy(deployment);\n            }\n\n            this.presentation.step(turn.dt);\n            this.topBar.setInfo(this.presentation.gold, this.presentation.time);\n            ++this.currentTurn;\n\n            if (this.presentation.result) {\n                this.initGameOver(this.presentation.result);\n            } else {\n                this.send({ type: \"ack\", turn: this.currentTurn });\n            }\n        }\n    }\n});\n\nmodule.exports = Battle;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/battle.js","import ui from \"../utils/ui\";\nimport Defs from \"./defs\";\n\nvar CardButton = cc.Node.extend({\n    ctor: function (opts) {\n        this._super();\n\n        this.pokedex = \"\";\n        this.name = \"\";\n        this.team = 0;\n        this.index = 0;\n\n        this.actionBar = opts.actionBar;\n\n        this.frame = ui.makeImageView(this, {\n            sprite: \"blue_button.png\",\n            scale9Size: cc.size(Defs.ACTION_BUTTON_WIDTH, Defs.ACTION_BUTTON_HEIGHT),\n            anchorPoint: cc.p(0, 0),\n            position: ui.relativeTo(this, ui.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this.costText = ui.makeText(this.frame, {\n            text: \"0\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            anchorPoint: cc.p(0.5, 0.5),\n            position: ui.relativeTo(this.frame, ui.CENTER_BOTTOM, 0, 40),\n            shadow: true,\n            zOrder: 10\n        });\n\n        var spr = new cc.Sprite();\n        this.sprite = spr;\n        this.frame.addChild(spr);\n\n        var self = this;\n        this._touchListener = cc.EventListener.create({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            onTouchBegan: self.onTouchBegan.bind(self),\n            onTouchMoved: self.onTouchMoved.bind(self),\n            onTouchEnded: self.onTouchEnded.bind(self),\n            onTouchCancelled: self.onTouchCancelled(self)\n        });\n\n        cc.eventManager.addListener(self._touchListener, self);\n\n        this.isSelected = false;\n    },\n\n    setPokemon: function (pokemon, team) {\n        var pokedex = pokemon.pokedex;\n        if (this.pokedex !== pokedex || this.team !== team) {\n            this.pokedex = pokemon.pokedex;\n            this.name = pokemon.name;\n            this.team = team;\n            this.sprite.setSpriteFrame(this.name.toLowerCase() + \".png\");\n            this.sprite.setAnchorPoint(cc.p(0.5, 0.5));\n            this.sprite.setPosition(ui.relativeTo(this.frame, ui.CENTER, 0, 20));\n\n            this.costText.setString(pokemon.total);\n        }\n    },\n\n    unselect: function () {\n        this.isSelected = false;\n        this.frame.loadTexture('blue_button.png', ccui.Widget.PLIST_TEXTURE);\n    },\n\n    select: function () {\n        this.isSelected = true;\n        this.frame.loadTexture('yellow_button.png', ccui.Widget.PLIST_TEXTURE);\n    },\n\n    onTouchEnded: function (touch, event) {},\n\n    onTouchBegan: function (touch, event) {\n        if (this.containsTouchLocation(touch)) {\n            this.actionBar.select(this);\n        }\n    },\n\n    onTouchMoved: function (touch, event) {},\n\n    onTouchCancelled: function (touch, event) {},\n\n    containsTouchLocation: function (touch) {\n        var pt = touch.getLocation();\n        var sz = this.frame.getContentSize();\n        var bb = cc.rect(0, 0, sz.width, sz.height);\n        return cc.rectContainsPoint(bb, this.frame.convertToNodeSpace(pt));\n    }\n});\n\nmodule.exports = CardButton;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/cardButton.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityMeleeFighter from \"./entityMeleeFighter\";\nimport EntityEffectBullet from \"./entityEffectBullet\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityDual = EntityMeleeFighter.extend({\n    createEffect: function (target) {\n        var hit = new EntityEffectBullet(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    },\n    step: function (dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === Defs.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === Defs.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForEnemy();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = approxDistance(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = Defs.UNIT_STATE_ATTACK;\n                }\n            } else {\n                if (this.isOfflane()) {\n                    this.state = Defs.UNIT_STATE_IDLE;\n                } else {\n                    var v = dt * this.getMoveSpeed() / 1000;\n                    if (this.team === 0) {\n                        this.logic.y += v;\n                    } else {\n                        this.logic.y -= v;\n                    }\n                }\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = Defs.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n\n                        var secondTarget = this.lookForSecondTarget();\n                        if (secondTarget && secondTarget.isAlive()) {\n                            this.createEffect(secondTarget);\n                        }\n                    }\n                }\n            } else {\n                this.state = Defs.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    lookForSecondTarget: function () {\n        var enemies = this.presentation.findEnemies(this, 2);\n        if (enemies[0] !== this.target) {\n            return enemies[0];\n        }\n\n        return enemies[1];\n    }\n});\n\nmodule.exports = EntityDual;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityDual.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityEffectHeal = EntityBase.extend({\n    ctor: function (team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 300;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = approxDistance(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: \"effect_heala_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: \"effect_heala_hit\", count: 10, loop: false });\n        this.state = Defs.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function (dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function (dt) {\n        this._super(dt);\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = approxDistance(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = approxDistance(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = Defs.UNIT_STATE_ATTACK;\n                this.target.heal(this.owner.getAttackFor(this.target.attr));\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === Defs.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectHeal;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityEffectHeal.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityBase from \"./entityBase\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityEffectRocket = EntityBase.extend({\n    ctor: function (team, presentation, owner, target, spriteName) {\n        this._super(team, presentation);\n\n        this.target = null;\n        this.life = 1000;\n        this.owner = owner;\n\n        this.target = target;\n\n        this.logic.x = this.owner.logic.x;\n        this.logic.y = this.owner.logic.y;\n        this.logic.z = this.owner.getSize() / 2;\n\n        this.startX = this.logic.x;\n        this.startY = this.logic.y;\n        this.startDistance = approxDistance(this.target.logic.x - this.startX, this.target.logic.y - this.startY);\n\n        this.zShift = 10;\n        this.syncPosition();\n\n        this.idleAction = this.createAnimAction({ name: spriteName || \"effect_bulleta_idle\", count: 1, loop: true });\n        this.hitAction = this.createAnimAction({ name: \"effect_bulletf_hit\", count: 6, loop: false });\n        this.state = Defs.UNIT_STATE_IDLE;\n\n        this.sprite.runAction(this.idleAction);\n    },\n\n    update: function (dt) {\n        this._super(dt);\n        this.animatePosition();\n    },\n\n    step: function (dt) {\n        this._super(dt);\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            var isHit = false;\n            var dx = this.target.logic.x - this.logic.x;\n            var dy = this.target.logic.y - this.logic.y;\n            var mag = approxDistance(dx, dy);\n            if (mag > this.target.getSize()) {\n                var v = dt * 1.5;\n                this.logic.x += dx / mag * v;\n                this.logic.y += dy / mag * v;\n\n                var awayDistance = approxDistance(this.logic.x - this.startX, this.logic.y - this.startY);\n                if (awayDistance >= this.startDistance - this.target.getSize()) {\n                    this.logic.x = this.target.logic.x;\n                    this.logic.y = this.target.logic.y;\n                    isHit = true;\n                }\n            } else {\n                isHit = true;\n            }\n\n            this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n            if (!this.target.isAlive()) {\n                isHit = true;\n            }\n\n            if (isHit) {\n                this.sprite.runAction(this.hitAction);\n                this.state = Defs.UNIT_STATE_ATTACK;\n\n                var enemies = this.presentation.findEnemyInArea(this.owner, this.logic.x, this.logic.y, this.owner.attr.SplashRange || 200);\n                for (var i = 0; i < enemies.length; ++i) {\n                    enemies[i].damage(this.owner.getAttackFor(enemies[i].attr));\n                }\n            }\n\n            this.sprite.setRotation(Math.atan2(dx, dy) * 180 / Math.PI);\n        } else if (this.state === Defs.UNIT_STATE_ATTACK) {\n            this.life -= dt;\n        }\n\n        return this.life > 0;\n    }\n});\n\nmodule.exports = EntityEffectRocket;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityEffectRocket.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityMeleeFighter from \"./entityMeleeFighter\";\nimport EntityEffectBullet from \"./entityEffectBullet\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityGunner = EntityMeleeFighter.extend({\n    createEffect: function (target) {\n        var hit = new EntityEffectBullet(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    }\n});\n\nmodule.exports = EntityGunner;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityGunner.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityTower from \"./entityTower\";\n\nvar EntityHQ = EntityTower.extend({\n});\n\nmodule.exports = EntityHQ;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityHQ.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityMeleeFighter from \"./entityMeleeFighter\";\nimport EntityEffectHeal from \"./entityEffectHeal\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntityHealer = EntityMeleeFighter.extend({\n    createEffect: function (target) {\n        var hit = new EntityEffectHeal(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    },\n\n    step: function (dt) {\n        if (!this.stepLiveliness(dt)) return false;\n        if (this.state === Defs.UNIT_STATE_DYING) return true;\n\n        this._departurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.logic.cool > 0) {\n            this.logic.cool -= dt;\n            if (this.logic.cool < 0) {\n                this.logic.cool = 0;\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_IDLE) {\n            this.intentAction = this.animAction.idle;\n\n            this.updateIdle();\n        }\n\n        if (this.state === Defs.UNIT_STATE_WALK) {\n            this.intentAction = this.animAction.walk;\n            this.lookForAlly();\n\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                var dx = target.logic.x - this.logic.x;\n                var dy = target.logic.y - this.logic.y;\n                var mag = approxDistance(dx, dy);\n\n                if (mag > this.getRange()) {\n                    var v = dt * this.getMoveSpeed() / 1000;\n\n                    this.setFacing(dx > 0 ? 1 : -1);\n\n                    this.logic.x += dx / mag * v;\n                    this.logic.y += dy / mag * v;\n                } else {\n                    this.state = Defs.UNIT_STATE_ATTACK;\n                }\n            } else {\n                var v = dt * this.getMoveSpeed() / 1000;\n                if (this.team === 0) {\n                    this.logic.y += v;\n                } else {\n                    this.logic.y -= v;\n                }\n            }\n        }\n\n        if (this.state === Defs.UNIT_STATE_ATTACK) {\n            var target = this.stateData.target;\n            if (target && target.isAlive()) {\n                if (this.logic.cool <= 0) {\n                    var dist = this.getDistanceTo(target);\n                    if (dist > this.getRange()) {\n                        this.state = Defs.UNIT_STATE_WALK;\n                    } else {\n                        this.intentAction = this.animAction.attack;\n                        this.currentAction = null;\n                        this.logic.cool = this.getAttackCool();\n\n                        this.createEffect(target);\n                    }\n                }\n            } else {\n                this.state = Defs.UNIT_STATE_IDLE;\n            }\n        }\n\n        this._futurePosition = this.convertPosition(this.logic.x, this.logic.y);\n\n        if (this.currentAction !== this.intentAction) {\n            this.currentAction = this.intentAction;\n            this.sprite.stopAllActions();\n            this.sprite.runAction(this.currentAction);\n        }\n        return true;\n    },\n\n    updateIdle: function () {\n        var enemy = this.presentation.findWoundedAlly(this);\n        if (enemy) {\n            this.state = Defs.UNIT_STATE_WALK;\n            this.stateData.target = enemy;\n        } else {\n            this.state = Defs.UNIT_STATE_WALK;\n            this.stateData.target = null;\n        }\n    },\n\n    lookForAlly: function () {\n        var enemy = this.presentation.findWoundedAlly(this);\n        if (enemy) {\n            this.stateData.target = enemy;\n        }\n    },\n});\n\nmodule.exports = EntityHealer;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entityHealer.js","import Defs from \"./defs\";\n\nimport Camera from \"./camera\";\nimport EntityMeleeFighter from \"./entityMeleeFighter\";\nimport EntityEffectRocket from \"./entityEffectRocket\";\nimport approxDistance from \"../utils/approxDistance\";\n\nvar EntitySiege = EntityMeleeFighter.extend({\n    createEffect: function (target) {\n        var hit = new EntityEffectRocket(this.team, this.presentation, this, target, this.attr.bulletName);\n        this.presentation.addEffect(hit);\n    }\n});\n\nmodule.exports = EntitySiege;\n\n\n// WEBPACK FOOTER //\n// ./source/battle/entitySiege.js","import Defs from \"./defs\";\n\nclass Formation {\n    constructor (team) {\n        this.team = team;\n        this.units = [];\n    }\n\n    add (deployment) {\n        this.units.push(deployment);\n    }\n\n    getOffsetX () {\n        return (Defs.ARENA_WIDTH / 2) * 100 / Defs.ARENA_CELL_WIDTH;\n    }\n\n    getOffsetY () {\n        var h = (Defs.ARENA_HEIGHT / 2) * 100 / Defs.ARENA_CELL_HEIGHT;\n        return this.team === 0 ? -h : (Defs.ARENA_HEIGHT * 100 / Defs.ARENA_CELL_HEIGHT + h);\n    }\n}\n\nmodule.exports = Formation;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/formation.js","import Battle from \"./battle\";\n\nmodule.exports = Battle;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/index.js","import Defs from \"./defs\";\nimport Camera from \"./camera\";\nimport Formation from \"./formation\";\nimport EntityTower from \"./entityTower\";\nimport EntityHQ from \"./entityHQ\";\nimport EntityMeleeFigher from \"./entityMeleeFighter\";\nimport EntityGunner from \"./entityGunner\";\nimport EntityHealer from \"./entityHealer\";\nimport EntitySiege from \"./entitySiege\";\nimport EntityDual from \"./entityDual\";\n\nvar ENTITY_KLASS_MAP = {\n    entityHQ: EntityHQ,\n    entityTower: EntityTower\n};\n\nvar TRIPLE_FORMATION = [ { dx: 0, dy: 0 }, { dx: -120, dy: -120 }, { dx: -120, dy: 120 } ];\n\nvar Presentation = cc.Node.extend({\n    ctor: function (opts) {\n        this._super();\n\n        this.entities = [];\n        this.team = opts.team;\n        this.actionBar = opts.actionBar;\n        this.actionBar.presentation = this;\n\n        this.root = new cc.Node();\n        this.root.setPosition(cc.p(-Defs.ARENA_WIDTH / 2, -Defs.ARENA_HEIGHT / 2));\n        this.addChild(this.root, 0);\n\n        this.gold = 0;\n        this.time = 0;\n\n        this.leftGoals = [];\n        this.rightGoals = [];\n        this.units = [];\n        this.effects = [];\n\n        this.timeFrameCounter = 0;\n        this.stepTime = 1;\n        this.result = null;\n\n        this.formations = [];\n    },\n\n    rotate: function (angle) {\n        this.setRotation(angle);\n    },\n\n    init: function () {\n        this.leftGoals.push(this.build({ name: \"tower\", x: 900, y: 650, playerId: 0 }));\n        this.leftGoals.push(this.build({ name: \"hq\", x: 900, y: 50, playerId: 0 }));\n\n        this.rightGoals.push(this.build({ name: \"tower\", x: 900, y: 2550, playerId: 1 }));\n        this.rightGoals.push(this.build({ name: \"hq\", x: 900, y: 3150, playerId: 1 }));\n\n        this.gold = 200000;\n        this.time = 10000;\n\n        this.formations = [];\n    },\n\n    update: function (dt) {\n        this.timeFrameCounter += dt * 1000;\n\n        for (var i = 0; i < this.units.length; ++i) {\n            this.units[i].update(dt);\n        }\n\n        for (var i = 0; i < this.effects.length; ++i) {\n            this.effects[i].update(dt);\n        }\n    },\n\n    build: function (deployment) {\n        var unitData = Defs.UNIT_DATA[deployment.name];\n        if (!unitData) return;\n\n        var Klass = ENTITY_KLASS_MAP[unitData.Klass];\n        if (!Klass) return;\n\n        var e = this.spawnUnit(Klass, deployment.playerId, deployment.x, deployment.y, unitData);\n        return e;\n    },\n\n    deploy: function (deployment) {\n        var team = deployment.playerId;\n        var formation = this.formations[team];\n        if (!formation) {\n            formation = new Formation(team);\n            this.formations[team] = formation;\n        }\n\n        var unitData = Defs.POKEMONS.find((it) => it.pokedex === deployment.name);\n        if (!unitData) return;\n\n        var cost = unitData.total || 100;\n\n        formation.add(deployment);\n\n        if (formation.team === this.team) {\n            this.actionBar.setFormation(formation);\n        }\n    },\n\n    spawnUnit: function (Klass, team, x, y, unitData) {\n        var e = new Klass(team, this);\n        e.setUnitData(unitData);\n        e.setLocation(x, y);\n        this.units.push(e);\n        this.root.addChild(e);\n        return e;\n    },\n\n    addEffect: function (effect) {\n        this.effects.push(effect);\n        this.root.addChild(effect);\n    },\n\n    step: function (dt) {\n        this.timeFrameCounter = 0;\n        this.stepTime = dt;\n\n        this.gold += dt * 10;\n        this.time -= dt;\n\n        if (this.time <= 0) {\n            this.time = 10000;\n            this.deployAllFormations();\n        }\n\n        for (var i = this.units.length - 1; i >= 0; --i) {\n            var u = this.units[i];\n            if (!u.step(dt)) {\n                this.units[i] = this.units[this.units.length - 1];\n                this.units.length--;\n                u.removeFromParent();\n            }\n        }\n\n        for (var i = this.effects.length - 1; i >= 0; --i) {\n            var e = this.effects[i];\n            if (!e.step(dt)) {\n                this.effects[i] = this.effects[this.effects.length - 1];\n                this.effects.length--;\n                e.removeFromParent();\n            }\n        }\n\n        var leftHQ = this.leftGoals[this.leftGoals.length - 1];\n        var rightHQ = this.rightGoals[this.rightGoals.length - 1];\n        if (!leftHQ.isActive()) {\n            if (!rightHQ.isActive()) {\n                this.result = { winnerId: -1 };\n            } else {\n                this.result = { winnerId: 1 };\n            }\n        } else if (!rightHQ.isActive()) {\n            if (!leftHQ.isActive()) {\n                this.result = { winnerId: -1 };\n            } else {\n                this.result = { winnerId: 0 };\n            }\n        }\n    },\n\n    findGoal: function (entity) {\n        var team = entity.team;\n        var goals = team === 0 ? this.rightGoals : this.leftGoals;\n        var res;\n        var dist = Defs.BIG_DISTANCE;\n        for (var i = 0; i < goals.length; ++i) {\n            var g = goals[i];\n            if (g.isAlive()) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemy: function (entity) {\n        var res;\n        var dist = Defs.BIG_DISTANCE;\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemies: function (entity, count) {\n        var res = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                res.push(g);\n                count--;\n                if (count <= 0) {\n                    break;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findEnemyInArea: function (entity, x, y, r) {\n        var res = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.team !== entity.team && entity.canAttack(g)) {\n                var d = g.getDistanceToPos(x, y);\n                if (d < r) {\n                    res.push(g);\n                }\n            }\n        }\n\n        return res;\n    },\n\n    findWoundedAlly: function (entity) {\n        var res;\n        var dist = Defs.BIG_DISTANCE;\n        for (var i = 0; i < this.units.length; ++i) {\n            var g = this.units[i];\n            if (g.isAlive() && g.isWounded() && g.team === entity.team && entity.canAttack(g) && entity.canSee(g)) {\n                var d = g.getDistanceTo(entity);\n                if (d < dist) {\n                    res = g;\n                    dist = d;\n                }\n            }\n        }\n\n        return res;\n    },\n\n    deployAllFormations: function () {\n        for (let i = 0; i < this.formations.length; ++i) {\n            this.deployFormation(this.formations[i]);\n        }\n    },\n\n    deployFormation: function (formation) {\n        if (!formation) {\n            return;\n        }\n\n        for (let i = 0; i < formation.units.length; ++i) {\n            var unit = formation.units[i];\n\n            var unitData = Defs.POKEMONS.find((it) => it.pokedex === unit.name);\n            if (!unitData) return;\n\n            var Klass = null;\n            switch (unitData.klass) {\n                case \"gunner\":\n                    Klass = EntityGunner;\n                    break;\n                case \"healer\":\n                    Klass = EntityHealer;\n                    break;\n                case \"siege\":\n                    Klass = EntitySiege;\n                    break;\n                case \"dual\":\n                    Klass = EntityDual;\n                    break;\n            }\n\n            if (!Klass) return;\n\n            var x = unit.x * 64 * 100 / Defs.ARENA_CELL_WIDTH;\n            var y = unit.y * 64 * 100 / Defs.ARENA_CELL_HEIGHT;\n            if (formation.team === 1) {\n                y = -y;\n            }\n\n            this.spawnUnit(Klass, formation.team, x + formation.getOffsetX(), y + formation.getOffsetY(), unitData);\n        }\n    }\n});\n\nmodule.exports = Presentation;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/presentation.js","import ui from \"../utils/ui\";\n\nimport Defs from \"./defs\";\n\nvar TopBar = cc.Node.extend({\n    ctor: function (opts) {\n        this._super();\n\n        var panel = ui.makeImageView(this, {\n            sprite: \"action_bar_panel.png\",\n            scale9Size: cc.size(Defs.TOP_BAR_WIDTH, Defs.TOP_BAR_HEIGHT),\n            anchorPoint: cc.p(0, 1),\n            position: ui.relativeTo(this, ui.LEFT_TOP, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        ui.makeImageView(this, {\n            sprite: \"icon_coin.png\",\n            anchorPoint: cc.p(0, 0.5),\n            position: ui.relativeTo(this, ui.LEFT_MIDDLE, 20, -Defs.TOP_BAR_HEIGHT / 2),\n            contentSize: cc.size(40, 40),\n            resizeMode: ui.RESIZE_STRETCH\n        });\n\n        this.goldText = ui.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            anchorPoint: cc.p(0, 0.5),\n            fontSize: 32,\n            position: ui.relativeTo(panel, ui.LEFT_MIDDLE, 70, 0),\n            horzAlign: cc.TEXT_ALIGNMENT_LEFT\n        });\n\n        ui.makeImageView(this, {\n            sprite: \"icon_time.png\",\n            anchorPoint: cc.p(0, 0.5),\n            position: ui.relativeTo(this, ui.LEFT_MIDDLE, 240, -Defs.TOP_BAR_HEIGHT / 2),\n            contentSize: cc.size(40, 40),\n            resizeMode: ui.RESIZE_STRETCH\n        });\n\n        this.timeText = ui.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            anchorPoint: cc.p(0, 0.5),\n            fontSize: 32,\n            position: ui.relativeTo(panel, ui.LEFT_MIDDLE, 300, 0),\n            horzAlign: cc.TEXT_ALIGNMENT_LEFT\n        });\n    },\n\n    setInfo: function (gold, time) {\n        this.goldText.setString(Math.floor(gold / 1000));\n        this.timeText.setString(Math.floor(time / 1000));\n    }\n});\n\nmodule.exports = TopBar;\n\n\n\n// WEBPACK FOOTER //\n// ./source/battle/topBar.js","// @flow\nimport Localize from '../localize';\n\nimport ui from '../utils/ui';\n\nvar NotifyLayer = ccui.Layout.extend({\n    ctor: function () {\n        this._super();\n\n        cc.spriteFrameCache.addSpriteFrames('mainmenu.plist');\n\n        this._error = {};\n        this._onClick = null;\n\n        var size: Size = cc.winSize;\n        var center = cc.p(size.width / 2, size.height / 2);\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n\n        var panel = ui.makeImageView(this, {\n            sprite: 'popup_frame.png',\n            scale9Size: cc.size(900, 520),\n            position: ui.relativeTo(this, ui.CENTER, 0, 0),\n            ignoreContentAdaptWithSize: false\n        });\n\n        this._text = ui.makeText(panel, {\n            text: \"\",\n            font: getNormalFontName(),\n            fontSize: 32,\n            position: ui.relativeTo(panel, ui.CENTER, 0, 40),\n            size: cc.size(800, 250),\n            ignoreContentAdaptWithSize: false\n        });\n        return true;\n    },\n\n    setText: function (text, onClick) {\n        this._onClick = onClick;\n        this._error = text;\n        this._text.setString(JSON.stringify(this._error));\n    }\n});\n\nexport default NotifyLayer;\n\n\n// WEBPACK FOOTER //\n// ./source/common/notifyLayer.js","// @flow\nclass SocketClient {\n    constructor() {\n        this._socket = null;\n        this._messagesQueue = [];\n        this._pendingQueue = [];\n        this._pendingBuffer = [];\n        this._query = null;\n        this._address = null;\n\n        this.isReady = false;\n        this._isActive = true;\n    }\n\n    close() {\n        this.flush();\n        this.isReady = false;\n        this._isActive = false;\n\n        if (this._socket) {\n            this._socket.close();\n            this._socket = null;\n        }\n    }\n\n    connect(address, query) {\n        this._address = address;\n        this._query = query;\n        this.tryConnect();\n    }\n\n    buildQuery(address, query) {\n        var url = address;\n        var i = 0;\n        for (var q in query) {\n            url += (i === 0 ? \"?\" : \"&\") + q + \"=\" + query[q];\n            ++i;\n        }\n        return url;\n    }\n\n    tryConnect() {\n        this._socket = new WebSocket(this.buildQuery(this._address, this._query));\n        //this._socket.binaryType = \"arraybuffer\";\n\n        var self = this;\n        this._socket.onopen = function(evt) {\n            cc.log(\"Socket client connected.\");\n            self.isReady = true;\n\n            for (var i = 0; i < self._pendingQueue.length; ++i) {\n                self.send(self._pendingQueue[i]);\n            }\n            self._pendingQueue.length = 0;\n\n            for (var i = 0; i < self._pendingBuffer.length; ++i) {\n                self.sendBuffer(self._pendingBuffer[i]);\n            }\n            self._pendingBuffer.length = 0;\n        };\n\n        this._socket.onmessage = function(evt) {\n            if (evt.data) {\n                self._messagesQueue.push(evt.data);\n            }\n        };\n\n        this._socket.onclose = function(evt) {\n            cc.log(\"Socket was closed\");\n\n            if (evt.reason) {\n                self._messagesQueue.push(\n                    JSON.stringify({\n                        type: \"close\",\n                        reasons: evt.reason\n                    })\n                );\n            }\n\n            self._socket = null;\n            self.isReady = false;\n\n            if (self._isActive) {\n                // retry\n                setTimeout(() => {\n                    cc.log(\"Retry socket connection\");\n                    self.tryConnect();\n                }, 1000);\n            }\n        };\n\n        this._socket.onerror = function(evt) {\n            self._socket = null;\n            self.isReady = false;\n        };\n    }\n\n    popMessage() {\n        if (this._messagesQueue.length > 0) {\n            var msg = this._messagesQueue.shift();\n\n            var data;\n            try {\n                data = JSON.parse(msg);\n            } catch (e) {\n                cc.error(e);\n            }\n\n            return data;\n        }\n\n        return null;\n    }\n\n    popRawMessage() {\n        if (this._messagesQueue.length > 0) {\n            return this._messagesQueue.shift();\n        }\n\n        return null;\n    }\n\n    send(data) {\n        if (this.isReady && this._socket) {\n            var msg = JSON.stringify(data);\n            this._socket.send(msg);\n        } else {\n            this._pendingQueue.push(data);\n        }\n    }\n\n    sendBuffer(buffer) {\n        if (this.isReady && this._socket) {\n            this._socket.send(buffer);\n        } else {\n            this._pendingBuffer.push(buffer);\n        }\n    }\n\n    flush() {\n        this._messagesQueue.length = 0;\n        this._pendingQueue.length = 0;\n        this._pendingBuffer.length = 0;\n    }\n}\n\nmodule.exports = SocketClient;\n\n\n\n// WEBPACK FOOTER //\n// ./source/common/socketClient.js","// @flow\nimport ui from '../utils/ui';\n\nvar WaitingLayer = ccui.Layout.extend({\n    ctor: function (size: Size) {\n        this._super();\n\n        this._loadingProgress = 0;\n\n        this.setBackGroundColor(cc.color(8, 8, 8, 128));\n        this.setBackGroundColorOpacity(128);\n        this.setBackGroundColorType(ccui.Layout.BG_COLOR_SOLID);\n        this.setSize(size);\n        this.setTouchEnabled(true);\n        this.setSwallowTouches(true);\n\n        ui.makeImageView(this, { sprite: 'loading_bkg.png', zOrder: 1 });\n        this._loadingDot = ui.makeImageView(this, { sprite: 'loading_dot.png', zOrder: 2 });\n\n        this.setVisible(false);\n        return true;\n    },\n\n    setVisible: function (visible) {\n        this._super(visible);\n        if (visible) {\n            this.scheduleUpdate();\n        } else {\n            this.unscheduleUpdate();\n        }\n    },\n\n    update: function (dt) {\n        this._loadingProgress += 360 * dt;\n        if (this._loadingProgress >= 360) {\n            this._loadingProgress -= 360;\n        }\n        this._loadingDot.setRotation(this._loadingProgress);\n    }\n});\n\nexport default WaitingLayer;\n\n\n// WEBPACK FOOTER //\n// ./source/common/waitingLayer.js","module.exports = [\n    {\n        pokedex: \"001\",\n        name: \"Bulbasaur\",\n        type: [\"GRASS\", \"POISON\"],\n        total: 50,\n        hp: 55,\n        attack: 6,\n        attackHeavy: 0,\n        Cool: 610,\n        Range: 500,\n        Sight: 700,\n        defense: 0,\n        Speed: 225,\n        image: \"bulbasaur.png\",\n        klass: \"gunner\",\n        armor: 'light',\n        bulletName: 'effect_bulleta_idle'\n    },\n    {\n        pokedex: \"002\",\n        name: \"Ivysaur\",\n        type: [\"GRASS\", \"POISON\"],\n        total: 125,\n        hp: 125,\n        attack: 10,\n        attackHeavy: 10,\n        Cool: 1070,\n        Range: 600,\n        Sight: 800,\n        defense: 1,\n        Speed: 225,\n        image: \"ivysaur.png\",\n        klass: \"gunner\",\n        armor: 'heavy',\n        bulletName: 'effect_bulletb_idle'\n    },\n    {\n        pokedex: \"003\",\n        name: \"Venusaur\",\n        type: [\"GRASS\", \"POISON\"],\n        total: 125,\n        hp: 60,\n        attack: 2,\n        Cool: 200,\n        Range: 600,\n        Sight: 1200,\n        defense: 1,\n        Speed: 225,\n        image: \"venusaur.png\",\n        klass: \"healer\",\n        armor: 'light'\n    },\n    {\n        pokedex: \"004\",\n        name: \"Blastoise\",\n        type: [\"GRASS\", \"POISON\"],\n        total: 75,\n        hp: 75,\n        attack: 10,\n        attackLight: 15,\n        Cool: 1690,\n        Range: 600,\n        Sight: 800,\n        defense: 1,\n        Speed: 425,\n        image: \"blastoise.png\",\n        klass: \"gunner\",\n        armor: 'light',\n        bulletName: 'effect_bulletd_idle'\n    },\n    {\n        pokedex: \"005\",\n        name: \"Charmander\",\n        type: [\"FIRE\"],\n        total: 200,\n        hp: 175,\n        attack: 15,\n        attackHeavy: 10,\n        Cool: 740,\n        Range: 900,\n        Sight: 1000,\n        defense: 1,\n        Speed: 315,\n        image: \"charmander.png\",\n        klass: \"siege\",\n        armor: 'heavy',\n        bulletName: 'effect_bullete_idle',\n        SplashRange: 300\n    },\n    {\n        pokedex: \"006\",\n        name: \"Charmeleon\",\n        type: [\"FIRE\"],\n        total: 375,\n        hp: 400,\n        attack: 30,\n        Cool: 1280,\n        Range: 700,\n        Sight: 800,\n        defense: 1,\n        Speed: 180,\n        image: \"charmeleon.png\",\n        klass: \"dual\",\n        armor: 'heavy',\n        bulletName: 'effect_bullete_idle'\n    }\n];\n\n\n\n// WEBPACK FOOTER //\n// ./source/config/pokemons.js","// @flow\n\nimport httpRequest from '../utils/httpRequest';\n\nvar config = require('config');\n\nexport const apiMiddleware = (store: Store, action: any, next: Function) => {\n    if (action.api && !action.response && !action.error) {\n        const accessToken = store.getState().authenticate.accessToken;\n        const apiHeader = {\n            \"Content-Type\": \"application/json\",\n            \"X-Access-Token\": accessToken\n        };\n\n        httpRequest({\n            url: config.apiUrl + action.api.endpoint,\n            method: action.api.method || \"POST\",\n            header: apiHeader,\n            data: JSON.stringify(action.api.payload),\n            timeout: 5000\n        }, (status, res, responseText) => {\n            if (status == 200) {\n                try {\n                    const response = JSON.parse(responseText);\n                    const error = response.error;\n\n                    if (!error) {\n                        action.response = response;\n                        return next(action);\n                    } else {\n                        action.error = error;\n                        if (action.api.ignoreError) {\n                            return next(action);\n                        }\n                    }\n                } catch (e) {\n                    action.error = [{code: 'invalid_response', what: [responseText], say: e.toString()}];\n                }\n            } else {\n                action.error = [{code: 'http_error', what: [status]}];\n            }\n\n            store.discard(action);\n        });\n    } else {\n        next(action);\n    }\n}\n\nexport default apiMiddleware;\n\n\n// WEBPACK FOOTER //\n// ./source/store/api.js","// @flow\n\nexport const nextMiddleware = (store: Store, action: any, next: Function) => {\n    next(action);\n\n    if (action.next) {\n        const nextAction = action.next;\n        delete action.next;\n        store.dispatch(nextAction);\n    }\n}\n\nexport default nextMiddleware;\n\n\n// WEBPACK FOOTER //\n// ./source/store/next.js","// @flow\nvar config = require('config');\n\nconst PREFIX = config.localStorageName;\n\nexport const storageMiddleware = (store: Store, action: any, next: Function) => {\n    if (action.persist) {\n        action.persist.forEach((key) => {\n            const state = store.getState();\n            const value = state[key];\n            if (value) {\n                cc.sys.localStorage.setItem(JSON.stringify(PREFIX + key), JSON.stringify(value) );\n            }\n        });\n    }\n\n    next(action);\n}\n\nexport const loadState = (keys: []) => {\n    const state = {};\n    keys.forEach(key => {\n        try {\n            const val = JSON.parse(cc.sys.localStorage.getItem(JSON.stringify(PREFIX + key)));\n            state[key] = val || {};\n        } catch (e) {\n        }\n    });\n\n    return state;\n}\n\nexport default storageMiddleware;\n\n\n// WEBPACK FOOTER //\n// ./source/store/storage.js","// @flow\n\nexport const httpRequest = (opts: any, callback: Function) => {\n    const { url, method, header, data, timeout } = opts;\n    const xhr = cc.loader.getXMLHttpRequest();\n    xhr.open((method || \"GET\"), url, true);    \n\n    xhr.timeout = timeout || 5000;\n\n    // set the header\n    if (header) {\n        for (const k in header) {\n            xhr.setRequestHeader(k, header[k]);\n        }\n    }\n\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState == 4) {\n            callback && callback(xhr.status, xhr.response, xhr.responseText);\n            callback = null;\n        }        \n    };\n\n    xhr.onerror = function() {\n        callback && callback(xhr.status, null, 'loaded ' + url + ' error');\n        callback = null;\n    }\n\n    xhr.ontimeout = function () {\n        callback && callback(-1, null, 'loaded ' + url + ' timeout');\n        callback = null;\n    }\n\n    if (data) {\n        xhr.send(data);\n    } else {\n        xhr.send();\n    }    \n}\n\nexport default httpRequest;\n\n\n// WEBPACK FOOTER //\n// ./source/utils/httpRequest.js","module.exports = function shuffle(a) {\n    var j, x, i;\n    for (i = a.length - 1; i > 0; i--) {\n        j = Math.floor(Math.random() * (i + 1));\n        x = a[i];\n        a[i] = a[j];\n        a[j] = x;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./source/utils/shuffle.js","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/core-js/object/keys.js\n// module id = 70\n// module chunks = 0","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/fn/json/stringify.js\n// module id = 71\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/fn/object/assign.js\n// module id = 72\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/fn/object/define-property.js\n// module id = 73\n// module chunks = 0","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/fn/object/keys.js\n// module id = 74\n// module chunks = 0","require('../modules/web.immediate');\nmodule.exports = require('../modules/_core').setImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/fn/set-immediate.js\n// module id = 75\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_a-function.js\n// module id = 76\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_an-object.js\n// module id = 77\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_array-includes.js\n// module id = 78\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_enum-bug-keys.js\n// module id = 79\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_has.js\n// module id = 80\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_hide.js\n// module id = 81\n// module chunks = 0","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_html.js\n// module id = 82\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_ie8-dom-define.js\n// module id = 83\n// module chunks = 0","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_invoke.js\n// module id = 84\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-assign.js\n// module id = 85\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-gops.js\n// module id = 86\n// module chunks = 0","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-keys-internal.js\n// module id = 87\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-pie.js\n// module id = 88\n// module chunks = 0","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_object-sap.js\n// module id = 89\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_property-desc.js\n// module id = 90\n// module chunks = 0","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_shared-key.js\n// module id = 91\n// module chunks = 0","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_shared.js\n// module id = 92\n// module chunks = 0","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_task.js\n// module id = 93\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-absolute-index.js\n// module id = 94\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-length.js\n// module id = 95\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_to-primitive.js\n// module id = 96\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/_uid.js\n// module id = 97\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/es6.object.assign.js\n// module id = 98\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/es6.object.define-property.js\n// module id = 99\n// module chunks = 0","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/es6.object.keys.js\n// module id = 100\n// module chunks = 0","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/core-js/library/modules/web.immediate.js\n// module id = 101\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webpack/buildin/global.js\n// module id = 102\n// module chunks = 0"],"sourceRoot":""}